{"version":3,"file":"playable.bundle.min.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/core/dependency-container/errors/ExtendableError.ts","../../src/core/dependency-container/constants/Lifetime.ts","../../src/core/dependency-container/errors/NotAFunctionError.ts","../../src/core/dependency-container/registrations.ts","../../src/core/dependency-container/errors/ResolutionError.ts","../../src/core/dependency-container/utils/nameValueToObject.ts","../../src/core/dependency-container/createContainer.ts","../../src/core/dependency-container/index.ts","../../src/utils/device-detection.ts","../../src/core/config.ts","../../src/core/player-api-decorator.ts","../../src/core/player-facade.ts","../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","../../src/modules/root-container/utils/interaction-type.ts","../../src/modules/root-container/utils/focus-source.ts","../../src/constants/media-stream.ts","../../src/constants/events/ui.ts","../../src/constants/engine-state.ts","../../src/constants/events/video.ts","../../src/constants/errors.ts","../../src/constants/text-labels.ts","../../src/constants/live-state.ts","../../src/modules/ui/core/htmlToElement.ts","../../node_modules/classnames/index.js","../../src/modules/ui/core/stylable.ts","../../src/modules/ui/core/extendStyles.ts","../../src/modules/ui/core/view.ts","../../node_modules/style-inject/dist/style-inject.es.js","../../src/modules/root-container/root-container.view.ts","../../src/modules/ui/core/element-queries/utils.ts","../../src/modules/ui/core/isElementMatchesSelector.ts","../../src/modules/ui/core/element-queries/getQueriesForElement.ts","../../src/modules/ui/core/element-queries/element-queries.ts","../../src/modules/root-container/root-container.ts","../../src/modules/root-container/utils/focus-within.ts","../../node_modules/eventemitter3/index.js","../../src/modules/event-emitter/event-emitter.ts","../../src/modules/playback-engine/state-engine.ts","../../src/modules/playback-engine/native-events-broadcaster.ts","../../src/modules/playback-engine/utils/adapters-resolver.ts","../../src/modules/playback-engine/utils/detect-stream-type.ts","../../src/modules/playback-engine/adapters-strategy.ts","../../src/modules/playback-engine/playback-engine.ts","../../src/modules/ui/core/theme/utils/hexToRgb.ts","../../src/modules/ui/core/theme/utils/transperentizeColor.ts","../../src/modules/ui/core/theme/utils/camelToKebab.ts","../../src/modules/ui/core/theme/utils/getUniqueId.ts","../../src/modules/ui/core/theme/utils/generateClassNames.ts","../../src/modules/ui/core/theme/style-sheet.ts","../../src/modules/ui/core/theme/theme-service.ts","../../src/modules/text-map/default-texts.ts","../../src/modules/text-map/text-map.ts","../../src/modules/full-screen-manager/desktop.ts","../../src/modules/full-screen-manager/ios.ts","../../src/modules/full-screen-manager/full-screen-manager.ts","../../src/modules/playback-engine/live-state-engine.ts","../../src/utils/keyboard-interceptor.ts","../../src/modules/keyboard-control/keyboard-control.ts","../../src/modules/ui/core/getElementByHook.ts","../../src/modules/ui/core/toggleNodeClass.ts","../../src/modules/ui/debug-panel/debug-panel.view.ts","../../src/modules/ui/debug-panel/syntaxHighlight.ts","../../src/modules/ui/debug-panel/debug-panel.ts","../../src/modules/ui/screen/types.ts","../../src/modules/ui/screen/screen.view.ts","../../src/modules/ui/screen/screen.ts","../../src/modules/ui/interaction-indicator/interaction-indicator.view.ts","../../src/modules/ui/interaction-indicator/interaction-indicator.ts","../../src/modules/ui/overlay/overlay.view.ts","../../src/modules/ui/overlay/overlay.theme.ts","../../src/modules/ui/overlay/overlay.ts","../../src/modules/ui/loader/loader.view.ts","../../src/modules/ui/loader/loader.ts","../../src/modules/ui/main-ui-block/main-ui-block.view.ts","../../src/modules/ui/main-ui-block/main-ui-block.ts","../../src/modules/ui/top-block/top-block.view.ts","../../src/modules/ui/top-block/top-block.ts","../../src/modules/ui/title/title.view.ts","../../src/modules/ui/title/title.theme.ts","../../src/modules/ui/title/title.ts","../../src/modules/ui/live-indicator/live-indicator.view.ts","../../src/modules/ui/live-indicator/live-indicator.ts","../../src/modules/ui/bottom-block/bottom-block.view.ts","../../src/modules/ui/bottom-block/bottom-block.ts","../../src/modules/ui/core/utils/formatTime.ts","../../src/modules/ui/core/tooltip/types.ts","../../src/modules/ui/core/tooltip/tooltip.ts","../../src/modules/ui/core/tooltip/utils/getTooltipPositionByReferenceNode.ts","../../src/modules/ui/core/tooltip/tooltip-reference.ts","../../src/modules/ui/core/tooltip/tooltip-container.ts","../../src/modules/ui/core/tooltip/tooltip-service.ts","../../src/modules/ui/controls/progress/progress.theme.ts","../../src/modules/ui/controls/progress/progress.view.ts","../../src/modules/ui/controls/progress/utils/getProgressTimeTooltipPosition.ts","../../src/utils/video-data.ts","../../src/modules/ui/controls/progress/progress.ts","../../src/modules/ui/controls/play/play.view.ts","../../src/modules/ui/controls/play/play.theme.ts","../../src/modules/ui/controls/play/play.ts","../../src/modules/ui/controls/time/time.view.ts","../../src/modules/ui/controls/time/time.theme.ts","../../src/modules/ui/controls/time/time.ts","../../src/modules/ui/controls/volume/volume.theme.ts","../../src/modules/ui/controls/volume/volume.view.ts","../../src/modules/ui/controls/volume/volume.ts","../../src/modules/ui/controls/full-screen/full-screen.view.ts","../../src/modules/ui/controls/full-screen/full-screen.theme.ts","../../src/modules/ui/controls/full-screen/full-screen.ts","../../src/modules/ui/controls/logo/logo.view.ts","../../src/modules/ui/controls/logo/logo.ts","../../src/core/default-modules.ts","../../src/utils/environment-detection.ts","../../src/modules/playback-engine/adapters/native.ts","../../src/modules/playback-engine/adapters/default-set.ts","../../src/core/player-factory.ts","../../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export default class ExtendableError extends Error {\n  constructor(message: string) {\n    super(message);\n\n    Object.defineProperty(this, 'message', {\n      enumerable: false,\n      value: message,\n    });\n\n    Object.defineProperty(this, 'name', {\n      enumerable: false,\n      value: this.constructor.name,\n    });\n\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n","enum Lifetime {\n  Singelton = 'Singelton',\n  Transient = 'Transient',\n  Scoped = 'Scoped',\n}\n\nexport default Lifetime;\n","import ExtendableError from './ExtendableError';\n\nexport default class NotAFunctionError extends ExtendableError {\n  constructor(functionName: string, expectedType: string, givenType: string) {\n    super(\n      `The function ${functionName} expected a ${expectedType}, ${givenType} given.`,\n    );\n  }\n}\n","import { __assign } from 'tslib';\n\nimport NotAFunctionError from './errors/NotAFunctionError';\n\nimport Lifetime from './constants/Lifetime';\nimport { IOptions } from './types';\n\nimport { Container } from './createContainer';\n\nexport const PROPERTY_FOR_DEPENDENCIES = 'dependencies';\n\nexport const makeFluidInterface = (obj: IOptions) => {\n  const setLifetime = (value: Lifetime) => {\n    obj.lifetime = value;\n    return obj;\n  };\n\n  return {\n    setLifetime,\n    transient: () => setLifetime(Lifetime.Transient),\n    scoped: () => setLifetime(Lifetime.Scoped),\n    singleton: () => setLifetime(Lifetime.Singelton),\n  };\n};\n\nexport const asValue = (value: any): any => {\n  const resolve = () => value;\n\n  return {\n    resolve,\n    lifetime: Lifetime.Transient,\n  };\n};\n\nexport const asFunction: any = (fn: Function, options?: IOptions): any => {\n  if (typeof fn !== 'function') {\n    throw new NotAFunctionError('asFunction', 'function', typeof fn);\n  }\n\n  const defaults = {\n    lifetime: Lifetime.Transient,\n  };\n\n  options = __assign({}, defaults, options);\n\n  const resolve = generateResolve(fn);\n  const result = {\n    resolve,\n    lifetime: options.lifetime,\n  };\n  result.resolve = resolve.bind(result);\n  __assign(result, makeFluidInterface(result));\n\n  return result;\n};\n\nexport const asClass: any = (\n  Type: FunctionConstructor,\n  options?: IOptions,\n): any => {\n  if (typeof Type !== 'function') {\n    throw new NotAFunctionError('asClass', 'class', typeof Type);\n  }\n\n  const defaults = {\n    lifetime: Lifetime.Transient,\n  };\n\n  options = __assign({}, defaults, options);\n\n  // A function to handle object construction for us, as to make the generateResolve more reusable\n  const newClass = (...args: any[]) => new Type(...args);\n\n  const resolve = generateResolve(newClass, Type);\n  const result = {\n    resolve,\n    lifetime: options.lifetime,\n  };\n  result.resolve = resolve.bind(result);\n  __assign(result, makeFluidInterface(result));\n\n  return result;\n};\n\nfunction generateResolve(fn: Function, dependencyParseTarget?: any): any {\n  // If the function used for dependency parsing is falsy, use the supplied function\n  if (!dependencyParseTarget) {\n    dependencyParseTarget = fn;\n  }\n  // Try to resolve the dependencies\n  const dependencies = dependencyParseTarget[PROPERTY_FOR_DEPENDENCIES] || [];\n\n  // Use a regular function instead of an arrow function to facilitate binding to the registration.\n  return function resolve(container: Container) {\n    if (dependencies.length > 0) {\n      const wrapper: {} = dependencies.reduce(\n        (wrapper: any, dependency: string) => {\n          wrapper[dependency] = container.resolve(dependency);\n          return wrapper;\n        },\n        {},\n      );\n\n      return fn(wrapper, container);\n    }\n    return fn(container);\n  };\n}\n\nexport default {\n  asValue,\n  asFunction,\n  asClass,\n};\n","import ExtendableError from './ExtendableError';\n\nconst createErrorMessage = (\n  name: string,\n  resolutionStack: string[],\n  message?: string,\n) => {\n  resolutionStack = resolutionStack.slice();\n  resolutionStack.push(name);\n  const resolutionPathString = resolutionStack.join(' -> ');\n  let msg = `Could not resolve '${name}'.`;\n  if (message) {\n    msg += ` ${message} \\n\\n Resolution path: ${resolutionPathString}`;\n  }\n\n  return msg;\n};\n\nexport default class ResolutionError extends ExtendableError {\n  constructor(name: string, resolutionStack: string[], message?: string) {\n    super(createErrorMessage(name, resolutionStack, message));\n  }\n}\n","import { __assign } from 'tslib';\n\nexport default function(name: Object | string, value: any): Object {\n  if (typeof name !== 'object') {\n    return __assign({ [name]: value });\n  }\n\n  return name;\n}\n","import { __assign } from 'tslib';\n\nimport { asClass, asFunction, asValue } from './registrations';\nimport ResolutionError from './errors/ResolutionError';\nimport nameValueToObject from './utils/nameValueToObject';\nimport Lifetime from './constants/Lifetime';\nimport { IOptions } from './types';\n\nconst FAMILY_TREE = '__familyTree__';\n\nexport class Container {\n  private _registrations: any = {};\n  private _resolutionStack: string[] = [];\n  private _parentContainer: Container;\n\n  options: IOptions;\n  cache: any;\n  [FAMILY_TREE]: Array<Container>;\n\n  constructor(options?: IOptions, _parentContainer?: Container) {\n    this.options = __assign({}, options);\n    this._parentContainer = _parentContainer || null;\n    this[FAMILY_TREE] = this._parentContainer\n      ? [this].concat(this._parentContainer[FAMILY_TREE] as any)\n      : [this];\n    this.cache = {};\n  }\n\n  get registrations(): any {\n    return __assign(\n      {},\n      this._parentContainer && this._parentContainer.registrations,\n      this._registrations,\n    );\n  }\n\n  private _registerAs(\n    fn: Function,\n    verbatimValue: boolean,\n    name: Object | string,\n    value?: any,\n    options?: IOptions,\n  ) {\n    const registrations: any = nameValueToObject(name, value);\n\n    Object.keys(registrations).forEach(key => {\n      let valueToRegister = registrations[key];\n\n      // If we have options, copy them over.\n      options = __assign({}, options);\n\n      /* ignore coverage */\n      if (!verbatimValue && Array.isArray(valueToRegister)) {\n        // The ('name', [value, options]) style\n        options = __assign({}, options, valueToRegister[1]);\n        valueToRegister = valueToRegister[0];\n      }\n\n      this.register(key, fn(valueToRegister, options));\n    });\n\n    // Chaining\n    return this;\n  }\n\n  createScope() {\n    return new Container(this.options, this);\n  }\n\n  register(name: Object | string, registration?: any): Container {\n    const obj: any = nameValueToObject(name, registration);\n    Object.keys(obj).forEach(key => {\n      this._registrations[key] = obj[key];\n    });\n\n    return this;\n  }\n\n  registerClass(\n    name: Object | string,\n    value?: any,\n    options?: IOptions,\n  ): Container {\n    return this._registerAs(asClass, false, name, value, options);\n  }\n\n  registerFunction(\n    name: Object | string,\n    value?: any,\n    options?: IOptions,\n  ): Container {\n    return this._registerAs(asFunction, false, name, value, options);\n  }\n\n  registerValue(\n    name: Object | string,\n    value?: any,\n    options?: IOptions,\n  ): Container {\n    return this._registerAs(asValue, true, name, value, options);\n  }\n\n  resolve(name: string) {\n    // We need a reference to the root container,\n    // so we can retrieve and store singletons.\n    const root: Container = this[FAMILY_TREE][this[FAMILY_TREE].length - 1];\n\n    try {\n      // Grab the registration by name.\n      const registration = this.registrations[name];\n\n      if (this._resolutionStack.indexOf(name) > -1) {\n        throw new ResolutionError(\n          name,\n          this._resolutionStack,\n          'Cyclic dependencies detected.',\n        );\n      }\n\n      if (!registration) {\n        throw new ResolutionError(name, this._resolutionStack);\n      }\n\n      // Pushes the currently-resolving module name onto the stack\n      this._resolutionStack.push(name);\n\n      // Do the thing\n      let cached;\n      let resolved;\n\n      switch (registration.lifetime) {\n        case Lifetime.Transient:\n          // Transient lifetime means resolve every time.\n          resolved = registration.resolve(this);\n          break;\n        case Lifetime.Singelton:\n          // Singleton lifetime means cache at all times, regardless of scope.\n          cached = root.cache[name];\n          if (cached === undefined) {\n            resolved = registration.resolve(this);\n            root.cache[name] = resolved;\n          } else {\n            resolved = cached;\n          }\n          break;\n        case Lifetime.Scoped:\n          // Scoped lifetime means that the container\n          // that resolves the registration also caches it.\n          // When a registration is not found, we travel up\n          // the family tree until we find one that is cached.\n\n          // Note: The first element in the family tree is this container.\n          for (const _containerFromFamiltyTree of this[FAMILY_TREE]) {\n            cached = _containerFromFamiltyTree.cache[name];\n            if (cached !== undefined) {\n              // We found one!\n              resolved = cached;\n              break;\n            }\n          }\n\n          // If we still have not found one, we need to resolve and cache it.\n          if (cached === undefined) {\n            resolved = registration.resolve(this);\n            this.cache[name] = resolved;\n          }\n          break;\n        default:\n          throw new ResolutionError(\n            name,\n            this._resolutionStack,\n            `Unknown lifetime \"${registration.lifetime}\"`,\n          );\n      }\n      // Pop it from the stack again, ready for the next resolution\n      this._resolutionStack.pop();\n      return resolved;\n    } catch (err) {\n      // When we get an error we need to reset the stack.\n      this._resolutionStack = [];\n      throw err;\n    }\n  }\n}\n\nexport default function createContainer(\n  options?: IOptions,\n  __parentContainer?: Container,\n): Container {\n  return new Container(options, __parentContainer);\n}\n","import createContainer from './createContainer';\nimport Lifetime from './constants/Lifetime';\nimport registrations from './registrations';\n\nexport default {\n  createContainer,\n  Lifetime,\n  ...registrations,\n};\n","declare const window: {\n  navigator: any;\n  MSStream: any;\n};\n\nconst IPHONE_PATTERN = /iphone/i;\nconst IPOD_PATTERN = /ipod/i;\nconst IPAD_PATTERN = /ipad/i;\nconst ANDROID_PATTERN = /(android)/i;\nconst SAFARI_PATTERN = /^((?!chrome|android).)*safari/i;\nconst DESKTOP_SAFARI_PATTERN = /^((?!chrome|android|iphone|ipod|ipad).)*safari/i;\n\n// There is some iPhone/iPad/iPod in Windows Phone...\n// https://msdn.microsoft.com/en-us/library/hh869301(v=vs.85).aspx\nconst isIE = () => !!window.MSStream;\n\nconst getUserAgent = () => window.navigator && window.navigator.userAgent;\n\nconst isIPhone = () => !isIE() && IPHONE_PATTERN.test(getUserAgent());\n\nconst isIPod = () => !isIE() && IPOD_PATTERN.test(getUserAgent());\n\nconst isIPad = () => !isIE() && IPAD_PATTERN.test(getUserAgent());\n\nconst isIOS = () => isIPhone() || isIPod() || isIPad();\n\nconst isAndroid = () => ANDROID_PATTERN.test(getUserAgent());\n\nconst isDesktopSafari = () => DESKTOP_SAFARI_PATTERN.test(getUserAgent());\n\nconst isSafari = () => SAFARI_PATTERN.test(getUserAgent());\n\nexport {\n  isIPhone,\n  isIPod,\n  isIPad,\n  isIOS,\n  isAndroid,\n  isDesktopSafari,\n  isSafari,\n};\n","import { isIOS, isAndroid } from '../utils/device-detection';\n\nimport { ITitleConfig } from '../modules/ui/title/types';\nimport { IFullScreenConfig } from '../modules/full-screen-manager/types';\nimport { ILogoConfig } from '../modules/ui/controls/logo/types';\nimport { IOverlayConfig } from '../modules/ui/overlay/types';\nimport { ITextMapConfig } from '../modules/text-map/types';\nimport { IScreenConfig } from '../modules/ui/screen/types';\nimport { IMainUIBlockConfig } from '../modules/ui/main-ui-block/types';\nimport {\n  PreloadTypes,\n  MediaSource,\n  CrossOriginValue,\n} from '../modules/playback-engine/types';\nimport { IPlayerSize } from '../modules/root-container/types';\n\nexport interface IPlayerConfig {\n  src?: MediaSource;\n\n  size?: IPlayerSize;\n\n  videoElement?: HTMLVideoElement;\n\n  preload?: PreloadTypes;\n  autoPlay?: boolean;\n  loop?: boolean;\n  muted?: boolean;\n  volume?: number;\n  playInline?: boolean;\n  crossOrigin?: CrossOriginValue;\n\n  title?: boolean | ITitleConfig;\n  loader?: boolean;\n  screen?: IScreenConfig;\n  controls?: boolean | IMainUIBlockConfig;\n  overlay?: boolean | IOverlayConfig;\n  fullScreen?: boolean | IFullScreenConfig;\n  logo?: boolean | ILogoConfig;\n\n  texts?: ITextMapConfig;\n\n  showInteractionIndicator?: boolean;\n  fillAllSpace?: boolean;\n  disableControlWithKeyboard?: boolean;\n  [key: string]: any;\n}\n\nconst convertUIConfigForIOS = (params: IPlayerConfig): IPlayerConfig => ({\n  ...params,\n  showInteractionIndicator: false,\n  screen: {\n    ...params.screen,\n    disableClickProcessing: true,\n    nativeControls: true,\n  },\n  title: false,\n  loader: false,\n  controls: false,\n});\n\nconst convertUIConfigForAndroid = (params: IPlayerConfig): IPlayerConfig => ({\n  ...params,\n  screen: {\n    ...params.screen,\n    disableClickProcessing: true,\n  },\n});\n\nconst convertToDeviceRelatedConfig = (params: IPlayerConfig): IPlayerConfig => {\n  if (isIOS()) {\n    return convertUIConfigForIOS(params);\n  }\n\n  if (isAndroid()) {\n    return convertUIConfigForAndroid(params);\n  }\n\n  return params;\n};\n\nexport default convertToDeviceRelatedConfig;\n","export const PLAYER_API_PROPERTY = '___playerAPI';\n\nconst checkDescriptorsOnEquality = (\n  desc1: PropertyDescriptor,\n  desc2: PropertyDescriptor,\n) =>\n  desc1.value === desc2.value &&\n  desc1.get === desc2.get &&\n  desc1.set === desc2.set;\n\nconst playerAPI = (name?: string) => (\n  target: any,\n  property: string,\n  descriptor: PropertyDescriptor,\n) => {\n  const methodName = name || property;\n\n  if (!target[PLAYER_API_PROPERTY]) {\n    target[PLAYER_API_PROPERTY] = {};\n  }\n\n  if (target[PLAYER_API_PROPERTY][methodName]) {\n    if (\n      !checkDescriptorsOnEquality(\n        target[PLAYER_API_PROPERTY][methodName],\n        descriptor,\n      )\n    ) {\n      throw new Error(\n        `Method \"${methodName}\" for public API in ${\n          target.constructor.name\n        } is already defined`,\n      );\n    }\n  }\n\n  target[PLAYER_API_PROPERTY][methodName] = descriptor;\n};\n\nexport default playerAPI;\n","import { Container } from './dependency-container/createContainer';\nimport convertToDeviceRelatedConfig, { IPlayerConfig } from './config';\nimport { PLAYER_API_PROPERTY } from '../core/player-api-decorator';\nimport { IThemeConfig } from '../modules/ui/core/theme';\n\nexport default class Player {\n  //@ts-ignore\n  private _config: IPlayerConfig;\n  private _defaultModules: { [id: string]: any };\n  private _additionalModules: { [id: string]: any };\n  private _destroyed: boolean;\n\n  constructor(\n    params: IPlayerConfig,\n    scope: Container,\n    defaultModulesNames: string[] = [],\n    additionalModuleNames: string[] = [],\n    themeConfig?: IThemeConfig,\n  ) {\n    scope.registerValue({\n      config: convertToDeviceRelatedConfig(params),\n    });\n\n    scope.registerValue({\n      themeConfig,\n    });\n\n    this._config = scope.resolve('config');\n\n    this._resolveAdditionalModules(scope, additionalModuleNames);\n    this._resolveDefaultModules(scope, defaultModulesNames);\n  }\n\n  /*\n    Separation for default and additional modules is needed\n    for future implementation of public methods of resolved modules and\n    could be abolished in future\n  */\n\n  private _resolveDefaultModules(scope: Container, modulesNames: string[]) {\n    this._defaultModules = modulesNames.reduce(\n      (modules: { [id: string]: any }, moduleName: string) => {\n        if (this._additionalModules[moduleName]) {\n          return modules;\n        }\n\n        const resolvedModule = scope.resolve(moduleName);\n\n        this._addPlayerAPIFromModule(resolvedModule);\n\n        modules[moduleName] = resolvedModule;\n        return modules;\n      },\n      {},\n    );\n  }\n\n  private _resolveAdditionalModules(scope: Container, modulesNames: string[]) {\n    this._additionalModules = modulesNames.reduce(\n      (modules: { [id: string]: any }, moduleName: string) => {\n        const resolvedModule = scope.resolve(moduleName);\n\n        this._addPlayerAPIFromModule(resolvedModule);\n\n        modules[moduleName] = resolvedModule;\n        return modules;\n      },\n      {},\n    );\n  }\n\n  private _getWrappedCallToModuleFunction(module: any, fn: Function) {\n    return (...args: any[]) => {\n      if (this._destroyed) {\n        throw new Error('Player instance is destroyed');\n      }\n\n      return fn.apply(module, args);\n    };\n  }\n\n  private _getPlayerAPIMethodDescriptor(\n    module: any,\n    descriptor: PropertyDescriptor,\n  ) {\n    const playerMethodDescriptor: any = {\n      enumerable: true,\n      configurable: true,\n    };\n\n    const { get, set, value } = descriptor;\n\n    if (get) {\n      playerMethodDescriptor.get = this._getWrappedCallToModuleFunction(\n        module,\n        get,\n      );\n    }\n\n    if (set) {\n      playerMethodDescriptor.set = this._getWrappedCallToModuleFunction(\n        module,\n        set,\n      );\n    }\n\n    if (value) {\n      playerMethodDescriptor.value = this._getWrappedCallToModuleFunction(\n        module,\n        value,\n      );\n    }\n\n    return playerMethodDescriptor;\n  }\n\n  private _addPlayerAPIFromModule(module: any) {\n    if (module[PLAYER_API_PROPERTY]) {\n      Object.keys(module[PLAYER_API_PROPERTY]).forEach(apiKey => {\n        if ((this as any)[apiKey]) {\n          throw new Error(\n            `API method ${apiKey} is already defined in Player facade`,\n          );\n        }\n\n        Object.defineProperty(\n          this,\n          apiKey,\n          this._getPlayerAPIMethodDescriptor(\n            module,\n            module[PLAYER_API_PROPERTY][apiKey],\n          ),\n        );\n      });\n    }\n  }\n\n  private _clearPlayerAPIForModule(module: any) {\n    if (module[PLAYER_API_PROPERTY]) {\n      Object.keys(module[PLAYER_API_PROPERTY]).forEach(apiKey => {\n        delete (this as any)[apiKey];\n      });\n    }\n  }\n\n  destroy() {\n    Object.keys(this._defaultModules).forEach(moduleName => {\n      const module = this._defaultModules[moduleName];\n      this._clearPlayerAPIForModule(module);\n      module.destroy();\n    });\n\n    Object.keys(this._additionalModules).forEach(moduleName => {\n      const module = this._additionalModules[moduleName];\n      this._clearPlayerAPIForModule(module);\n      if (module.destroy) {\n        module.destroy();\n      }\n    });\n\n    this._defaultModules = null;\n    this._additionalModules = null;\n    this._config = null;\n\n    this._destroyed = true;\n  }\n}\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\n/* eslint-disable require-jsdoc, valid-jsdoc */\nvar MapShim = (function () {\n    if (typeof Map !== 'undefined') {\n        return Map;\n    }\n\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\n    function getIndex(arr, key) {\n        var result = -1;\n\n        arr.some(function (entry, index) {\n            if (entry[0] === key) {\n                result = index;\n\n                return true;\n            }\n\n            return false;\n        });\n\n        return result;\n    }\n\n    return (function () {\n        function anonymous() {\n            this.__entries__ = [];\n        }\n\n        var prototypeAccessors = { size: { configurable: true } };\n\n        /**\r\n         * @returns {boolean}\r\n         */\n        prototypeAccessors.size.get = function () {\n            return this.__entries__.length;\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\n        anonymous.prototype.get = function (key) {\n            var index = getIndex(this.__entries__, key);\n            var entry = this.__entries__[index];\n\n            return entry && entry[1];\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.set = function (key, value) {\n            var index = getIndex(this.__entries__, key);\n\n            if (~index) {\n                this.__entries__[index][1] = value;\n            } else {\n                this.__entries__.push([key, value]);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.delete = function (key) {\n            var entries = this.__entries__;\n            var index = getIndex(entries, key);\n\n            if (~index) {\n                entries.splice(index, 1);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.has = function (key) {\n            return !!~getIndex(this.__entries__, key);\n        };\n\n        /**\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.clear = function () {\n            this.__entries__.splice(0);\n        };\n\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.forEach = function (callback, ctx) {\n            var this$1 = this;\n            if ( ctx === void 0 ) ctx = null;\n\n            for (var i = 0, list = this$1.__entries__; i < list.length; i += 1) {\n                var entry = list[i];\n\n                callback.call(ctx, entry[1], entry[0]);\n            }\n        };\n\n        Object.defineProperties( anonymous.prototype, prototypeAccessors );\n\n        return anonymous;\n    }());\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\nvar global$1 = (function () {\n    if (typeof global !== 'undefined' && global.Math === Math) {\n        return global;\n    }\n\n    if (typeof self !== 'undefined' && self.Math === Math) {\n        return self;\n    }\n\n    if (typeof window !== 'undefined' && window.Math === Math) {\n        return window;\n    }\n\n    // eslint-disable-next-line no-new-func\n    return Function('return this')();\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\nvar requestAnimationFrame$1 = (function () {\n    if (typeof requestAnimationFrame === 'function') {\n        // It's required to use a bounded function because IE sometimes throws\n        // an \"Invalid calling object\" error if rAF is invoked without the global\n        // object on the left hand side.\n        return requestAnimationFrame.bind(global$1);\n    }\n\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\n})();\n\n// Defines minimum timeout before adding a trailing call.\nvar trailingTimeout = 2;\n\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\nvar throttle = function (callback, delay) {\n    var leadingCall = false,\n        trailingCall = false,\n        lastCallTime = 0;\n\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\n    function resolvePending() {\n        if (leadingCall) {\n            leadingCall = false;\n\n            callback();\n        }\n\n        if (trailingCall) {\n            proxy();\n        }\n    }\n\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\n    function timeoutCallback() {\n        requestAnimationFrame$1(resolvePending);\n    }\n\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\n    function proxy() {\n        var timeStamp = Date.now();\n\n        if (leadingCall) {\n            // Reject immediately following calls.\n            if (timeStamp - lastCallTime < trailingTimeout) {\n                return;\n            }\n\n            // Schedule new call to be in invoked when the pending one is resolved.\n            // This is important for \"transitions\" which never actually start\n            // immediately so there is a chance that we might miss one if change\n            // happens amids the pending invocation.\n            trailingCall = true;\n        } else {\n            leadingCall = true;\n            trailingCall = false;\n\n            setTimeout(timeoutCallback, delay);\n        }\n\n        lastCallTime = timeStamp;\n    }\n\n    return proxy;\n};\n\n// Minimum delay before invoking the update of observers.\nvar REFRESH_DELAY = 20;\n\n// A list of substrings of CSS properties used to find transition events that\n// might affect dimensions of observed elements.\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\n\n// Check if MutationObserver is available.\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\n\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\nvar ResizeObserverController = function() {\n    this.connected_ = false;\n    this.mutationEventsAdded_ = false;\n    this.mutationsObserver_ = null;\n    this.observers_ = [];\n\n    this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\n    this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\n};\n\n/**\r\n * Adds observer to observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be added.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Holds reference to the controller's instance.\r\n *\r\n * @private {ResizeObserverController}\r\n */\n\n\n/**\r\n * Keeps reference to the instance of MutationObserver.\r\n *\r\n * @private {MutationObserver}\r\n */\n\n/**\r\n * Indicates whether DOM listeners have been added.\r\n *\r\n * @private {boolean}\r\n */\nResizeObserverController.prototype.addObserver = function (observer) {\n    if (!~this.observers_.indexOf(observer)) {\n        this.observers_.push(observer);\n    }\n\n    // Add listeners if they haven't been added yet.\n    if (!this.connected_) {\n        this.connect_();\n    }\n};\n\n/**\r\n * Removes observer from observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.removeObserver = function (observer) {\n    var observers = this.observers_;\n    var index = observers.indexOf(observer);\n\n    // Remove observer if it's present in registry.\n    if (~index) {\n        observers.splice(index, 1);\n    }\n\n    // Remove listeners if controller has no connected observers.\n    if (!observers.length && this.connected_) {\n        this.disconnect_();\n    }\n};\n\n/**\r\n * Invokes the update of observers. It will continue running updates insofar\r\n * it detects changes.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.refresh = function () {\n    var changesDetected = this.updateObservers_();\n\n    // Continue running updates if changes have been detected as there might\n    // be future ones caused by CSS transitions.\n    if (changesDetected) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Updates every observer from observers list and notifies them of queued\r\n * entries.\r\n *\r\n * @private\r\n * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n *  dimensions of it's elements.\r\n */\nResizeObserverController.prototype.updateObservers_ = function () {\n    // Collect observers that have active observations.\n    var activeObservers = this.observers_.filter(function (observer) {\n        return observer.gatherActive(), observer.hasActive();\n    });\n\n    // Deliver notifications in a separate cycle in order to avoid any\n    // collisions between observers, e.g. when multiple instances of\n    // ResizeObserver are tracking the same element and the callback of one\n    // of them changes content dimensions of the observed target. Sometimes\n    // this may result in notifications being blocked for the rest of observers.\n    activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\n\n    return activeObservers.length > 0;\n};\n\n/**\r\n * Initializes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.connect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already added.\n    if (!isBrowser || this.connected_) {\n        return;\n    }\n\n    // Subscription to the \"Transitionend\" event is used as a workaround for\n    // delayed transitions. This way it's possible to capture at least the\n    // final state of an element.\n    document.addEventListener('transitionend', this.onTransitionEnd_);\n\n    window.addEventListener('resize', this.refresh);\n\n    if (mutationObserverSupported) {\n        this.mutationsObserver_ = new MutationObserver(this.refresh);\n\n        this.mutationsObserver_.observe(document, {\n            attributes: true,\n            childList: true,\n            characterData: true,\n            subtree: true\n        });\n    } else {\n        document.addEventListener('DOMSubtreeModified', this.refresh);\n\n        this.mutationEventsAdded_ = true;\n    }\n\n    this.connected_ = true;\n};\n\n/**\r\n * Removes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.disconnect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already removed.\n    if (!isBrowser || !this.connected_) {\n        return;\n    }\n\n    document.removeEventListener('transitionend', this.onTransitionEnd_);\n    window.removeEventListener('resize', this.refresh);\n\n    if (this.mutationsObserver_) {\n        this.mutationsObserver_.disconnect();\n    }\n\n    if (this.mutationEventsAdded_) {\n        document.removeEventListener('DOMSubtreeModified', this.refresh);\n    }\n\n    this.mutationsObserver_ = null;\n    this.mutationEventsAdded_ = false;\n    this.connected_ = false;\n};\n\n/**\r\n * \"Transitionend\" event handler.\r\n *\r\n * @private\r\n * @param {TransitionEvent} event\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.onTransitionEnd_ = function (ref) {\n        var propertyName = ref.propertyName; if ( propertyName === void 0 ) propertyName = '';\n\n    // Detect whether transition may affect dimensions of an element.\n    var isReflowProperty = transitionKeys.some(function (key) {\n        return !!~propertyName.indexOf(key);\n    });\n\n    if (isReflowProperty) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Returns instance of the ResizeObserverController.\r\n *\r\n * @returns {ResizeObserverController}\r\n */\nResizeObserverController.getInstance = function () {\n    if (!this.instance_) {\n        this.instance_ = new ResizeObserverController();\n    }\n\n    return this.instance_;\n};\n\nResizeObserverController.instance_ = null;\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\nvar defineConfigurable = (function (target, props) {\n    for (var i = 0, list = Object.keys(props); i < list.length; i += 1) {\n        var key = list[i];\n\n        Object.defineProperty(target, key, {\n            value: props[key],\n            enumerable: false,\n            writable: false,\n            configurable: true\n        });\n    }\n\n    return target;\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\nvar getWindowOf = (function (target) {\n    // Assume that the element is an instance of Node, which means that it\n    // has the \"ownerDocument\" property from which we can retrieve a\n    // corresponding global object.\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\n\n    // Return the local global object if it's not possible extract one from\n    // provided element.\n    return ownerGlobal || global$1;\n});\n\n// Placeholder of an empty content rectangle.\nvar emptyRect = createRectInit(0, 0, 0, 0);\n\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\nfunction toFloat(value) {\n    return parseFloat(value) || 0;\n}\n\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\nfunction getBordersSize(styles) {\n    var positions = [], len = arguments.length - 1;\n    while ( len-- > 0 ) positions[ len ] = arguments[ len + 1 ];\n\n    return positions.reduce(function (size, position) {\n        var value = styles['border-' + position + '-width'];\n\n        return size + toFloat(value);\n    }, 0);\n}\n\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\nfunction getPaddings(styles) {\n    var positions = ['top', 'right', 'bottom', 'left'];\n    var paddings = {};\n\n    for (var i = 0, list = positions; i < list.length; i += 1) {\n        var position = list[i];\n\n        var value = styles['padding-' + position];\n\n        paddings[position] = toFloat(value);\n    }\n\n    return paddings;\n}\n\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getSVGContentRect(target) {\n    var bbox = target.getBBox();\n\n    return createRectInit(0, 0, bbox.width, bbox.height);\n}\n\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\nfunction getHTMLElementContentRect(target) {\n    // Client width & height properties can't be\n    // used exclusively as they provide rounded values.\n    var clientWidth = target.clientWidth;\n    var clientHeight = target.clientHeight;\n\n    // By this condition we can catch all non-replaced inline, hidden and\n    // detached elements. Though elements with width & height properties less\n    // than 0.5 will be discarded as well.\n    //\n    // Without it we would need to implement separate methods for each of\n    // those cases and it's not possible to perform a precise and performance\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\n    // gives wrong results for elements with width & height less than 0.5.\n    if (!clientWidth && !clientHeight) {\n        return emptyRect;\n    }\n\n    var styles = getWindowOf(target).getComputedStyle(target);\n    var paddings = getPaddings(styles);\n    var horizPad = paddings.left + paddings.right;\n    var vertPad = paddings.top + paddings.bottom;\n\n    // Computed styles of width & height are being used because they are the\n    // only dimensions available to JS that contain non-rounded values. It could\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\n    var width = toFloat(styles.width),\n        height = toFloat(styles.height);\n\n    // Width & height include paddings and borders when the 'border-box' box\n    // model is applied (except for IE).\n    if (styles.boxSizing === 'border-box') {\n        // Following conditions are required to handle Internet Explorer which\n        // doesn't include paddings and borders to computed CSS dimensions.\n        //\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\n        // properties then it's either IE, and thus we don't need to subtract\n        // anything, or an element merely doesn't have paddings/borders styles.\n        if (Math.round(width + horizPad) !== clientWidth) {\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\n        }\n\n        if (Math.round(height + vertPad) !== clientHeight) {\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\n        }\n    }\n\n    // Following steps can't be applied to the document's root element as its\n    // client[Width/Height] properties represent viewport area of the window.\n    // Besides, it's as well not necessary as the <html> itself neither has\n    // rendered scroll bars nor it can be clipped.\n    if (!isDocumentElement(target)) {\n        // In some browsers (only in Firefox, actually) CSS width & height\n        // include scroll bars size which can be removed at this step as scroll\n        // bars are the only difference between rounded dimensions + paddings\n        // and \"client\" properties, though that is not always true in Chrome.\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\n\n        // Chrome has a rather weird rounding of \"client\" properties.\n        // E.g. for an element with content width of 314.2px it sometimes gives\n        // the client width of 315px and for the width of 314.7px it may give\n        // 314px. And it doesn't happen all the time. So just ignore this delta\n        // as a non-relevant.\n        if (Math.abs(vertScrollbar) !== 1) {\n            width -= vertScrollbar;\n        }\n\n        if (Math.abs(horizScrollbar) !== 1) {\n            height -= horizScrollbar;\n        }\n    }\n\n    return createRectInit(paddings.left, paddings.top, width, height);\n}\n\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nvar isSVGGraphicsElement = (function () {\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\n    // interface.\n    if (typeof SVGGraphicsElement !== 'undefined') {\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\n    }\n\n    // If it's so, then check that element is at least an instance of the\n    // SVGElement and that it has the \"getBBox\" method.\n    // eslint-disable-next-line no-extra-parens\n    return function (target) { return target instanceof getWindowOf(target).SVGElement && typeof target.getBBox === 'function'; };\n})();\n\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nfunction isDocumentElement(target) {\n    return target === getWindowOf(target).document.documentElement;\n}\n\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getContentRect(target) {\n    if (!isBrowser) {\n        return emptyRect;\n    }\n\n    if (isSVGGraphicsElement(target)) {\n        return getSVGContentRect(target);\n    }\n\n    return getHTMLElementContentRect(target);\n}\n\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\nfunction createReadOnlyRect(ref) {\n    var x = ref.x;\n    var y = ref.y;\n    var width = ref.width;\n    var height = ref.height;\n\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\n    var rect = Object.create(Constr.prototype);\n\n    // Rectangle's properties are not writable and non-enumerable.\n    defineConfigurable(rect, {\n        x: x, y: y, width: width, height: height,\n        top: y,\n        right: x + width,\n        bottom: height + y,\n        left: x\n    });\n\n    return rect;\n}\n\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\nfunction createRectInit(x, y, width, height) {\n    return { x: x, y: y, width: width, height: height };\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\nvar ResizeObservation = function(target) {\n    this.broadcastWidth = 0;\n    this.broadcastHeight = 0;\n    this.contentRect_ = createRectInit(0, 0, 0, 0);\n\n    this.target = target;\n};\n\n/**\r\n * Updates content rectangle and tells whether it's width or height properties\r\n * have changed since the last broadcast.\r\n *\r\n * @returns {boolean}\r\n */\n\n\n/**\r\n * Reference to the last observed content rectangle.\r\n *\r\n * @private {DOMRectInit}\r\n */\n\n\n/**\r\n * Broadcasted width of content rectangle.\r\n *\r\n * @type {number}\r\n */\nResizeObservation.prototype.isActive = function () {\n    var rect = getContentRect(this.target);\n\n    this.contentRect_ = rect;\n\n    return rect.width !== this.broadcastWidth || rect.height !== this.broadcastHeight;\n};\n\n/**\r\n * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n * from the corresponding properties of the last observed content rectangle.\r\n *\r\n * @returns {DOMRectInit} Last observed content rectangle.\r\n */\nResizeObservation.prototype.broadcastRect = function () {\n    var rect = this.contentRect_;\n\n    this.broadcastWidth = rect.width;\n    this.broadcastHeight = rect.height;\n\n    return rect;\n};\n\nvar ResizeObserverEntry = function(target, rectInit) {\n    var contentRect = createReadOnlyRect(rectInit);\n\n    // According to the specification following properties are not writable\n    // and are also not enumerable in the native implementation.\n    //\n    // Property accessors are not being used as they'd require to define a\n    // private WeakMap storage which may cause memory leaks in browsers that\n    // don't support this type of collections.\n    defineConfigurable(this, { target: target, contentRect: contentRect });\n};\n\nvar ResizeObserverSPI = function(callback, controller, callbackCtx) {\n    this.activeObservations_ = [];\n    this.observations_ = new MapShim();\n\n    if (typeof callback !== 'function') {\n        throw new TypeError('The callback provided as parameter 1 is not a function.');\n    }\n\n    this.callback_ = callback;\n    this.controller_ = controller;\n    this.callbackCtx_ = callbackCtx;\n};\n\n/**\r\n * Starts observing provided element.\r\n *\r\n * @param {Element} target - Element to be observed.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Registry of the ResizeObservation instances.\r\n *\r\n * @private {Map<Element, ResizeObservation>}\r\n */\n\n\n/**\r\n * Public ResizeObserver instance which will be passed to the callback\r\n * function and used as a value of it's \"this\" binding.\r\n *\r\n * @private {ResizeObserver}\r\n */\n\n/**\r\n * Collection of resize observations that have detected changes in dimensions\r\n * of elements.\r\n *\r\n * @private {Array<ResizeObservation>}\r\n */\nResizeObserverSPI.prototype.observe = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is already being observed.\n    if (observations.has(target)) {\n        return;\n    }\n\n    observations.set(target, new ResizeObservation(target));\n\n    this.controller_.addObserver(this);\n\n    // Force the update of observations.\n    this.controller_.refresh();\n};\n\n/**\r\n * Stops observing provided element.\r\n *\r\n * @param {Element} target - Element to stop observing.\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.unobserve = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is not being observed.\n    if (!observations.has(target)) {\n        return;\n    }\n\n    observations.delete(target);\n\n    if (!observations.size) {\n        this.controller_.removeObserver(this);\n    }\n};\n\n/**\r\n * Stops observing all elements.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.disconnect = function () {\n    this.clearActive();\n    this.observations_.clear();\n    this.controller_.removeObserver(this);\n};\n\n/**\r\n * Collects observation instances the associated element of which has changed\r\n * it's content rectangle.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.gatherActive = function () {\n        var this$1 = this;\n\n    this.clearActive();\n\n    this.observations_.forEach(function (observation) {\n        if (observation.isActive()) {\n            this$1.activeObservations_.push(observation);\n        }\n    });\n};\n\n/**\r\n * Invokes initial callback function with a list of ResizeObserverEntry\r\n * instances collected from active resize observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.broadcastActive = function () {\n    // Do nothing if observer doesn't have active observations.\n    if (!this.hasActive()) {\n        return;\n    }\n\n    var ctx = this.callbackCtx_;\n\n    // Create ResizeObserverEntry instance for every active observation.\n    var entries = this.activeObservations_.map(function (observation) {\n        return new ResizeObserverEntry(observation.target, observation.broadcastRect());\n    });\n\n    this.callback_.call(ctx, entries, ctx);\n    this.clearActive();\n};\n\n/**\r\n * Clears the collection of active observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.clearActive = function () {\n    this.activeObservations_.splice(0);\n};\n\n/**\r\n * Tells whether observer has active observations.\r\n *\r\n * @returns {boolean}\r\n */\nResizeObserverSPI.prototype.hasActive = function () {\n    return this.activeObservations_.length > 0;\n};\n\n// Registry of internal observers. If WeakMap is not available use current shim\n// for the Map collection as it has all required methods and because WeakMap\n// can't be fully polyfilled anyway.\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\n\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\nvar ResizeObserver = function(callback) {\n    if (!(this instanceof ResizeObserver)) {\n        throw new TypeError('Cannot call a class as a function.');\n    }\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    var controller = ResizeObserverController.getInstance();\n    var observer = new ResizeObserverSPI(callback, controller, this);\n\n    observers.set(this, observer);\n};\n\n// Expose public methods of ResizeObserver.\n['observe', 'unobserve', 'disconnect'].forEach(function (method) {\n    ResizeObserver.prototype[method] = function () {\n        return (ref = observers.get(this))[method].apply(ref, arguments);\n        var ref;\n    };\n});\n\nvar index = (function () {\n    // Export existing implementation if available.\n    if (typeof global$1.ResizeObserver !== 'undefined') {\n        return global$1.ResizeObserver;\n    }\n\n    return ResizeObserver;\n})();\n\nexport default index;\n","// Code from ally.js\n\n/*\n  Observe keyboard-, pointer-, mouse- and touch-events so that a query for\n  the current interaction type can be made at any time. For pointer interaction\n  this observer is limited to pointer button down/up - move is not observed!\n\n  USAGE:\n    var listener = engage();\n    listener.get() === {pointer: Boolean, key: Boolean}\n*/\n\n// counters to track primary input\nlet _activePointers = 0;\nlet _activeKeys = 0;\n\nconst pointerStartEvents = [\n  'touchstart',\n  'pointerdown',\n  'MSPointerDown',\n  'mousedown',\n];\nconst pointerEndEvents = [\n  'touchend',\n  'touchcancel',\n  'pointerup',\n  'MSPointerUp',\n  'pointercancel',\n  'MSPointerCancel',\n  'mouseup',\n];\n\nfunction handleWindowBlurEvent() {\n  // reset internal counters when window loses focus\n  _activePointers = 0;\n  _activeKeys = 0;\n}\n\nfunction handlePointerStartEvent(event: PointerEvent) {\n  if (event.isPrimary === false) {\n    // ignore non-primary pointer events\n    // https://w3c.github.io/pointerevents/#widl-PointerEvent-isPrimary\n    return;\n  }\n\n  // mousedown without following mouseup\n  // (likely not possible in Chrome)\n  _activePointers += 1;\n}\n\nfunction handlePointerEndEvent(event: any) {\n  if (event.isPrimary === false) {\n    // ignore non-primary pointer events\n    // https://w3c.github.io/pointerevents/#widl-PointerEvent-isPrimary\n    return;\n  } else if (event.touches) {\n    _activePointers = event.touches.length;\n    return;\n  }\n\n  // delay reset to when the current handlers are executed\n  (window.setImmediate || window.setTimeout)(() => {\n    // mouseup without prior mousedown\n    // (drag something out of the window)\n    _activePointers = Math.max(_activePointers - 1, 0);\n  });\n}\n\nfunction handleKeyStartEvent(event: KeyboardEvent) {\n  // ignore modifier keys\n  switch (event.keyCode || event.which) {\n    case 16: // space\n    case 17: // control\n    case 18: // alt\n    case 91: // command left\n    case 93: // command right\n      return;\n    default:\n      break;\n  }\n\n  // keydown without a following keyup\n  // (may happen on CMD+TAB)\n  _activeKeys += 1;\n}\n\nfunction handleKeyEndEvent(event: KeyboardEvent) {\n  // ignore modifier keys\n  switch (event.keyCode || event.which) {\n    case 16: // space\n    case 17: // control\n    case 18: // alt\n    case 91: // command left\n    case 93: // command right\n      return;\n    default:\n      break;\n  }\n\n  // delay reset to when the current handlers are executed\n  (window.setImmediate || window.setTimeout)(() => {\n    // keyup without prior keydown\n    // (may happen on CMD+R)\n    _activeKeys = Math.max(_activeKeys - 1, 0);\n  });\n}\n\nfunction getInteractionType() {\n  return {\n    pointer: Boolean(_activePointers),\n    key: Boolean(_activeKeys),\n  };\n}\n\nfunction disengage() {\n  _activePointers = _activeKeys = 0;\n  window.removeEventListener('blur', handleWindowBlurEvent, false);\n  document.documentElement.removeEventListener(\n    'keydown',\n    handleKeyStartEvent,\n    true,\n  );\n  document.documentElement.removeEventListener(\n    'keyup',\n    handleKeyEndEvent,\n    true,\n  );\n  pointerStartEvents.forEach(event => {\n    document.documentElement.removeEventListener(\n      event,\n      handlePointerStartEvent,\n      true,\n    );\n  });\n  pointerEndEvents.forEach(event => {\n    document.documentElement.removeEventListener(\n      event,\n      handlePointerEndEvent,\n      true,\n    );\n  });\n}\n\nfunction engage() {\n  // window blur must be in bubble phase so it won't capture regular blurs\n  window.addEventListener('blur', handleWindowBlurEvent, false);\n  // handlers to identify the method of focus change\n  document.documentElement.addEventListener(\n    'keydown',\n    handleKeyStartEvent,\n    true,\n  );\n  document.documentElement.addEventListener('keyup', handleKeyEndEvent, true);\n  pointerStartEvents.forEach(event => {\n    document.documentElement.addEventListener(\n      event,\n      handlePointerStartEvent,\n      true,\n    );\n  });\n  pointerEndEvents.forEach(event => {\n    document.documentElement.addEventListener(\n      event,\n      handlePointerEndEvent,\n      true,\n    );\n  });\n\n  return {\n    get: getInteractionType,\n  };\n}\n\nexport default { engage, disengage };\n","// Code from ally.js\n/*\n  add data-focus-source attribute to html element containing \"key\", \"pointer\" or \"script\"\n  depending on the input method used to change focus.\n\n  USAGE:\n    style/focus-source()\n\n    body :focus {\n      outline: 1px solid grey;\n    }\n\n    html[data-focus-source=\"key\"] body :focus {\n      outline: 5px solid red;\n    }\n\n    html[data-focus-source=\"key\"] body :focus {\n      outline: 1px solid blue;\n    }\n\n  NOTE: I don't have a GamePad to test, if you do and you want to\n  implement an observer for https://w3c.github.io/gamepad/ - send a PR!\n\n  Alternate implementation: https://github.com/alice/modality\n*/\n\nimport engageInteractionTypeObserver from './interaction-type';\n\n// preferring focusin/out because they are synchronous in IE10+11\nconst supportsFocusIn =\n  typeof document !== 'undefined' && 'onfocusin' in document;\nconst focusEventName = supportsFocusIn ? 'focusin' : 'focus';\nconst blurEventName = supportsFocusIn ? 'focusout' : 'blur';\n\n// interface to read interaction-type-listener state\nlet interactionTypeHandler: any;\n// keep track of last focus source\nlet current: any = null;\n// overwrite focus source for use with the every upcoming focus event\nlet lock: any = null;\n// keep track of ever having used a particular input method to change focus\nconst used: any = {\n  pointer: false,\n  key: false,\n  script: false,\n  initial: false,\n};\n\nfunction handleFocusEvent(event: any) {\n  let source = '';\n  if (event.type === focusEventName) {\n    const interactionType = interactionTypeHandler.get();\n    source =\n      lock ||\n      (interactionType.pointer && 'pointer') ||\n      (interactionType.key && 'key') ||\n      'script';\n  } else if (event.type === 'initial') {\n    source = 'initial';\n  }\n\n  document.documentElement.setAttribute('data-focus-source', source);\n\n  if (event.type !== blurEventName) {\n    used[source] = true;\n    current = source;\n  }\n}\n\nfunction getCurrentFocusSource() {\n  return current;\n}\n\nfunction getUsedFocusSource(source: any) {\n  return used[source];\n}\n\nfunction lockFocusSource(source: any) {\n  lock = source;\n}\n\nfunction unlockFocusSource() {\n  lock = false;\n}\n\nfunction disengage() {\n  // clear dom state\n  handleFocusEvent({ type: blurEventName });\n  current = lock = null;\n  Object.keys(used).forEach(function(key) {\n    used[key] = false;\n  });\n  // kill interaction type identification listener\n  engageInteractionTypeObserver.disengage();\n  document.documentElement.removeEventListener(\n    focusEventName,\n    handleFocusEvent,\n    true,\n  );\n  document.documentElement.removeEventListener(\n    blurEventName,\n    handleFocusEvent,\n    true,\n  );\n  document.documentElement.removeAttribute('data-focus-source');\n}\n\nfunction engage() {\n  document.documentElement.addEventListener(\n    focusEventName,\n    handleFocusEvent,\n    true,\n  );\n  document.documentElement.addEventListener(\n    blurEventName,\n    handleFocusEvent,\n    true,\n  );\n  // enable the interaction type identification observer\n  interactionTypeHandler = engageInteractionTypeObserver.engage();\n  // set up initial dom state\n  handleFocusEvent({ type: 'initial' });\n\n  return {\n    used: getUsedFocusSource,\n    current: getCurrentFocusSource,\n    lock: lockFocusSource,\n    unlock: unlockFocusSource,\n  };\n}\n\nexport default { engage, disengage };\n","enum MediaStreamTypes {\n  MP4 = 'MP4',\n  WEBM = 'WEBM',\n  HLS = 'HLS',\n  DASH = 'DASH',\n  OGG = 'OGG',\n  MOV = 'MOV',\n  MKV = 'MKV',\n}\n\nenum MediaStreamDeliveryPriority {\n  NATIVE_PROGRESSIVE,\n  ADAPTIVE_VIA_MSE,\n  NATIVE_ADAPTIVE,\n  FORCED,\n}\n\nexport { MediaStreamTypes, MediaStreamDeliveryPriority };\n","const UI_EVENTS = {\n  PLAY_TRIGGERED: 'ui-events/play-triggered',\n  PLAY_OVERLAY_TRIGGERED: 'ui-events/play-overlay-triggered',\n  PAUSE_TRIGGERED: 'ui-events/pause-triggered',\n  PROGRESS_CHANGE_TRIGGERED: 'ui-events/progress-change-triggered',\n  VOLUME_CHANGE_TRIGGERED: 'ui-events/volume-change-triggered',\n  MUTE_STATUS_TRIGGERED: 'ui-events/mute-status-triggered',\n  FULLSCREEN_STATUS_CHANGED: 'ui-events/fullscreen-status-changed',\n\n  // TODO: follow ENTITY_EVENT_TRIGGERED or ENTITY_EVENT format\n  MOUSE_ENTER_ON_PLAYER_TRIGGERED: 'ui-events/mouse-enter-on-player-triggered',\n  MOUSE_MOVE_ON_PLAYER_TRIGGERED: 'ui-events/mouse-move-on-player-triggered',\n  MOUSE_LEAVE_ON_PLAYER_TRIGGERED: 'ui-events/mouse-leave-on-player-triggered',\n  CONTROL_BLOCK_HIDE_TRIGGERED: 'ui-events/control-block-hide-triggered',\n  CONTROL_BLOCK_SHOW_TRIGGERED: 'ui-events/control-block-show-triggered',\n  PROGRESS_MANIPULATION_STARTED: 'ui-events/progress-manipulation-started',\n  PROGRESS_MANIPULATION_ENDED: 'ui-events/progress-manipulation-ended',\n  KEYBOARD_KEYDOWN_INTERCEPTED: 'ui-events/keyboard-keydown-intercepted',\n  LOADER_SHOW_TRIGGERED: 'ui-events/loader-show-triggered',\n  LOADER_HIDE_TRIGGERED: 'ui-events/loader-hide-triggered',\n  LOADING_COVER_SHOW_TRIGGERED: 'ui-events/loading-cover-show-triggered',\n  LOADING_COVER_HIDE_TRIGGERED: 'ui-events/loading-cover-hide-triggered',\n  TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/toggle-playback-with-keyboard-triggered',\n  GO_BACKWARD_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/go-backward-with-keyboard-triggered',\n  GO_FORWARD_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/go-forward-with-keyboard-triggered',\n  INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/increase-volume-with-keyboard-triggered',\n  DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/decrease-volume-with-keyboard-triggered',\n  MUTE_SOUND_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/mute-sound-with-keyboard-triggered',\n  UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/unmute-sound-with-keyboard-triggered',\n  HIDE_INTERACTION_INDICATOR_TRIGGERED:\n    'ui-events/hide-interaction-indicator-triggered',\n  // TODO: get rid of WIDTH/HEIGHT change events in favour of RESIZE\n  PLAYER_WIDTH_CHANGE_TRIGGERED: 'ui-events/player-width-change-triggered',\n  PLAYER_HEIGHT_CHANGE_TRIGGERED: 'ui-events/player-height-change-triggered',\n\n  PLAY_WITH_SCREEN_CLICK_TRIGGERED:\n    'ui-events/play-with-screen-click-triggered',\n  PAUSE_WITH_SCREEN_CLICK_TRIGGERED:\n    'ui-events/pause-with-screen-click-triggered',\n\n  // TODO: review CONTROL_DRAG_START vs CONTROL_DRAG_START_TRIGGERED format\n  CONTROL_DRAG_START: 'ui-events/control-drag-start',\n  CONTROL_DRAG_END: 'ui-events/control-drag-end',\n  MAIN_BLOCK_HIDE_TRIGGERED: 'ui-events/main-block-hide-triggered',\n  MAIN_BLOCK_SHOW_TRIGGERED: 'ui-events/main-block-show-triggered',\n  PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED:\n    'ui-events/progress-sync-button-mouse-enter-triggered',\n  PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED:\n    'ui-events/progress-sync-button-mouse-leave-triggered',\n  RESIZE: 'ui-events/resize',\n};\n\nexport default UI_EVENTS;\n","enum EngineState {\n  SRC_SET = 'engine-state/src-set',\n  LOAD_STARTED = 'engine-state/load-started',\n  METADATA_LOADED = 'engine-state/metadata-loaded',\n  READY_TO_PLAY = 'engine-state/ready-to-play',\n  SEEK_IN_PROGRESS = 'engine-state/seek-in-progress',\n  PLAY_REQUESTED = 'engine-state/play-requested',\n  WAITING = 'engine-state/waiting',\n  PLAYING = 'engine-state/playing',\n  PAUSED = 'engine-state/paused',\n  ENDED = 'engine-state/ended',\n}\n\nexport default EngineState;\n","const VIDEO_EVENTS = {\n  ERROR: 'video-events/error',\n  STATE_CHANGED: 'video-events/state-changed',\n  LIVE_STATE_CHANGED: 'video-events/live-state-changed',\n  DYNAMIC_CONTENT_ENDED: 'video-events/dynamic-content-ended',\n  CHUNK_LOADED: 'video-events/chunk-loaded',\n  CURRENT_TIME_UPDATED: 'video-events/current-time-updated',\n  DURATION_UPDATED: 'video-events/duration-updated',\n  VOLUME_STATUS_CHANGED: 'video-events/volume-status-changed',\n  VOLUME_CHANGED: 'video-events/volume-changed',\n  MUTE_CHANGED: 'video-events/mute-changed',\n  SEEK_IN_PROGRESS: 'video-events/seek-in-progress',\n  UPLOAD_STALLED: 'video-events/upload-stalled',\n  UPLOAD_SUSPEND: 'video-events/upload-suspend',\n  PLAY_REQUEST_TRIGGERED: 'video-events/play-request-triggered',\n  PLAY_ABORTED: 'video-events/play-aborted',\n  RESET: 'video-events/reset-playback',\n};\n\nexport default VIDEO_EVENTS;\n","const Errors = {\n  SRC_PARSE: 'error-src-parse',\n  MANIFEST_LOAD: 'error-manifest-load',\n  MANIFEST_PARSE: 'error-manifest-parse',\n  MANIFEST_INCOMPATIBLE: 'error-manifest-incompatible',\n  LEVEL_LOAD: 'error-level-load',\n  CONTENT_LOAD: 'error-content-load',\n  CONTENT_PARSE: 'error-content-parse',\n  MEDIA: 'error-media',\n  UNKNOWN: 'error-unknown',\n};\n\nexport default Errors;\n","export default {\n  LOGO_LABEL: 'logo-label',\n  LOGO_TOOLTIP: 'logo-tooltip',\n  LIVE_INDICATOR_TEXT: 'live-indicator-text',\n  LIVE_SYNC_LABEL: 'live-sync-button-label',\n  LIVE_SYNC_TOOLTIP: 'live-sync-button-tooltip',\n  ENTER_FULL_SCREEN_LABEL: 'enter-full-screen-label',\n  ENTER_FULL_SCREEN_TOOLTIP: 'enter-full-screen-tooltip',\n  EXIT_FULL_SCREEN_LABEL: 'exit-full-screen-label',\n  EXIT_FULL_SCREEN_TOOLTIP: 'exit-full-screen-tooltip',\n  PLAY_CONTROL_LABEL: 'play-control-label',\n  PAUSE_CONTROL_LABEL: 'pause-control-label',\n  PROGRESS_CONTROL_LABEL: 'progress-control-label',\n  PROGRESS_CONTROL_VALUE: 'progress-control-value',\n  UNMUTE_CONTROL_LABEL: 'unmute-control-label',\n  UNMUTE_CONTROL_TOOLTIP: 'unmute-control-label',\n  MUTE_CONTROL_LABEL: 'mute-control-label',\n  MUTE_CONTROL_TOOLTIP: 'mute-control-tooltip',\n  VOLUME_CONTROL_LABEL: 'volume-control-label',\n  VOLUME_CONTROL_VALUE: 'volume-control-value',\n};\n","enum LiveState {\n  NONE = 'live-state/none',\n  INITIAL = 'live-state/initial',\n  NOT_SYNC = 'live-state/not-sync',\n  SYNC = 'live-state/sync',\n  ENDED = 'live-state/ended',\n}\n\nexport default LiveState;\n","function htmlToElement(html: string) {\n  const div: HTMLDivElement = document.createElement('div');\n  div.innerHTML = html.trim();\n  return div.firstChild as HTMLElement;\n}\n\nexport default htmlToElement;\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import extendStyles from './extendStyles';\nimport { IThemeService, ICSSRules } from './theme';\nimport { IStyles, IStylable } from './types';\n\nclass Stylable<TStyles = IStyles> implements IStylable<TStyles> {\n  private static _moduleTheme: ICSSRules;\n  private static _styles: IStyles = {};\n\n  private _themeStyles: IStyles = {};\n\n  constructor(theme?: IThemeService) {\n    const moduleTheme = (<typeof Stylable>this.constructor)._moduleTheme;\n    if (theme && moduleTheme) {\n      theme.registerModuleTheme(this, moduleTheme);\n      this._themeStyles = theme.get(this);\n    }\n  }\n\n  static setTheme(theme: ICSSRules) {\n    this._moduleTheme = theme;\n  }\n\n  static extendStyleNames(styles: IStyles) {\n    this._styles = extendStyles(this._styles, styles);\n  }\n\n  static resetStyles() {\n    this._styles = {};\n  }\n\n  get themeStyles(): IStyles {\n    return this._themeStyles;\n  }\n\n  get styleNames(): TStyles {\n    // NOTE: TS does not work with instance static fields + generic type\n    return (this.constructor as any)._styles || {};\n  }\n}\n\nexport default Stylable;\n","//@ts-ignore\nimport classnames from 'classnames';\nimport { IStyles } from './types';\n\nfunction extendStyles(sourceStyles: IStyles, partialStyles: IStyles) {\n  const styles = {\n    ...sourceStyles,\n  };\n\n  Object.keys(partialStyles).forEach(styleName => {\n    styles[styleName] = styles[styleName]\n      ? classnames(styles[styleName], partialStyles[styleName])\n      : partialStyles[styleName];\n  });\n\n  return styles;\n}\n\nexport default extendStyles;\n","import Stylable from './stylable';\nimport { IView, IStyles } from './types';\n\nclass View<TStyles = IStyles> extends Stylable<TStyles>\n  implements IView<TStyles> {}\n\nexport default View;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import htmlToElement from '../ui/core/htmlToElement';\n\nimport { containerTemplate } from './templates';\n\nimport View from '../ui/core/view';\nimport { IView } from '../ui/core/types';\n\nimport {\n  IRootContainerViewStyles,\n  IRootContainerViewConfig,\n  IRootContainerViewCallbacks,\n} from './types';\n\nimport styles from './root-container.scss';\n\nclass RootContainerView extends View<IRootContainerViewStyles>\n  implements IView<IRootContainerViewStyles> {\n  private _$node: HTMLElement;\n  private _callbacks: IRootContainerViewCallbacks;\n\n  constructor(config: IRootContainerViewConfig) {\n    super();\n    const { width, height, fillAllSpace, callbacks } = config;\n    this._callbacks = callbacks;\n    this._$node = htmlToElement(containerTemplate({ styles: this.styleNames }));\n\n    this.setFillAllSpaceFlag(fillAllSpace);\n\n    this.setWidth(width);\n    this.setHeight(height);\n\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('mouseenter', this._callbacks.onMouseEnter);\n    this._$node.addEventListener('mousemove', this._callbacks.onMouseMove);\n    this._$node.addEventListener('mouseleave', this._callbacks.onMouseLeave);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('mouseenter', this._callbacks.onMouseEnter);\n    this._$node.removeEventListener('mousemove', this._callbacks.onMouseMove);\n    this._$node.removeEventListener('mouseleave', this._callbacks.onMouseLeave);\n  }\n\n  setWidth(width: number) {\n    if (!width) {\n      return;\n    }\n\n    this._$node.style.width = `${width}px`;\n  }\n\n  setHeight(height: number) {\n    if (!height) {\n      return;\n    }\n\n    this._$node.style.height = `${height}px`;\n  }\n\n  getWidth(): number {\n    return this._$node.offsetWidth;\n  }\n\n  getHeight(): number {\n    return this._$node.offsetHeight;\n  }\n\n  show() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  appendComponentNode(node: HTMLElement) {\n    this._$node.appendChild(node);\n  }\n\n  getNode(): HTMLElement {\n    return this._$node;\n  }\n\n  setFullScreenStatus(isFullScreen: boolean) {\n    if (isFullScreen) {\n      this._$node.setAttribute('data-in-full-screen', 'true');\n      this._$node.classList.add(this.styleNames.fullScreen);\n    } else {\n      this._$node.setAttribute('data-in-full-screen', 'false');\n      this._$node.classList.remove(this.styleNames.fullScreen);\n    }\n  }\n\n  setFillAllSpaceFlag(isFillAllSpace = false) {\n    if (isFillAllSpace) {\n      this._$node.classList.add(this.styleNames.fillAllSpace);\n    } else {\n      this._$node.classList.remove(this.styleNames.fillAllSpace);\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nRootContainerView.extendStyleNames(styles);\n\nexport default RootContainerView;\n","function reduce(\n  arrayLike: { length: number },\n  callback: Function,\n  initialValue: any,\n) {\n  return Array.prototype.reduce.call(arrayLike, callback, initialValue);\n}\n\nfunction forEachMatch(string: string, pattern: RegExp, callback: Function) {\n  let match = pattern.exec(string);\n\n  while (match !== null) {\n    callback(match);\n    match = pattern.exec(string);\n  }\n}\n\nexport { reduce, forEachMatch };\n","const ALIASES = [\n  'matches',\n  'webkitMatchesSelector',\n  'mozMatchesSelector',\n  'msMatchesSelector',\n];\n\nlet matchesSelectorFn: Function;\n\nif (typeof HTMLElement !== 'undefined') {\n  for (let i = 0; i < ALIASES.length; i++) {\n    matchesSelectorFn = (Element as any).prototype[ALIASES[i]] as Function;\n\n    if (matchesSelectorFn) {\n      break;\n    }\n  }\n}\n\nconst isElementMatchesSelector = matchesSelectorFn\n  ? (element: HTMLElement, selector: string) =>\n      matchesSelectorFn.call(element, selector)\n  : (element: HTMLElement, selector: string) =>\n      Array.prototype.indexOf.call(\n        document.querySelectorAll(selector),\n        element,\n      ) !== -1;\n\nexport default isElementMatchesSelector;\n","import { forEachMatch, reduce } from './utils';\nimport isElementMatchesSelector from '../isElementMatchesSelector';\n\n// NOTE: \"inspired\" by https://github.com/marcj/css-element-queries/blob/1.0.2/src/ElementQueries.js#L340-L393\n\nconst CSS_SELECTOR_PATTERN = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:[a-z-]+-)?(?:min|max)-width[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/gim;\nconst QUERY_ATTR_PATTERN = /\\[[\\s\\t]*?(?:([a-z-]+)-)?(min|max)-width[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/gim;\n\nfunction getQueriesFromCssSelector(cssSelector: string) {\n  const results: any[] = [];\n\n  if (\n    cssSelector.indexOf('min-width') === -1 &&\n    cssSelector.indexOf('max-width') === -1\n  ) {\n    return [];\n  }\n\n  cssSelector = cssSelector.replace(/'/g, '\"');\n\n  forEachMatch(cssSelector, CSS_SELECTOR_PATTERN, (match: RegExpMatchArray) => {\n    const [selectorPart1, attribute, selectorPart2] = match.slice(1);\n    const selector = selectorPart1 + selectorPart2;\n\n    forEachMatch(attribute, QUERY_ATTR_PATTERN, (match: RegExpMatchArray) => {\n      const [prefix = '', mode, width] = match.slice(1);\n\n      results.push({\n        selector,\n        prefix,\n        mode,\n        width: parseInt(width, 10),\n      });\n    });\n  });\n\n  return results;\n}\n\nfunction getQueriesFromRules(rules: CSSRuleList) {\n  return reduce(\n    rules,\n    (results: any[], rule: any) => {\n      // https://developer.mozilla.org/en-US/docs/Web/API/CSSRule\n      // CSSRule.STYLE_RULE\n      if (rule.type === 1) {\n        const selector = rule.selectorText || rule.cssText;\n\n        return results.concat(getQueriesFromCssSelector(selector));\n      }\n\n      // NOTE: add other `CSSRule` types if required.\n      // Example - https://github.com/marcj/css-element-queries/blob/1.0.2/src/ElementQueries.js#L384-L390\n\n      return results;\n    },\n    [],\n  );\n}\n\nfunction getQueries() {\n  return reduce(\n    document.styleSheets,\n    (results: any[], styleSheet: CSSStyleSheet) => {\n      // NOTE: browser may not able to read rules for cross-domain stylesheets\n      try {\n        const rules = styleSheet.cssRules || styleSheet.rules;\n\n        if (rules) {\n          return results.concat(getQueriesFromRules(rules));\n        }\n\n        if (styleSheet.cssText) {\n          return results.concat(getQueriesFromCssSelector(styleSheet.cssText));\n        }\n      } catch (e) {}\n\n      return results;\n    },\n    [],\n  );\n}\n\nfunction getQueriesForElement(element: HTMLElement, prefix = '') {\n  const matchedSelectors = new Map();\n  const queries: any[] = [];\n\n  getQueries().forEach((query: any) => {\n    if (!matchedSelectors.has(query.selector)) {\n      matchedSelectors.set(\n        query.selector,\n        isElementMatchesSelector(element, query.selector),\n      );\n    }\n\n    if (!matchedSelectors.get(query.selector)) {\n      return;\n    }\n\n    if (\n      query.prefix === prefix &&\n      !queries.some(\n        _query => _query.mode === query.mode && _query.width === query.width,\n      )\n    ) {\n      queries.push({\n        mode: query.mode,\n        width: query.width,\n      });\n    }\n  });\n\n  return queries.sort((a, b) => a.width - b.width);\n}\n\nexport default getQueriesForElement;\n","import getQueriesForElement from './getQueriesForElement';\n\nconst DEFAULT_QUERY_PREFIX = 'data';\n\nclass ElementQueries {\n  private _element: Element;\n  private _queryPrefix: string;\n  private _queries: { mode: string; width: number }[];\n\n  constructor(element: HTMLElement, { prefix = DEFAULT_QUERY_PREFIX } = {}) {\n    this._element = element;\n    this._queryPrefix = prefix;\n    this._queries = getQueriesForElement(element, prefix);\n  }\n\n  private _getQueryAttributeValue(mode: string, elementWidth: number) {\n    return this._queries\n      .filter(\n        query =>\n          query.mode === mode &&\n          ((mode === 'max' && query.width >= elementWidth) ||\n            (mode === 'min' && query.width <= elementWidth)),\n      )\n      .map(query => `${query.width}px`)\n      .join(' ');\n  }\n\n  private _setQueryAttribute(mode: string, elementWidth: number) {\n    const attributeName = this._queryPrefix\n      ? `${this._queryPrefix}-${mode}-width`\n      : `${mode}-width`;\n    const attributeValue = this._getQueryAttributeValue(mode, elementWidth);\n\n    if (attributeValue) {\n      this._element.setAttribute(attributeName, attributeValue);\n    } else {\n      this._element.removeAttribute(attributeName);\n    }\n  }\n\n  setWidth(width: number) {\n    this._setQueryAttribute('min', width);\n    this._setQueryAttribute('max', width);\n  }\n\n  destroy() {\n    this._element = null;\n  }\n}\n\nexport default ElementQueries;\n","import ResizeObserver from 'resize-observer-polyfill';\n\nimport focusSource from './utils/focus-source';\nimport focusWithin from './utils/focus-within';\n\nimport playerAPI from '../../core/player-api-decorator';\n\nimport { UI_EVENTS } from '../../constants';\n\nimport View from './root-container.view';\nimport ElementQueries from '../ui/core/element-queries';\n\nimport { IEventEmitter } from '../event-emitter/types';\nimport { IRootContainer } from './types';\nimport { IPlayerConfig } from '../../core/config';\n\nconst DEFAULT_CONFIG = {\n  fillAllSpace: false,\n};\n\nclass RootContainer implements IRootContainer {\n  static moduleName = 'rootContainer';\n  static dependencies = ['eventEmitter', 'config'];\n\n  private _eventEmitter: IEventEmitter;\n\n  private _elementQueries: ElementQueries;\n  private _resizeObserver: ResizeObserver;\n  private _disengageFocusWithin: Function;\n  private _disengageFocusSource: Function;\n\n  private _unbindEvents: Function;\n\n  // TODO: check if props should be `private`\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    config,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this.isHidden = false;\n\n    this._bindCallbacks();\n    this._initUI(config);\n\n    this._bindEvents();\n  }\n\n  /**\n   * Getter for DOM node with player UI element\n   * (use it only for debug, if you need attach player to your document use `attachToElement` method)\n   */\n  @playerAPI()\n  get node(): HTMLElement {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._onResized = this._onResized.bind(this);\n    this._broadcastMouseEnter = this._broadcastMouseEnter.bind(this);\n    this._broadcastMouseMove = this._broadcastMouseMove.bind(this);\n    this._broadcastMouseLeave = this._broadcastMouseLeave.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [\n          UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n          this.view.setFullScreenStatus,\n          this.view,\n        ],\n      ],\n      this,\n    );\n  }\n\n  private _initUI(config: IPlayerConfig) {\n    const sizeConfig = {\n      ...config.size,\n    };\n    this.view = new View({\n      callbacks: {\n        onMouseEnter: this._broadcastMouseEnter,\n        onMouseLeave: this._broadcastMouseLeave,\n        onMouseMove: this._broadcastMouseMove,\n      },\n      width: sizeConfig.width || null,\n      height: sizeConfig.height || null,\n      fillAllSpace: config.fillAllSpace || DEFAULT_CONFIG.fillAllSpace,\n    });\n\n    this._elementQueries = new ElementQueries(this.node, {\n      prefix: '',\n    });\n  }\n\n  appendComponentNode(node: HTMLElement) {\n    this.view.appendComponentNode(node);\n  }\n\n  private _broadcastMouseEnter() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_ENTER_ON_PLAYER_TRIGGERED);\n  }\n\n  private _broadcastMouseMove() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED);\n  }\n\n  private _broadcastMouseLeave() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED);\n  }\n\n  private _enableFocusInterceptors() {\n    if (!this._disengageFocusWithin) {\n      this._disengageFocusWithin = focusWithin();\n    }\n\n    if (!this._disengageFocusSource) {\n      focusSource.engage();\n      this._disengageFocusSource = focusSource.disengage;\n    }\n  }\n\n  private _disableFocusInterceptors() {\n    if (this._disengageFocusSource) {\n      this._disengageFocusSource();\n      this._disengageFocusSource = null;\n    }\n\n    if (this._disengageFocusWithin) {\n      this._disengageFocusWithin();\n      this._disengageFocusWithin = null;\n    }\n  }\n\n  private _onResized() {\n    const width = this.view.getWidth();\n    const height = this.view.getHeight();\n\n    this._elementQueries.setWidth(width);\n\n    this._eventEmitter.emit(UI_EVENTS.RESIZE, { width, height });\n  }\n\n  /**\n   * Method for attaching player node to your container\n   * It's important to call this methods after `DOMContentLoaded` event!\n   *\n   * @example\n   * document.addEventListener('DOMContentLoaded', function() {\n   *   const config = { src: 'http://my-url/video.mp4' }\n   *   const player = Playable.create(config);\n   *\n   *   player.attachToElement(document.getElementById('content'));\n   * });\n   */\n  @playerAPI()\n  attachToElement(element: Element) {\n    this._enableFocusInterceptors();\n\n    element.appendChild(this.node);\n\n    if (!this._resizeObserver) {\n      // NOTE: required for valid work of player \"media queries\"\n      this._resizeObserver = new ResizeObserver(this._onResized);\n\n      this._resizeObserver.observe(this.node);\n    }\n  }\n\n  /**\n   * Method for setting width of player\n   * @param width - Desired width of player in pixels\n   * @example\n   * player.setWidth(400);\n   */\n  @playerAPI()\n  setWidth(width: number) {\n    this.view.setWidth(width);\n    this._eventEmitter.emit(UI_EVENTS.PLAYER_WIDTH_CHANGE_TRIGGERED, width);\n  }\n\n  /**\n   * Return current width of player in pixels\n   * @example\n   * player.getWidth(); // 400\n   */\n  @playerAPI()\n  getWidth(): number {\n    return this.view.getWidth();\n  }\n\n  /**\n   * Method for setting width of player\n   * @param height - Desired height of player in pixels\n   * @example\n   * player.setHeight(225);\n   */\n  @playerAPI()\n  setHeight(height: number) {\n    this.view.setHeight(height);\n    this._eventEmitter.emit(UI_EVENTS.PLAYER_HEIGHT_CHANGE_TRIGGERED, height);\n  }\n\n  /**\n   * Return current height of player in pixels\n   * @example\n   * player.getHeight(); // 225\n   */\n  @playerAPI()\n  getHeight(): number {\n    return this.view.getHeight();\n  }\n\n  /**\n   * Method for allowing player fill all available space\n   * @param flag - `true` for allowing\n   * @example\n   * player.setFillAllSpace(true);\n   */\n  @playerAPI()\n  setFillAllSpace(flag: boolean) {\n    this.view.setFillAllSpaceFlag(flag);\n  }\n\n  /**\n   * Hide whole ui\n   * @example\n   * player.hide();\n   */\n  @playerAPI()\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  /**\n   * Show whole ui\n   * @example\n   * player.show();\n   */\n  @playerAPI()\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._disableFocusInterceptors();\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this.node);\n      this._resizeObserver = null;\n    }\n\n    this._elementQueries.destroy();\n    this._elementQueries = null;\n\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n  }\n}\n\nexport default RootContainer;\n","// inspired by https://gist.github.com/aFarkas/a7e0d85450f323d5e164\nconst focusWithin = () => {\n  const slice = [].slice;\n  const removeClass = (elem: any) => {\n    elem.classList.remove('focus-within');\n  };\n  const update = (() => {\n    let running: boolean;\n    let last: Element;\n    const action = () => {\n      let element: any = document.activeElement;\n\n      running = false;\n      if (last !== element) {\n        last = element;\n        slice\n          .call(document.getElementsByClassName('focus-within'))\n          .forEach(removeClass);\n        while (element && element.classList) {\n          element.classList.add('focus-within');\n          element = element.parentNode;\n        }\n      }\n    };\n\n    return () => {\n      if (!running) {\n        requestAnimationFrame(action);\n        running = true;\n      }\n    };\n  })();\n\n  document.addEventListener('focus', update, true);\n  document.addEventListener('blur', update, true);\n  update();\n\n  return () => {\n    document.removeEventListener('focus', update, true);\n    document.removeEventListener('blur', update, true);\n  };\n};\n\nexport default focusWithin;\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { EventEmitter, ListenerFn } from 'eventemitter3';\n\nimport playerAPI from '../../core/player-api-decorator';\n\nimport { IEventEmitter, IEventMap } from './types';\n\nexport default class EventEmitterModule extends EventEmitter\n  implements IEventEmitter {\n  static moduleName = 'eventEmitter';\n  /**\n   * Method for adding listeners of events inside player.\n   * You can check all events inside `Playable.UI_EVENTS` and `Playable.VIDEO_EVENTS`\n   *\n   * @param event - The Event name, such as `Playable.UI_EVENTS.PLAY_TRIGGERED`\n   * @param fn - A function callback to execute when the event is triggered.\n   * @param context - Value to use as `this` (i.e the reference Object) when executing callback.\n   *\n   * @example\n   * const Playable = require('playable');\n   * const player = Playable.create();\n   *\n   * player.on(Playable.UI_EVENTS.PLAY_TRIGGERED, () => {\n   *   // Will be executed after you will click on play button\n   * });\n   *\n   * // To supply a context value for `this` when the callback is invoked,\n   * // pass the optional context argument\n   * player.on(Playable.VIDEO_EVENTS.UPLOAD_STALLED, this.handleStalledUpload, this);\n   */\n  @playerAPI()\n  on(event: string, fn: ListenerFn, context?: any) {\n    return super.on(event, fn, context);\n  }\n\n  /**\n   * Method for removing listeners of events inside player.\n   *\n   * @param event - The Event name, such as `Playable.UI_EVENTS.PLAY_TRIGGERED`\n   * @param fn - Only remove the listeners that match this function.\n   * @param context - Only remove the listeners that have this context.\n   * @param once - Only remove one-time listeners.\n   *\n   * @example\n   * const Playable = require('playable');\n   * const player = Playable.create();\n   *\n   * const callback = function() {\n   *   // Code to handle some kind of event\n   * };\n   *\n   * // ... Now callback will be called when some one will pause the video ...\n   * player.on(Playable.UI_EVENTS.PAUSE_TRIGGERED, callback);\n   *\n   * // ... callback will no longer be called.\n   * player.off(Playable.UI_EVENTS.PAUSE_TRIGGERED, callback);\n   *\n   * // ... remove all handlers for event UI_EVENTS.PAUSE_TRIGGERED.\n   * player.off(Playable.UI_EVENTS.PAUSE_TRIGGERED);\n   */\n  @playerAPI()\n  off(event: string, fn?: ListenerFn, context?: any, once?: boolean) {\n    return super.off(event, fn, context, once);\n  }\n\n  /**\n   * Method for binding array of listeners with events inside player.\n   *\n   * @example\n   *\n   * this._unbindEvents = this._eventEmitter.bindEvents([\n   *     [VIDEO_EVENTS.STATE_CHANGED, this._processStateChange],\n   *     [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processLiveStateChange],\n   *     [VIDEO_EVENTS.CHUNK_LOADED, this._updateBufferIndicator],\n   *     [VIDEO_EVENTS.DURATION_UPDATED, this._updateAllIndicators],\n   *   ],\n   *   this,\n   * );\n   *\n   * //...\n   *\n   * this._unbindEvents()\n   *\n   * @param eventsMap\n   * @param defaultFnContext\n   * @returns unbindEvents\n   */\n  bindEvents(eventsMap: IEventMap[], defaultFnContext?: Object): Function {\n    const events: Function[] = [];\n\n    eventsMap.forEach(([eventName, fn, fnContext = defaultFnContext]) => {\n      this.on(eventName, fn, fnContext);\n      events.push(() => {\n        this.off(eventName, fn, fnContext);\n      });\n    });\n\n    return function unbindEvents() {\n      events.forEach(unbindEvent => {\n        unbindEvent();\n      });\n    };\n  }\n\n  destroy() {\n    this.removeAllListeners();\n  }\n}\n","import { IEventEmitter } from '../event-emitter/types';\n\nimport { isSafari } from '../../utils/device-detection';\n\nimport { VIDEO_EVENTS, EngineState } from '../../constants';\n\nexport const NATIVE_VIDEO_EVENTS_TO_STATE = [\n  'loadstart',\n  'loadedmetadata',\n  'canplay',\n  'play',\n  'playing',\n  'pause',\n  'ended',\n  'waiting',\n  'seeking',\n  'seeked',\n];\n\nexport default class StateEngine {\n  private _eventEmitter: IEventEmitter;\n  private _video: HTMLVideoElement;\n  private _currentState: EngineState;\n  private _statesTimestamps: { [state: string]: number };\n  private _initialTimeStamp: number;\n  private _isMetadataLoaded: boolean;\n\n  constructor(eventEmitter: IEventEmitter, video: HTMLVideoElement) {\n    this._eventEmitter = eventEmitter;\n    this._video = video;\n\n    this._currentState = null;\n\n    this._isMetadataLoaded = false;\n    this._statesTimestamps = {};\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  private _bindCallbacks() {\n    this._processEventFromVideo = this._processEventFromVideo.bind(this);\n  }\n\n  private _bindEvents() {\n    NATIVE_VIDEO_EVENTS_TO_STATE.forEach(event =>\n      this._video.addEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  private _unbindEvents() {\n    NATIVE_VIDEO_EVENTS_TO_STATE.forEach(event =>\n      this._video.removeEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  clearTimestamps() {\n    this._statesTimestamps = {};\n  }\n\n  private _setInitialTimeStamp() {\n    this._initialTimeStamp = Date.now();\n  }\n\n  private _setStateTimestamp(state: EngineState) {\n    if (!this._statesTimestamps[state]) {\n      this._statesTimestamps[state] = Date.now() - this._initialTimeStamp;\n      this._setInitialTimeStamp();\n    }\n  }\n\n  get stateTimestamps() {\n    return this._statesTimestamps;\n  }\n\n  private _processEventFromVideo(event: any = {}) {\n    const videoEl = this._video;\n\n    switch (event.type) {\n      case 'loadstart': {\n        this._setInitialTimeStamp();\n        this.setState(EngineState.LOAD_STARTED);\n        break;\n      }\n      case 'loadedmetadata': {\n        this._setStateTimestamp(EngineState.METADATA_LOADED);\n        this.setState(EngineState.METADATA_LOADED);\n        this._isMetadataLoaded = true;\n        break;\n      }\n      case 'canplay': {\n        this._setStateTimestamp(EngineState.READY_TO_PLAY);\n        this.setState(EngineState.READY_TO_PLAY);\n        break;\n      }\n      case 'play': {\n        this.setState(EngineState.PLAY_REQUESTED);\n        break;\n      }\n      case 'playing': {\n        // Safari triggers event 'playing' even when play request aborted by browser. So we need to check if video is actualy playing\n        if (isSafari()) {\n          if (!videoEl.paused) {\n            this.setState(EngineState.PLAYING);\n          }\n        } else {\n          this.setState(EngineState.PLAYING);\n        }\n        break;\n      }\n      case 'waiting': {\n        this.setState(EngineState.WAITING);\n        break;\n      }\n      case 'pause': {\n        // Safari triggers event 'pause' even when playing was aborted buy autoplay policies, emit pause event even if there wasn't any real playback\n        if (isSafari()) {\n          if (videoEl.played.length) {\n            this.setState(EngineState.PAUSED);\n          }\n        } else {\n          this.setState(EngineState.PAUSED);\n        }\n        break;\n      }\n      case 'ended': {\n        this.setState(EngineState.ENDED);\n        break;\n      }\n      case 'seeking': {\n        this.setState(EngineState.SEEK_IN_PROGRESS);\n        break;\n      }\n      case 'seeked': {\n        this.setState(\n          videoEl.paused ? EngineState.PAUSED : EngineState.PLAYING,\n        );\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  setState(state: EngineState) {\n    if (state === this._currentState) {\n      return;\n    }\n\n    //This case is happens only with dash.js sometimes when manifest got some problems\n    if (this._currentState === EngineState.METADATA_LOADED) {\n      if (\n        state === EngineState.SEEK_IN_PROGRESS ||\n        state === EngineState.PAUSED\n      ) {\n        return;\n      }\n    }\n\n    this._eventEmitter.emit(VIDEO_EVENTS.STATE_CHANGED, {\n      prevState: this._currentState,\n      nextState: state,\n    });\n    this._eventEmitter.emit(state);\n    this._currentState = state;\n  }\n\n  get isMetadataLoaded() {\n    return this._isMetadataLoaded;\n  }\n\n  get state() {\n    return this._currentState;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._eventEmitter = null;\n    this._video = null;\n  }\n}\n","import { IEventEmitter } from '../event-emitter/types';\n\nimport { VIDEO_EVENTS } from '../../constants';\n\nexport const NATIVE_VIDEO_TO_BROADCAST = [\n  'progress',\n  'error',\n  'stalled',\n  'suspend',\n  'durationchange',\n  'timeupdate',\n  'volumechange',\n  'seeking',\n];\n\nexport default class NativeEventsBroadcaster {\n  private _eventEmitter: IEventEmitter;\n  private _video: HTMLVideoElement;\n  private _currentVolume: number;\n  private _currentMute: boolean;\n\n  constructor(eventEmitter: IEventEmitter, video: HTMLVideoElement) {\n    this._eventEmitter = eventEmitter;\n    this._video = video;\n\n    this._currentMute = this._video.muted;\n    this._currentVolume = this._video.volume;\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  private _bindCallbacks() {\n    this._processEventFromVideo = this._processEventFromVideo.bind(this);\n  }\n\n  private _bindEvents() {\n    NATIVE_VIDEO_TO_BROADCAST.forEach(event =>\n      this._video.addEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  private _unbindEvents() {\n    NATIVE_VIDEO_TO_BROADCAST.forEach(event =>\n      this._video.removeEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  private _processEventFromVideo(event: any = {}) {\n    const videoEl = this._video;\n\n    switch (event.type) {\n      case 'progress': {\n        this._eventEmitter.emit(VIDEO_EVENTS.CHUNK_LOADED);\n        break;\n      }\n      case 'stalled': {\n        this._eventEmitter.emit(VIDEO_EVENTS.UPLOAD_STALLED);\n        break;\n      }\n      case 'suspend': {\n        this._eventEmitter.emit(VIDEO_EVENTS.UPLOAD_SUSPEND);\n        break;\n      }\n      case 'seeking': {\n        this._eventEmitter.emit(\n          VIDEO_EVENTS.SEEK_IN_PROGRESS,\n          videoEl.currentTime,\n        );\n        break;\n      }\n      case 'durationchange': {\n        this._eventEmitter.emit(\n          VIDEO_EVENTS.DURATION_UPDATED,\n          videoEl.duration,\n        );\n        break;\n      }\n      case 'timeupdate': {\n        this._eventEmitter.emit(\n          VIDEO_EVENTS.CURRENT_TIME_UPDATED,\n          videoEl.currentTime,\n        );\n        break;\n      }\n      case 'volumechange': {\n        if (this._currentVolume !== videoEl.volume) {\n          this._currentVolume = videoEl.volume * 100;\n          this._eventEmitter.emit(\n            VIDEO_EVENTS.VOLUME_CHANGED,\n            this._currentVolume,\n          );\n        }\n\n        if (this._currentMute !== videoEl.muted) {\n          this._currentMute = videoEl.muted;\n          this._eventEmitter.emit(VIDEO_EVENTS.MUTE_CHANGED, this._currentMute);\n        }\n\n        this._eventEmitter.emit(VIDEO_EVENTS.VOLUME_STATUS_CHANGED, {\n          volume: videoEl.volume,\n          muted: videoEl.muted,\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._video = null;\n    this._eventEmitter = null;\n  }\n}\n","import { IPlaybackAdapter } from '../adapters/types';\nimport { MediaStreamTypes } from '../../../constants';\nimport { IMediaSource } from '../types';\n\nexport function resolveAdapters(\n  mediaStreams: IMediaSource[],\n  availableAdapters: IPlaybackAdapter[],\n): IPlaybackAdapter[] {\n  const playableAdapters: IPlaybackAdapter[] = [];\n\n  const groupedStreams = groupStreamsByMediaType(mediaStreams);\n  const groupedStreamKeys = Object.keys(groupedStreams) as MediaStreamTypes[];\n\n  availableAdapters.forEach(adapter => {\n    for (let i = 0; i < groupedStreamKeys.length; i += 1) {\n      const mediaType = groupedStreamKeys[i];\n      const mediaStreams = groupedStreams[mediaType];\n\n      if (adapter.canPlay(mediaType)) {\n        adapter.setMediaStreams(mediaStreams);\n        playableAdapters.push(adapter);\n        break;\n      }\n    }\n  });\n\n  playableAdapters.sort(\n    (firstAdapter, secondAdapter) =>\n      secondAdapter.mediaStreamDeliveryPriority -\n      firstAdapter.mediaStreamDeliveryPriority,\n  );\n\n  return playableAdapters;\n}\n\nfunction groupStreamsByMediaType(mediaStreams: IMediaSource[]) {\n  const typeMap: { [type: string]: IMediaSource[] } = {};\n  mediaStreams.forEach((mediaStream: IMediaSource) => {\n    if (!mediaStream.type) {\n      return;\n    }\n\n    if (!Array.isArray(typeMap[mediaStream.type])) {\n      typeMap[mediaStream.type] = [];\n    }\n    typeMap[mediaStream.type].push(mediaStream);\n  });\n\n  return typeMap;\n}\n","import { MediaStreamTypes } from '../../../constants';\n\nconst extensionsMap = Object.create(null);\nextensionsMap.mp4 = MediaStreamTypes.MP4;\nextensionsMap.webm = MediaStreamTypes.WEBM;\nextensionsMap.m3u8 = MediaStreamTypes.HLS;\nextensionsMap.mpd = MediaStreamTypes.DASH;\nextensionsMap.ogg = MediaStreamTypes.OGG;\nextensionsMap.mkv = MediaStreamTypes.MKV;\nextensionsMap.mov = MediaStreamTypes.MOV;\n\nexport function getStreamType(url: string) {\n  const anchorElement = document.createElement('a');\n  anchorElement.href = url;\n  const streamType = extensionsMap[getExtFromPath(anchorElement.pathname)];\n\n  return streamType || false;\n}\n\nexport function getExtFromPath(path: string) {\n  return path\n    .split('.')\n    .pop()\n    .toLowerCase();\n}\n","import { IEventEmitter } from '../event-emitter/types';\n\nimport { VIDEO_EVENTS, ERRORS } from '../../constants';\n\nimport { resolveAdapters } from './utils/adapters-resolver';\nimport { getStreamType } from './utils/detect-stream-type';\n\nimport { IPlaybackAdapter } from './adapters/types';\nimport { MediaSource, IMediaSource } from './types';\n\nexport default class AdaptersStrategy {\n  private _video: HTMLVideoElement;\n  private _eventEmitter: IEventEmitter;\n  private _playableAdapters: IPlaybackAdapter[];\n  private _availableAdapters: IPlaybackAdapter[];\n  private _attachedAdapter: IPlaybackAdapter;\n\n  constructor(\n    eventEmitter: IEventEmitter,\n    video: HTMLVideoElement,\n    playbackAdapters: any[] = [],\n  ) {\n    this._video = video;\n    this._eventEmitter = eventEmitter;\n    this._playableAdapters = [];\n    this._availableAdapters = [];\n    this._attachedAdapter = null;\n\n    playbackAdapters.forEach(\n      adapter =>\n        adapter.isSupported() &&\n        this._availableAdapters.push(new adapter(eventEmitter)),\n    );\n  }\n\n  private _autoDetectSourceTypes(\n    mediaSources: Array<IMediaSource | string>,\n  ): IMediaSource[] {\n    return mediaSources.map((mediaSource: IMediaSource | string) => {\n      if (typeof mediaSource === 'string') {\n        const type = getStreamType(mediaSource);\n        if (!type) {\n          this._eventEmitter.emit(VIDEO_EVENTS.ERROR, {\n            errorType: ERRORS.SRC_PARSE,\n            streamSrc: mediaSource,\n          });\n        }\n        return { url: mediaSource, type };\n      }\n\n      return mediaSource;\n    });\n  }\n\n  private _resolvePlayableAdapters(src: MediaSource) {\n    if (!src) {\n      this._playableAdapters = [];\n      return;\n    }\n\n    const mediaSources = [].concat(src);\n    const mediaStreams = this._autoDetectSourceTypes(mediaSources);\n    this._playableAdapters = resolveAdapters(\n      mediaStreams,\n      this._availableAdapters,\n    );\n  }\n\n  private _connectAdapterToVideo() {\n    if (this._playableAdapters.length > 0) {\n      // Use the first PlayableStream for now\n      // Later, we can use the others as fallback\n      this._attachedAdapter = this._playableAdapters[0];\n      this._attachedAdapter.attach(this._video);\n    }\n  }\n\n  private _detachCurrentAdapter() {\n    if (this._attachedAdapter) {\n      this._attachedAdapter.detach();\n      this._attachedAdapter = null;\n    }\n  }\n\n  get attachedAdapter() {\n    return this._attachedAdapter;\n  }\n\n  connectAdapter(src: MediaSource) {\n    this._detachCurrentAdapter();\n    this._resolvePlayableAdapters(src);\n    this._connectAdapterToVideo();\n  }\n\n  destroy() {\n    this._detachCurrentAdapter();\n\n    this._attachedAdapter = null;\n    this._availableAdapters = null;\n    this._playableAdapters = null;\n\n    this._video = null;\n  }\n}\n","import playerAPI from '../../core/player-api-decorator';\n\nimport StateEngine from './state-engine';\nimport NativeEventsBroadcaster from './native-events-broadcaster';\nimport AdapterStrategy from './adapters-strategy';\n\nimport {\n  isIPhone,\n  isIPod,\n  isIPad,\n  isAndroid,\n} from '../../utils/device-detection';\n\nimport { VIDEO_EVENTS, EngineState } from '../../constants';\nimport { IPlaybackAdapter } from './adapters/types';\n\nimport { IPlayerConfig } from '../../core/config';\nimport {\n  IPlaybackEngine,\n  IPlaybackEngineDependencies,\n  IDebugInfo,\n  MediaSource,\n  CrossOriginValue,\n} from './types';\nimport { IEventEmitter } from '../event-emitter/types';\n\n//TODO: Find source of problem with native HLS on Safari, when playing state triggered but actual playing is delayed\nexport default class Engine implements IPlaybackEngine {\n  static moduleName = 'engine';\n  static dependencies = ['eventEmitter', 'config', 'availablePlaybackAdapters'];\n\n  private _eventEmitter: IEventEmitter;\n  private _currentSrc: MediaSource;\n  private _stateEngine: StateEngine;\n  private _video: HTMLVideoElement;\n  private _nativeEventsBroadcaster: NativeEventsBroadcaster;\n  private _adapterStrategy: AdapterStrategy;\n  private _playPromise: Promise<any>;\n  private _pauseRequested: boolean;\n\n  constructor({\n    eventEmitter,\n    config,\n    availablePlaybackAdapters = [],\n  }: IPlaybackEngineDependencies) {\n    this._eventEmitter = eventEmitter;\n\n    this._currentSrc = null;\n\n    this._createVideoTag(config.videoElement);\n\n    this._stateEngine = new StateEngine(eventEmitter, this._video);\n    this._nativeEventsBroadcaster = new NativeEventsBroadcaster(\n      eventEmitter,\n      this._video,\n    );\n    this._adapterStrategy = new AdapterStrategy(\n      this._eventEmitter,\n      this._video,\n      availablePlaybackAdapters,\n    );\n\n    this._applyConfig(config);\n  }\n\n  private _createVideoTag(videoElement?: HTMLVideoElement) {\n    if (videoElement && videoElement.tagName === 'VIDEO') {\n      this._video = videoElement;\n    } else {\n      this._video = document.createElement('video');\n    }\n  }\n  private _applyConfig(config: IPlayerConfig = {}) {\n    const {\n      preload,\n      autoPlay,\n      loop,\n      muted,\n      volume,\n      playInline,\n      crossOrigin,\n      src,\n    } = config;\n\n    this.setPreload(preload);\n    this.setAutoPlay(autoPlay);\n    this.setLoop(loop);\n    this.setMute(muted);\n    this.setVolume(volume);\n    this.setPlayInline(playInline);\n    this.setCrossOrigin(crossOrigin);\n\n    this.setSrc(src);\n  }\n\n  getNode() {\n    return this._video;\n  }\n\n  private _getViewDimensions() {\n    return {\n      width: this._video.offsetWidth,\n      height: this._video.offsetHeight,\n    };\n  }\n\n  get isDynamicContent() {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isDynamicContent;\n  }\n\n  get isDynamicContentEnded() {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isDynamicContentEnded;\n  }\n\n  get isSeekAvailable() {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isSeekAvailable;\n  }\n\n  get isMetadataLoaded() {\n    return this._stateEngine.isMetadataLoaded;\n  }\n\n  get isPreloadAvailable() {\n    if (isIPad() || isIPhone() || isIPod() || isAndroid()) {\n      return false;\n    }\n\n    return this.getPreload() !== 'none';\n  }\n\n  get isAutoPlayAvailable() {\n    if (isIPad() || isIPhone() || isIPod() || isAndroid()) {\n      return false;\n    }\n\n    return this.getAutoPlay();\n  }\n\n  get isSyncWithLive(): boolean {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isSyncWithLive;\n  }\n\n  get attachedAdapter(): IPlaybackAdapter {\n    return this._adapterStrategy.attachedAdapter;\n  }\n\n  /**\n   * Method for setting source of video to player.\n   * @param src Array with multiple sources\n   * @example\n   * player.setSrc([\n   *   'https://my-url/video.mp4',\n   *   'https://my-url/video.webm',\n   *   'https://my-url/video.m3u8'\n   * ]);\n   * @note\n   * Read more about [video source](/video-source)\n   */\n  @playerAPI()\n  setSrc(src: MediaSource) {\n    if (src === this._currentSrc) {\n      return;\n    }\n\n    this._stateEngine.clearTimestamps();\n    this._currentSrc = src;\n    this._adapterStrategy.connectAdapter(this._currentSrc);\n\n    this._stateEngine.setState(EngineState.SRC_SET);\n  }\n\n  /**\n   * Return current source of video\n   * @example\n   * player.getSrc(); // ['https://my-url/video.mp4']\n   */\n  @playerAPI()\n  getSrc(): MediaSource {\n    return this._currentSrc;\n  }\n\n  @playerAPI()\n  reset() {\n    this.pause();\n    this.setCurrentTime(0);\n    this._eventEmitter.emit(VIDEO_EVENTS.RESET);\n  }\n\n  /**\n   * Method for starting playback of video\n   * @example\n   * player.play();\n   */\n  @playerAPI()\n  play() {\n    //Workaround for triggering functionality that requires user event pipe\n    this._eventEmitter.emit(VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED);\n\n    this._pauseRequested = false;\n\n    if (!this._playPromise) {\n      this._playPromise = this._video.play();\n      if (this._playPromise !== undefined) {\n        this._playPromise\n          .then(() => {\n            this._playPromise = null;\n\n            if (this._pauseRequested) {\n              this.pause();\n            }\n          })\n          .catch(event => {\n            this._eventEmitter.emit(VIDEO_EVENTS.PLAY_ABORTED, event);\n            this._playPromise = null;\n          });\n      }\n    }\n  }\n\n  /**\n   * Method for pausing playback of video\n   * @example\n   * player.pause();\n   */\n  @playerAPI()\n  pause() {\n    if (this._playPromise) {\n      this._pauseRequested = true;\n    } else {\n      this._video.pause();\n      this._pauseRequested = false;\n    }\n  }\n\n  /**\n   * Method for toggling(play\\pause) playback of video\n   * @example\n   * player.togglePlayback();\n   */\n  @playerAPI()\n  togglePlayback() {\n    if (this.isVideoPaused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  /**\n   * Method for reseting playback of video\n   * @example\n   * player.play();\n   * console.log(player.isVideoPaused); // false\n   * ...\n   * player.resetPlayback();\n   * console.log(player.isVideoPaused); // true;\n   * console.log(player.getCurrentTime()); //0;\n   */\n  @playerAPI()\n  resetPlayback() {\n    this.pause();\n    this.setCurrentTime(0);\n    this._eventEmitter.emit(VIDEO_EVENTS.RESET);\n  }\n\n  /**\n   * High level status of video playback. Returns true if playback is paused.\n   * For more advance state use `getCurrentPlaybackState`\n   * @example\n   * player.play();\n   * console.log(player.isVideoPaused);\n   */\n  @playerAPI()\n  get isVideoPaused(): boolean {\n    return this._video.paused;\n  }\n\n  /**\n   * High level status of video playback. Returns true if playback is ended. Also note, that `isPaused` will return `true` if playback is ended also.\n   * For more advance state use `getCurrentPlaybackState`\n   * @example\n   * player.play();\n   * console.log(player.isVideoEnded);\n   */\n  @playerAPI()\n  get isVideoEnded(): boolean {\n    return this._video.ended;\n  }\n\n  /**\n   * Method for synchronize current playback with live point. Available only if you playing live source.\n   * @example\n   * player.syncWithLive();\n   */\n  @playerAPI()\n  syncWithLive() {\n    if (\n      this.attachedAdapter &&\n      this.attachedAdapter.isDynamicContent &&\n      !this.attachedAdapter.isDynamicContentEnded &&\n      !this.isSyncWithLive\n    ) {\n      this.setCurrentTime(this.attachedAdapter.syncWithLiveTime);\n\n      this.play();\n    }\n  }\n\n  /**\n   * Method for going forward in playback by your value\n   * @param sec - Value in seconds\n   * @example\n   * player.goForward(5);\n   */\n  @playerAPI()\n  goForward(sec: number) {\n    const duration = this.getDurationTime();\n\n    if (duration) {\n      const current = this.getCurrentTime();\n      this.setCurrentTime(Math.min(current + sec, duration));\n    }\n  }\n\n  /**\n   * Method for going backward in playback by your value\n   * @param sec - Value in seconds\n   * @example\n   * player.goBackward(5);\n   */\n  @playerAPI()\n  goBackward(sec: number) {\n    const duration = this.getDurationTime();\n\n    if (duration) {\n      const current = this.getCurrentTime();\n      this.setCurrentTime(Math.max(current - sec, 0));\n    }\n  }\n\n  /**\n   * Set volume\n   * @param volume - Volume value `0..100`\n   * @example\n   * player.setVolume(50);\n   */\n  @playerAPI()\n  setVolume(volume: number) {\n    const parsedVolume = Number(volume);\n    this._video.volume = isNaN(parsedVolume)\n      ? 1\n      : Math.max(0, Math.min(Number(volume) / 100, 1));\n  }\n\n  /**\n   * Get volume\n   * @example\n   * player.getVolume(); // 50\n   */\n  @playerAPI()\n  getVolume(): number {\n    return this._video.volume * 100;\n  }\n\n  /**\n   * Method for increasing current volume by value\n   * @param value - Value from 0 to 100\n   * @example\n   * player.increaseVolume(30);\n   */\n  @playerAPI()\n  increaseVolume(value: number) {\n    this.setVolume(this.getVolume() + value);\n  }\n\n  /**\n   * Method for decreasing current volume by value\n   * @param value - Value from 0 to 100\n   * @example\n   * player.decreaseVolume(30);\n   */\n  @playerAPI()\n  decreaseVolume(value: number) {\n    this.setVolume(this.getVolume() - value);\n  }\n\n  /**\n   * Mute or unmute the video\n   * @param isMuted - `true` to mute the video.\n   * @example\n   * player.setMute(true);\n   */\n  @playerAPI()\n  setMute(isMuted: boolean) {\n    this._video.muted = Boolean(isMuted);\n  }\n\n  /**\n   * Get mute flag\n   * @example\n   * player.getMute(); // true\n   */\n  @playerAPI()\n  getMute(): boolean {\n    return this._video.muted;\n  }\n\n  /**\n   * Set autoPlay flag\n   * @example\n   * player.setAutoPlay();\n   */\n  @playerAPI()\n  setAutoPlay(isAutoPlay: boolean) {\n    this._video.autoplay = Boolean(isAutoPlay);\n  }\n\n  /**\n   * Get autoPlay flag\n   * @example\n   * player.getAutoPlay(); // true\n   */\n  @playerAPI()\n  getAutoPlay(): boolean {\n    return this._video.autoplay;\n  }\n\n  /**\n   * Set loop flag\n   * @param isLoop - If `true` video will be played again after it will finish\n   * @example\n   * player.setLoop(true);\n   */\n  @playerAPI()\n  setLoop(isLoop: boolean) {\n    this._video.loop = Boolean(isLoop);\n  }\n\n  /**\n   * Get loop flag\n   * @example\n   * player.getLoop(); // true\n   */\n  @playerAPI()\n  getLoop(): boolean {\n    return this._video.loop;\n  }\n\n  /**\n   * Method for setting playback rate\n   */\n  @playerAPI()\n  setPlaybackRate(rate: number) {\n    this._video.playbackRate = rate;\n  }\n\n  /**\n   * Return current playback rate\n   */\n  @playerAPI()\n  getPlaybackRate(): number {\n    return this._video.playbackRate;\n  }\n\n  /**\n   * Set preload type\n   * @example\n   * player.setPreload('none');\n   */\n  @playerAPI()\n  setPreload(preload: 'auto' | 'metadata' | 'none') {\n    this._video.preload = preload || 'auto';\n  }\n\n  /**\n   * Return preload type\n   * @example\n   * player.getPreload(); // none\n   */\n  @playerAPI()\n  getPreload(): string {\n    return this._video.preload;\n  }\n\n  /**\n   * Return current time of video playback\n   * @example\n   * player.getCurrentTime(); //  60.139683\n   */\n  @playerAPI()\n  getCurrentTime(): number {\n    return this._video.currentTime;\n  }\n\n  /**\n   * Method for seeking to time in video\n   * @param time - Time in seconds\n   * @example\n   * player.goTo(34);\n   */\n  @playerAPI('goTo')\n  setCurrentTime(time: number) {\n    this._video.currentTime = time;\n  }\n\n  /**\n   * Return duration of video\n   * @example\n   * player.getDurationTime(); // 180.149745\n   */\n  @playerAPI()\n  getDurationTime(): number {\n    return this._video.duration || 0;\n  }\n\n  /**\n   * Return real width of video from metadata\n   * @example\n   * player.getVideoWidth(); // 400\n   */\n  @playerAPI('getVideoRealWidth')\n  getVideoWidth(): number {\n    return this._video.videoWidth;\n  }\n\n  /**\n   * Return real height of video from metadata\n   * @example\n   * player.getVideoHeight(); // 225\n   */\n  @playerAPI('getVideoRealHeight')\n  getVideoHeight(): number {\n    return this._video.videoHeight;\n  }\n\n  getBuffered() {\n    return this._video.buffered;\n  }\n\n  /**\n   * Set playInline flag\n   * @param isPlayInline - If `false` - video will be played in full screen, `true` - inline\n   * @example\n   * player.setPlayInline(true);\n   */\n  @playerAPI()\n  setPlayInline(isPlayInline: boolean) {\n    if (isPlayInline) {\n      this._video.setAttribute('playsInline', 'true');\n    } else {\n      this._video.removeAttribute('playsInline');\n    }\n  }\n\n  /**\n   * Get playInline flag\n   * @example\n   * player.getPlayInline(); // true\n   */\n  @playerAPI()\n  getPlayInline(): boolean {\n    return this._video.getAttribute('playsInline') === 'true';\n  }\n\n  /**\n   * Set crossorigin attribute for video\n   * @example\n   * player.setCrossOrigin('anonymous');\n   */\n  @playerAPI()\n  setCrossOrigin(crossOrigin?: 'anonymous' | 'use-credentials') {\n    if (crossOrigin) {\n      this._video.setAttribute('crossorigin', crossOrigin);\n    } else {\n      this._video.removeAttribute('crossorigin');\n    }\n  }\n\n  /**\n   * Get crossorigin attribute value for video\n   * @example\n   * player.getCrossOrigin(); // 'anonymous'\n   */\n  @playerAPI()\n  getCrossOrigin(): CrossOriginValue {\n    return this._video.getAttribute('crossorigin') as CrossOriginValue;\n  }\n\n  /**\n   * Return current state of playback\n   */\n  @playerAPI('getCurrentPlaybackState')\n  getCurrentState() {\n    return this._stateEngine.state;\n  }\n\n  /**\n   * Return object with internal debug info\n   *\n   * @example\n   * player.getDebugInfo();\n   *\n   * @note\n   * The above command returns JSON structured like this:\n   *\n   * @example\n   * {\n   *   \"type\": \"HLS\",\n   *   \"viewDimensions\": {\n   *     \"width\": 700,\n   *     \"height\": 394\n   *   }\n   *   \"url\": \"https://example.com/video.m3u8\",\n   *   \"currentTime\": 22.092514,\n   *   \"duration\": 60.139683,\n   *   \"loadingStateTimestamps\": {\n   *     \"metadata-loaded\": 76,\n   *     \"ready-to-play\": 67\n   *   },\n   *   \"bitrates\": [\n   *     // Available bitrates\n   *     \"100000\",\n   *     \"200000\",\n   *     ...\n   *   ],\n   *   // One of available bitrates, that used right now\n   *   \"currentBitrate\": \"100000\",\n   *   // Raw estimation of bandwidth, that could be used without playback stall\n   *   \"bwEstimate\": \"120000\"\n   *   \"overallBufferLength\": 60.139683,\n   *   \"nearestBufferSegInfo\": {\n   *     \"start\": 0,\n   *     \"end\": 60.139683\n   *   }\n   * }\n   */\n  @playerAPI()\n  getDebugInfo(): IDebugInfo {\n    const { duration, currentTime } = this._video;\n    let data;\n\n    if (this._adapterStrategy.attachedAdapter) {\n      data = this._adapterStrategy.attachedAdapter.debugInfo;\n    }\n\n    return {\n      ...data,\n      viewDimensions: this._getViewDimensions(),\n      currentTime,\n      duration,\n      loadingStateTimestamps: this._stateEngine.stateTimestamps,\n    };\n  }\n\n  destroy() {\n    this._stateEngine.destroy();\n    this._nativeEventsBroadcaster.destroy();\n    this._adapterStrategy.destroy();\n    this._video.parentNode && this._video.parentNode.removeChild(this._video);\n\n    this._stateEngine = null;\n    this._nativeEventsBroadcaster = null;\n    this._adapterStrategy = null;\n    this._eventEmitter = null;\n    this._video = null;\n  }\n}\n","const SHORTHAND_HEX_COLOR_PATTERN = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\nconst HEX_COLOR_PATTERN = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n\ntype IRGB = {\n  r: number;\n  g: number;\n  b: number;\n};\n\nfunction hexToRgb(hex: string): IRGB {\n  hex = hex.replace(\n    SHORTHAND_HEX_COLOR_PATTERN,\n    (_, r, g, b) => r + r + g + g + b + b,\n  );\n\n  const result = hex.match(HEX_COLOR_PATTERN);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n}\n\nexport default hexToRgb;\n","import hexToRgb from './hexToRgb';\n\nfunction transperentizeColor(color: string, alpha: number) {\n  const { r, g, b } = hexToRgb(color);\n  return `rgba(${r},${g},${b},${alpha})`;\n}\n\nexport default transperentizeColor;\n","function camelToKebab(string: string): string {\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\nexport default camelToKebab;\n","import camelToKebab from './camelToKebab';\n\nconst generatedIds: Map<string, number> = new Map();\n\nfunction getUniquePostfix(className: string): string {\n  if (generatedIds.has(className)) {\n    const newID: number = generatedIds.get(className) + 1;\n    generatedIds.set(className, newID);\n\n    return `${newID}`;\n  }\n\n  generatedIds.set(className, 0);\n  return '';\n}\n\nfunction getUniqueId(classImportName: string): string {\n  const kebabName: string = camelToKebab(classImportName);\n\n  return `${kebabName}${getUniquePostfix(kebabName)}`;\n}\n\nexport default getUniqueId;\n","import getUniqueId from './getUniqueId';\n\nimport { IStyles } from '../../types';\nimport { ICSSRules } from '../types';\n\nfunction getUniqueClassName(classImportName: string) {\n  return `wix-playable--${getUniqueId(classImportName)}`;\n}\n\nfunction generateClassNames(rules: ICSSRules): IStyles {\n  return Object.keys(rules).reduce(\n    (acc, classImportName) => ({\n      ...acc,\n      [classImportName]: getUniqueClassName(classImportName),\n    }),\n    {},\n  );\n}\n\nexport default generateClassNames;\n","import camelToKebab from './utils/camelToKebab';\nimport generateClassNames from './utils/generateClassNames';\n\nimport { IStyles } from '../types';\nimport { ICSSRuleFunction, ICSSRules, ICSSRule } from './types';\n\nexport class StyleSheet {\n  private _rulesByModule: Map<object, ICSSRules> = new Map();\n  private _classNamesByModule: Map<object, IStyles> = new Map();\n  private _data: any = {};\n  private _styleNode: Element;\n\n  attach() {\n    this._styleNode = this._styleNode || document.createElement('style');\n\n    const discoveredStyles: string[] = [];\n    this._rulesByModule.forEach((_, module) => {\n      discoveredStyles.push(this._getModuleCSS(module));\n    });\n\n    this._styleNode.innerHTML = discoveredStyles.join(' ');\n\n    document.getElementsByTagName('head')[0].appendChild(this._styleNode);\n  }\n\n  update(data: any) {\n    this._data = {\n      ...this._data,\n      ...data,\n    };\n\n    if (this._styleNode) {\n      this.attach();\n    }\n  }\n\n  registerModuleTheme(module: object, rules: ICSSRules) {\n    //todo maybe we would like to update overrides for module? Or at least show warning instead of Error\n    if (this._rulesByModule.get(module)) {\n      throw new Error('can`t register multiple themes for one module');\n    }\n\n    this._rulesByModule.set(module, rules);\n    this._classNamesByModule.set(module, generateClassNames(rules));\n  }\n\n  getModuleClassNames(module: any): IStyles {\n    return this._classNamesByModule.get(module);\n  }\n\n  private _getModuleCSS(module: any): string {\n    const moduleRules = this._rulesByModule.get(module);\n    const moduleClassNames = this._classNamesByModule.get(module);\n\n    if (!moduleRules || !moduleClassNames) {\n      return '';\n    }\n\n    return Object.keys(moduleRules)\n      .map(classImportName =>\n        this._getRuleCSS(\n          moduleRules[classImportName],\n          moduleClassNames[classImportName],\n        ),\n      )\n      .join(' ');\n  }\n\n  private _getRuleCSS(rule: ICSSRule, ruleClassName: string): string {\n    if (!rule || !ruleClassName) {\n      return '';\n    }\n\n    const complexRuleNames = Object.keys(rule)\n      .filter(ruleName => typeof rule[ruleName] === 'object')\n      .map(\n        ruleName => (ruleName.indexOf('&') !== -1 ? ruleName : `& ${ruleName}`),\n      );\n\n    const complexRules = complexRuleNames\n      .map(ruleName => {\n        const selector = ruleName.replace(/&/g, `.${ruleClassName}`);\n        //don't want to allow deep nesting now, maybe later\n        return `${selector} {${this._getRuleStyles(rule[ruleName])}}`;\n      })\n      .join(' ');\n\n    return `.${ruleClassName} {${this._getRuleStyles(rule)}} ${complexRules}`;\n  }\n\n  private _getRuleStyles(rule: any) {\n    const simpleRuleNames: Array<string> = Object.keys(rule).filter(\n      ruleName => typeof rule[ruleName] !== 'object',\n    );\n\n    return simpleRuleNames\n      .map(\n        ruleName =>\n          `${camelToKebab(ruleName)}: ${\n            typeof rule[ruleName] === 'function'\n              ? (rule[ruleName] as ICSSRuleFunction)(this._data)\n              : rule[ruleName]\n          }`,\n      )\n      .join('; ');\n  }\n}\n","import { StyleSheet } from './style-sheet';\n\nimport playerAPI from '../../../../core/player-api-decorator';\n\nimport { IStyles } from '../types';\nimport { ICSSRules, IThemeConfig } from './types';\n\nconst DEFAULT_THEME_CONFIG = {\n  color: '#FFF',\n  liveColor: '#ea492e',\n  progressColor: '#FFF',\n};\n\ninterface IThemeService {\n  updateTheme(config: IThemeConfig): void;\n  registerModuleTheme(module: object, rules: ICSSRules): void;\n  get(module: object): IStyles;\n  destroy(): void;\n}\n\nclass ThemeService implements IThemeService {\n  static moduleName = 'theme';\n  static dependencies = ['themeConfig'];\n\n  private _styleSheet: StyleSheet;\n\n  constructor({ themeConfig }: { themeConfig: IThemeConfig }) {\n    this._styleSheet = new StyleSheet();\n\n    this._styleSheet.update({\n      ...DEFAULT_THEME_CONFIG,\n      ...themeConfig,\n    });\n\n    // setTimeout here is for calling `attach` after all modules resolved.\n    window.setTimeout(() => {\n      this._styleSheet && this._styleSheet.attach();\n    }, 0);\n  }\n\n  /**\n   * Method for setting theme for player instance\n   *\n   * @example\n   * player.updateTheme({\n   *   progressColor: \"#AEAD22\"\n   * })\n   * @note\n   *\n   * You can check info about theming [here](/themes)\n   *\n   * @param themeConfig - Theme config\n   *\n   */\n  @playerAPI()\n  updateTheme(themeConfig: IThemeConfig) {\n    this._styleSheet.update(themeConfig);\n  }\n\n  registerModuleTheme(module: object, rules: ICSSRules) {\n    this._styleSheet.registerModuleTheme(module, rules);\n  }\n\n  get(module: any) {\n    return this._styleSheet.getModuleClassNames(module);\n  }\n\n  destroy() {\n    this._styleSheet = null;\n  }\n}\n\nexport { DEFAULT_THEME_CONFIG, IThemeService };\n\nexport default ThemeService;\n","import { TEXT_LABELS } from '../../constants';\nimport { ITextMapConfig } from './types';\n\nconst map: ITextMapConfig = {\n  [TEXT_LABELS.LOGO_LABEL]: 'Watch On Site',\n  [TEXT_LABELS.LOGO_TOOLTIP]: 'Watch On Site',\n  [TEXT_LABELS.LIVE_INDICATOR_TEXT]: ({ isEnded }) =>\n    !isEnded ? 'Live' : 'Live Ended',\n  [TEXT_LABELS.LIVE_SYNC_LABEL]: 'Sync to Live',\n  [TEXT_LABELS.LIVE_SYNC_TOOLTIP]: 'Sync to Live',\n  [TEXT_LABELS.PAUSE_CONTROL_LABEL]: 'Pause',\n  [TEXT_LABELS.PLAY_CONTROL_LABEL]: 'Play',\n  [TEXT_LABELS.PROGRESS_CONTROL_LABEL]: 'Progress control',\n  [TEXT_LABELS.PROGRESS_CONTROL_VALUE]: ({ percent }) =>\n    `Already played ${percent}%`,\n  [TEXT_LABELS.MUTE_CONTROL_LABEL]: 'Mute',\n  [TEXT_LABELS.MUTE_CONTROL_TOOLTIP]: 'Mute',\n  [TEXT_LABELS.UNMUTE_CONTROL_LABEL]: 'Unmute',\n  [TEXT_LABELS.UNMUTE_CONTROL_TOOLTIP]: 'Unmute',\n  [TEXT_LABELS.VOLUME_CONTROL_LABEL]: 'Volume control',\n  [TEXT_LABELS.VOLUME_CONTROL_VALUE]: ({ volume }) => `Volume is ${volume}%`,\n  [TEXT_LABELS.ENTER_FULL_SCREEN_LABEL]: 'Enter full screen mode',\n  [TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP]: 'Enter full screen mode',\n  [TEXT_LABELS.EXIT_FULL_SCREEN_LABEL]: 'Exit full screen mode',\n  [TEXT_LABELS.EXIT_FULL_SCREEN_TOOLTIP]: 'Exit full screen mode',\n};\n\nexport default map;\n","import DEFAULT_TEXTS from './default-texts';\n\nimport { ITextMap, ITextMapConfig } from './types';\nimport { IPlayerConfig } from '../../core/config';\n\nexport default class TextMap implements ITextMap {\n  static moduleName = 'textMap';\n  static dependencies = ['config'];\n\n  private _textMap: ITextMapConfig;\n\n  constructor({ config }: { config: IPlayerConfig }) {\n    this._textMap = {\n      ...DEFAULT_TEXTS,\n      ...config.texts,\n    };\n  }\n\n  get(id: string, args: any): string {\n    if (!this._textMap) {\n      return;\n    }\n\n    const text = this._textMap[id];\n\n    if (typeof text === 'function') {\n      return text(args);\n    }\n\n    return text;\n  }\n\n  destroy() {\n    this._textMap = null;\n  }\n}\n","import { IFullScreenHelper } from './types';\n\nconst fnMap = [\n  [\n    'requestFullscreen',\n    'exitFullscreen',\n    'fullscreenElement',\n    'fullscreenEnabled',\n    'fullscreenchange',\n    'fullscreenerror',\n  ],\n  // new WebKit\n  [\n    'webkitRequestFullscreen',\n    'webkitExitFullscreen',\n    'webkitFullscreenElement',\n    'webkitFullscreenEnabled',\n    'webkitfullscreenchange',\n    'webkitfullscreenerror',\n  ],\n  // old WebKit (Safari 5.1)\n  [\n    'webkitRequestFullScreen',\n    'webkitCancelFullScreen',\n    'webkitCurrentFullScreenElement',\n    'webkitCancelFullScreen',\n    'webkitfullscreenchange',\n    'webkitfullscreenerror',\n  ],\n  [\n    'mozRequestFullScreen',\n    'mozCancelFullScreen',\n    'mozFullScreenElement',\n    'mozFullScreenEnabled',\n    'mozfullscreenchange',\n    'mozfullscreenerror',\n  ],\n  [\n    'msRequestFullscreen',\n    'msExitFullscreen',\n    'msFullscreenElement',\n    'msFullscreenEnabled',\n    'MSFullscreenChange',\n    'MSFullscreenError',\n  ],\n];\n\n/* ignore coverage */\nfunction getFullScreenFn(): IFullScreenFnMap | boolean {\n  const ret: IFullScreenFnMap = {};\n\n  for (let i = 0; i < fnMap.length; i += 1) {\n    if (fnMap[i][1] in document) {\n      for (let j = 0; j < fnMap[i].length; j += 1) {\n        ret[fnMap[0][j]] = fnMap[i][j];\n      }\n      return ret;\n    }\n  }\n\n  return false;\n}\n\ninterface IFullScreenFnMap {\n  [fn: string]: string;\n}\n\nexport default class DesktopFullScreen implements IFullScreenHelper {\n  private _elem: HTMLElement;\n  private _callback: EventListener;\n  private _fullscreenFn: IFullScreenFnMap | boolean;\n\n  constructor(elem: HTMLElement, callback: EventListener) {\n    this._elem = elem;\n    this._callback = callback;\n    this._fullscreenFn = getFullScreenFn();\n\n    this._bindEvents();\n  }\n\n  get isAPIExist() {\n    return Boolean(this._fullscreenFn);\n  }\n\n  get isInFullScreen() {\n    if (typeof this._fullscreenFn === 'boolean') {\n      return false;\n    }\n\n    return Boolean((document as any)[this._fullscreenFn.fullscreenElement]);\n  }\n\n  get isEnabled() {\n    if (typeof this._fullscreenFn === 'boolean') {\n      return false;\n    }\n\n    return (\n      this.isAPIExist && (document as any)[this._fullscreenFn.fullscreenEnabled]\n    );\n  }\n\n  private _bindEvents() {\n    if (typeof this._fullscreenFn === 'boolean') {\n      return false;\n    }\n\n    document.addEventListener(\n      this._fullscreenFn.fullscreenchange,\n      this._callback,\n    );\n  }\n\n  private _unbindEvents() {\n    if (typeof this._fullscreenFn === 'boolean') {\n      return false;\n    }\n\n    document.removeEventListener(\n      this._fullscreenFn.fullscreenchange,\n      this._callback,\n    );\n  }\n\n  request() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    const request = (this._fullscreenFn as IFullScreenFnMap).requestFullscreen;\n\n    // Work around Safari 5.1 bug: reports support for\n    // keyboard in fullscreen even though it doesn't.\n    // Browser sniffing, since the alternative with\n    // setTimeout is even worse.\n\n    if (/5\\.1[.\\d]* Safari/.test(navigator.userAgent)) {\n      (this._elem as any)[request]();\n    } else {\n      (this._elem as any)[request]((Element as any).ALLOW_KEYBOARD_INPUT);\n    }\n  }\n\n  exit() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    (document as any)[\n      (this._fullscreenFn as IFullScreenFnMap).exitFullscreen\n    ]();\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._elem = null;\n    this._callback = null;\n  }\n}\n","import { IFullScreenHelper } from './types';\n\nconst HAVE_METADATA = 1;\n\nlet isFullScreenRequested = false;\n\nexport default class IOSFullScreen implements IFullScreenHelper {\n  private _elem: HTMLVideoElement;\n  private _callback: EventListener;\n\n  constructor(elem: HTMLVideoElement, callback: EventListener) {\n    this._elem = elem;\n    this._callback = callback;\n\n    this._bindEvents();\n\n    this._enterWhenHasMetaData = this._enterWhenHasMetaData.bind(this);\n  }\n\n  get isAPIExist() {\n    return Boolean(this._elem && this._elem.webkitSupportsFullscreen);\n  }\n\n  get isInFullScreen() {\n    return Boolean(this._elem && this._elem.webkitDisplayingFullscreen);\n  }\n\n  get isEnabled() {\n    return this.isAPIExist;\n  }\n\n  private _bindEvents() {\n    this._elem.addEventListener('webkitbeginfullscreen', this._callback);\n    this._elem.addEventListener('webkitendfullscreen', this._callback);\n  }\n\n  private _unbindEvents() {\n    this._elem.removeEventListener('webkitbeginfullscreen', this._callback);\n    this._elem.removeEventListener('webkitendfullscreen', this._callback);\n\n    this._elem.removeEventListener(\n      'loadedmetadata',\n      this._enterWhenHasMetaData,\n    );\n  }\n\n  private _enterWhenHasMetaData() {\n    this._elem.removeEventListener(\n      'loadedmetadata',\n      this._enterWhenHasMetaData,\n    );\n\n    isFullScreenRequested = false;\n\n    this._elem.webkitEnterFullscreen();\n  }\n\n  request() {\n    if (!this.isEnabled || this.isInFullScreen) {\n      return false;\n    }\n\n    try {\n      this._elem.webkitEnterFullscreen();\n    } catch (e) {\n      if (this._elem.readyState < HAVE_METADATA) {\n        if (isFullScreenRequested) {\n          return;\n        }\n        this._elem.addEventListener(\n          'loadedmetadata',\n          this._enterWhenHasMetaData,\n        );\n        isFullScreenRequested = true;\n      }\n    }\n  }\n\n  exit() {\n    if (!this.isEnabled || !this.isInFullScreen) {\n      return false;\n    }\n\n    this._elem.webkitExitFullscreen();\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._elem = null;\n    this._callback = null;\n  }\n}\n","import { isIOS } from '../../utils/device-detection';\nimport playerAPI from '../../core/player-api-decorator';\nimport DesktopFullScreen from './desktop';\nimport IOSFullScreen from './ios';\n\nimport { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../constants';\nimport {\n  IFullScreenManager,\n  IFullScreenHelper,\n  IFullScreenConfig,\n} from './types';\nimport { IEventEmitter } from '../event-emitter/types';\nimport { IPlaybackEngine } from '../playback-engine/types';\nimport { IPlayerConfig } from '../../core/config';\nimport { IRootContainer } from '../root-container/types';\n\nconst DEFAULT_CONFIG: IFullScreenConfig = {\n  exitFullScreenOnEnd: true,\n  enterFullScreenOnPlay: false,\n  exitFullScreenOnPause: false,\n  pauseVideoOnFullScreenExit: false,\n};\n\nexport default class FullScreenManager implements IFullScreenManager {\n  static moduleName = 'fullScreenManager';\n  static dependencies = ['eventEmitter', 'engine', 'rootContainer', 'config'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _helper: IFullScreenHelper;\n\n  private _exitFullScreenOnEnd: boolean = false;\n  private _enterFullScreenOnPlay: boolean = false;\n  private _exitFullScreenOnPause: boolean = false;\n  private _pauseVideoOnFullScreenExit: boolean = false;\n\n  private _isEnabled: boolean;\n\n  private _unbindEvents: Function;\n\n  constructor({\n    eventEmitter,\n    engine,\n    rootContainer,\n    config,\n  }: {\n    engine: IPlaybackEngine;\n    eventEmitter: IEventEmitter;\n    rootContainer: IRootContainer;\n    config: IPlayerConfig;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n\n    if (config.fullScreen === false) {\n      this._isEnabled = false;\n    } else {\n      this._isEnabled = true;\n      const _config: IFullScreenConfig = {\n        ...DEFAULT_CONFIG,\n        ...(typeof config.fullScreen === 'object' ? config.fullScreen : {}),\n      };\n\n      this._exitFullScreenOnEnd = _config.exitFullScreenOnEnd;\n      this._enterFullScreenOnPlay = _config.enterFullScreenOnPlay;\n      this._exitFullScreenOnPause = _config.exitFullScreenOnPause;\n      this._pauseVideoOnFullScreenExit = _config.pauseVideoOnFullScreenExit;\n    }\n    this._onChange = this._onChange.bind(this);\n\n    if (isIOS()) {\n      this._helper = new IOSFullScreen(this._engine.getNode(), this._onChange);\n    } else {\n      this._helper = new DesktopFullScreen(rootContainer.node, this._onChange);\n    }\n\n    this._bindEvents();\n  }\n\n  private _onChange() {\n    if (!this._helper.isInFullScreen && this._pauseVideoOnFullScreenExit) {\n      this._engine.pause();\n    }\n    this._eventEmitter.emit(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this._helper.isInFullScreen,\n    );\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._processNextStateFromEngine],\n        [VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED, this._enterOnPlayRequested],\n      ],\n      this,\n    );\n  }\n\n  private _exitOnEnd() {\n    if (this._exitFullScreenOnEnd && this.isInFullScreen) {\n      this.exitFullScreen();\n    }\n  }\n\n  private _enterOnPlayRequested() {\n    if (this._enterFullScreenOnPlay && !this.isInFullScreen) {\n      this.enterFullScreen();\n    }\n  }\n\n  private _exitOnPauseRequested() {\n    if (this._exitFullScreenOnPause && this.isInFullScreen) {\n      this.exitFullScreen();\n    }\n  }\n\n  private _processNextStateFromEngine({\n    nextState,\n  }: {\n    nextState: EngineState;\n  }) {\n    switch (nextState) {\n      case EngineState.ENDED: {\n        this._exitOnEnd();\n        break;\n      }\n      case EngineState.PAUSED: {\n        this._exitOnPauseRequested();\n        break;\n      }\n\n      /* ignore coverage */\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Player would try to enter fullscreen mode.\n   * Behavior of fullscreen mode on different platforms may differ.\n   * @example\n   * player.enterFullScreen();\n   */\n  @playerAPI()\n  enterFullScreen() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    this._helper.request();\n  }\n\n  /**\n   * Player would try to exit fullscreen mode.\n   * @example\n   * player.exitFullScreen();\n   */\n  @playerAPI()\n  exitFullScreen() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    this._helper.exit();\n  }\n\n  /**\n   * Return true if player is in full screen\n   * @example\n   * console.log(player.isInFullScreen); // false\n   */\n  @playerAPI()\n  get isInFullScreen(): boolean {\n    if (!this.isEnabled) {\n      return false;\n    }\n\n    return this._helper.isInFullScreen;\n  }\n\n  get isEnabled() {\n    return this._helper.isEnabled && this._isEnabled;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._helper.destroy();\n    this._helper = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import {\n  EngineState,\n  VIDEO_EVENTS,\n  LiveState,\n  UI_EVENTS,\n} from '../../constants';\n\nimport { IEventEmitter, IEventMap } from '../event-emitter/types';\nimport { ILiveStateEngineDependencies, IPlaybackEngine } from './types';\n\nconst SEEK_BY_UI_EVENTS = [\n  UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,\n  UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n  UI_EVENTS.PROGRESS_CHANGE_TRIGGERED,\n];\n\nclass LiveStateEngine {\n  static moduleName = 'liveStateEngine';\n  static dependencies = ['eventEmitter', 'engine'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _state: LiveState;\n\n  private _isSeekedByUIWhilePlaying: boolean;\n\n  private _unbindEvents: Function;\n\n  constructor({ eventEmitter, engine }: ILiveStateEngineDependencies) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._state = LiveState.NONE;\n\n    this._isSeekedByUIWhilePlaying = null;\n\n    this._bindEvents();\n  }\n\n  get state(): LiveState {\n    return this._state;\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._processStateChange],\n        ...SEEK_BY_UI_EVENTS.map(\n          eventName => [eventName, this._processSeekByUI] as IEventMap,\n        ),\n        [VIDEO_EVENTS.DYNAMIC_CONTENT_ENDED, this._onDynamicContentEnded],\n      ],\n      this,\n    );\n  }\n\n  private _processStateChange({\n    prevState,\n    nextState,\n  }: {\n    prevState: EngineState;\n    nextState: EngineState;\n  }) {\n    if (nextState === EngineState.SRC_SET) {\n      this._setState(LiveState.NONE);\n      return;\n    }\n\n    if (!this._engine.isDynamicContent || this._engine.isDynamicContentEnded) {\n      return;\n    }\n\n    switch (nextState) {\n      case EngineState.METADATA_LOADED:\n        this._setState(LiveState.INITIAL);\n        break;\n\n      case EngineState.PLAY_REQUESTED:\n        if (this._state === LiveState.INITIAL) {\n          this._engine.syncWithLive();\n        }\n        break;\n\n      case EngineState.PLAYING:\n        // NOTE: skip PLAYING event after events like `WAITING` and other not important events.\n        if (\n          this._state === LiveState.INITIAL ||\n          this._state === LiveState.NOT_SYNC ||\n          this._isSeekedByUIWhilePlaying\n        ) {\n          this._setState(\n            this._engine.isSyncWithLive ? LiveState.SYNC : LiveState.NOT_SYNC,\n          );\n          this._isSeekedByUIWhilePlaying = false;\n        }\n        break;\n\n      case EngineState.PAUSED:\n        // NOTE: process `PAUSED` event only `PLAYING`, to be sure its not related with `WAITING` events\n        if (prevState === EngineState.PLAYING) {\n          this._setState(LiveState.NOT_SYNC);\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _processSeekByUI() {\n    if (\n      this._engine.isDynamicContent &&\n      this._engine.getCurrentState() === EngineState.PLAYING\n    ) {\n      // NOTE: flag should be handled on `PLAYING` state in `_processStateChange`\n      this._isSeekedByUIWhilePlaying = true;\n    }\n  }\n\n  private _onDynamicContentEnded() {\n    this._setState(LiveState.ENDED);\n  }\n\n  private _setState(state: LiveState) {\n    if (this._state !== state) {\n      const prevState = this._state;\n      const nextState = state;\n\n      this._state = state;\n      this._eventEmitter.emit(VIDEO_EVENTS.LIVE_STATE_CHANGED, {\n        prevState,\n        nextState,\n      });\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._eventEmitter = null;\n    this._engine = null;\n    this._state = null;\n  }\n}\n\nexport default LiveStateEngine;\n","import { EventEmitter, ListenerFn } from 'eventemitter3';\n\nexport const KEYCODES = {\n  SPACE_BAR: 32,\n  ENTER: 13,\n  TAB: 9,\n  LEFT_ARROW: 37,\n  RIGHT_ARROW: 39,\n  UP_ARROW: 38,\n  DOWN_ARROW: 40,\n  DEBUG_KEY: 68,\n};\n\ninterface ICallbacks {\n  [keyCode: string]: ListenerFn;\n}\n\nexport default class KeyboardInterceptorCore {\n  //TODO: Find how to set proper types here\n  private _eventEmitter: any;\n  private _node: HTMLElement;\n\n  constructor(node: HTMLElement, callbacks?: ICallbacks) {\n    this._eventEmitter = new EventEmitter();\n    this._node = node;\n\n    callbacks && this._attachCallbacks(callbacks);\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  private _attachCallbacks(callbacks: ICallbacks) {\n    Object.keys(callbacks).forEach((keyCode: string) => {\n      const keyCodeCallbacks = callbacks[keyCode];\n      if (Array.isArray(keyCodeCallbacks)) {\n        keyCodeCallbacks.forEach(callback =>\n          this._eventEmitter.on(keyCode, callback),\n        );\n      } else {\n        this._eventEmitter.on(keyCode, keyCodeCallbacks);\n      }\n    });\n  }\n\n  private _unattachCallbacks() {\n    this._eventEmitter.removeAllListeners();\n  }\n\n  private _bindCallbacks() {\n    this._processKeyboardInput = this._processKeyboardInput.bind(this);\n  }\n\n  private _bindEvents() {\n    this._node.addEventListener('keydown', this._processKeyboardInput, false);\n  }\n\n  private _unbindEvents() {\n    this._node.removeEventListener(\n      'keydown',\n      this._processKeyboardInput,\n      false,\n    );\n  }\n\n  addCallbacks(callbacks: ICallbacks) {\n    this._attachCallbacks(callbacks);\n  }\n\n  private _processKeyboardInput(e: KeyboardEvent) {\n    this._eventEmitter.emit(e.keyCode, e);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._unattachCallbacks();\n    this._eventEmitter = null;\n\n    this._node = null;\n  }\n}\n","import { UI_EVENTS } from '../../constants';\nimport {\n  isIPhone,\n  isIPod,\n  isIPad,\n  isAndroid,\n} from '../../utils/device-detection';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../utils/keyboard-interceptor';\n\nimport { IEventEmitter } from '../event-emitter/types';\nimport { IPlaybackEngine } from '../playback-engine/types';\nimport { IPlayerConfig } from '../../core/config';\nimport { IKeyboardControl } from './types';\nimport { IRootContainer } from '../root-container/types';\nimport { ListenerFn } from 'eventemitter3';\n\nexport const AMOUNT_TO_SKIP_SECONDS = 5;\nexport const AMOUNT_TO_CHANGE_VOLUME = 10;\n\nexport default class KeyboardControl implements IKeyboardControl {\n  static moduleName = 'keyboardControl';\n  static dependencies = ['engine', 'eventEmitter', 'rootContainer', 'config'];\n\n  private _isEnabled: boolean;\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _rootNode: HTMLElement;\n  private _keyboardInterceptor: KeyboardInterceptor;\n\n  constructor({\n    config,\n    eventEmitter,\n    rootContainer,\n    engine,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    rootContainer: IRootContainer;\n    engine: IPlaybackEngine;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._rootNode = rootContainer.node;\n\n    if (isIPhone() || isIPod() || isIPad() || isAndroid()) {\n      this._isEnabled = false;\n    } else {\n      this._isEnabled = config.disableControlWithKeyboard !== false;\n    }\n\n    this._initInterceptor();\n  }\n\n  private _initInterceptor() {\n    if (this._isEnabled) {\n      this._keyboardInterceptor = new KeyboardInterceptor(this._rootNode);\n      this._attachDefaultControls();\n    }\n  }\n\n  private _attachDefaultControls() {\n    this._keyboardInterceptor.addCallbacks({\n      [KEYCODES.TAB]: () => {\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n      },\n      [KEYCODES.SPACE_BAR]: e => {\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.togglePlayback();\n      },\n      [KEYCODES.LEFT_ARROW]: e => {\n        if (this._engine.isSeekAvailable) {\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n          );\n          this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n        }\n      },\n      [KEYCODES.RIGHT_ARROW]: e => {\n        if (this._engine.isSeekAvailable) {\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n          this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n        }\n      },\n      [KEYCODES.UP_ARROW]: e => {\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.increaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n      [KEYCODES.DOWN_ARROW]: e => {\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.decreaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    if (this._keyboardInterceptor) {\n      this._keyboardInterceptor.destroy();\n    }\n  }\n\n  addKeyControl(key: number, callback: ListenerFn) {\n    if (this._isEnabled) {\n      this._keyboardInterceptor.addCallbacks({\n        [key]: callback,\n      });\n    }\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n\n    this._rootNode = null;\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","function getElementByHook(element: HTMLElement, hook: string): HTMLElement {\n  return element.querySelector(`[data-hook=\"${hook}\"]`);\n}\n\nexport default getElementByHook;\n","function toggleNodeClass(\n  node: HTMLElement,\n  className: string,\n  shouldAdd: boolean,\n) {\n  if (shouldAdd) {\n    node.classList.add(className);\n  } else {\n    node.classList.remove(className);\n  }\n}\n\nexport default toggleNodeClass;\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { debugPanelTemplate } from './templates';\n\nimport syntaxHighlight from './syntaxHighlight';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  IDebugPanelViewStyles,\n  IDebugPanelViewCallbacks,\n  IDebugPanelViewConfig,\n} from './types';\n\nimport styles from './debug-panel.scss';\n\nclass DebugPanelView extends View<IDebugPanelViewStyles>\n  implements IView<IDebugPanelViewStyles> {\n  private _callbacks: IDebugPanelViewCallbacks;\n\n  private _$node: HTMLElement;\n  private _$infoContainer: HTMLElement;\n  private _$closeButton: HTMLElement;\n\n  constructor(config: IDebugPanelViewConfig) {\n    super();\n    const { callbacks } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      debugPanelTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._$closeButton = getElementByHook(\n      this._$node,\n      'debug-panel-close-button',\n    );\n    this._$infoContainer = getElementByHook(\n      this._$node,\n      'debug-panel-info-container',\n    );\n  }\n\n  private _bindEvents() {\n    this._$closeButton.addEventListener(\n      'click',\n      this._callbacks.onCloseButtonClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$closeButton.removeEventListener(\n      'click',\n      this._callbacks.onCloseButtonClick,\n    );\n  }\n\n  show() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, false);\n  }\n\n  hide() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, true);\n  }\n\n  setInfo(info: any) {\n    this._$infoContainer.innerHTML = syntaxHighlight(\n      JSON.stringify(info, undefined, 4),\n      this.styleNames,\n    );\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$closeButton = null;\n    this._$infoContainer = null;\n\n    this._callbacks = null;\n  }\n}\n\nDebugPanelView.extendStyleNames(styles);\n\nexport default DebugPanelView;\n","import { IDebugPanelHighlightStyles } from './types';\n\nfunction syntaxHighlight(json: string, styleNames: IDebugPanelHighlightStyles) {\n  json = json\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n\n  return json.replace(\n    /(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g,\n    (match: string) => {\n      let cls = styleNames.number;\n      if (/^\"/.test(match)) {\n        if (/:$/.test(match)) {\n          cls = styleNames.key;\n        } else {\n          cls = styleNames.string;\n        }\n      } else if (/true|false/.test(match)) {\n        cls = styleNames.boolean;\n      } else if (/null/.test(match)) {\n        cls = styleNames.null;\n      }\n      return `<span class=\"${cls}\">${match}</span>`;\n    },\n  );\n}\n\nexport default syntaxHighlight;\n","import { MediaStreamDeliveryPriority } from '../../../constants';\nimport View from './debug-panel.view';\n\nimport { KEYCODES } from '../../../utils/keyboard-interceptor';\n\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IRootContainer } from '../../root-container/types';\nimport { IKeyboardControl } from '../../keyboard-control/types';\n\nconst UPDATE_TIME = 1000;\n\nexport default class DebugPanel {\n  static moduleName = 'debugPanel';\n  static View = View;\n  static dependencies = ['engine', 'rootContainer', 'keyboardControl'];\n\n  private _engine: IPlaybackEngine;\n\n  private _interval: number;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    rootContainer,\n    keyboardControl,\n  }: {\n    engine: IPlaybackEngine;\n    rootContainer: IRootContainer;\n    keyboardControl: IKeyboardControl;\n  }) {\n    this._engine = engine;\n\n    this._bindCallbacks();\n    this._initUI();\n\n    this.hide();\n\n    rootContainer.appendComponentNode(this.node);\n\n    keyboardControl.addKeyControl(KEYCODES.DEBUG_KEY, this._keyControlCallback);\n  }\n\n  private _keyControlCallback(e: KeyboardEvent) {\n    if (e.ctrlKey && e.shiftKey) {\n      this.show();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    this.view = new View({\n      callbacks: {\n        onCloseButtonClick: this.hide,\n      },\n    });\n  }\n\n  private _bindCallbacks() {\n    this.updateInfo = this.updateInfo.bind(this);\n    this.hide = this.hide.bind(this);\n    this._keyControlCallback = this._keyControlCallback.bind(this);\n  }\n\n  getDebugInfo() {\n    const {\n      url,\n      type,\n      deliveryPriority,\n      currentBitrate,\n      overallBufferLength,\n      nearestBufferSegInfo,\n      viewDimensions,\n      currentTime,\n      duration,\n      loadingStateTimestamps,\n      bitrates,\n      bwEstimate,\n    } = this._engine.getDebugInfo();\n\n    return {\n      url,\n      type,\n      deliveryPriority: MediaStreamDeliveryPriority[deliveryPriority],\n      currentBitrate,\n      overallBufferLength,\n      nearestBufferSegInfo,\n      viewDimensions,\n      currentTime,\n      duration,\n      loadingStateTimestamps,\n      bitrates,\n      bwEstimate,\n    };\n  }\n\n  updateInfo() {\n    this.view.setInfo(this.getDebugInfo());\n  }\n\n  setUpdateInterval() {\n    this.clearUpdateInterval();\n    this._interval = window.setInterval(this.updateInfo, UPDATE_TIME);\n  }\n\n  clearUpdateInterval() {\n    window.clearInterval(this._interval);\n  }\n\n  show() {\n    if (this.isHidden) {\n      this.updateInfo();\n      this.setUpdateInterval();\n      this.view.show();\n      this.isHidden = false;\n    }\n  }\n\n  hide() {\n    if (!this.isHidden) {\n      this.clearUpdateInterval();\n      this.view.hide();\n      this.isHidden = true;\n    }\n  }\n\n  destroy() {\n    this.clearUpdateInterval();\n\n    this.view.destroy();\n    this.view = null;\n  }\n}\n","type IScreenViewStyles = {\n  screen: string;\n  screenTopBackground: string;\n  screenBottomBackground: string;\n  hidden: string;\n  visible: string;\n  hiddenCursor: string;\n  horizontalVideo: string;\n  verticalVideo: string;\n  fillMode: string;\n  blurMode: string;\n  regularMode: string;\n};\n\ntype IScreenViewCallbacks = {\n  onWrapperMouseClick: EventListenerOrEventListenerObject;\n  onWrapperMouseDblClick: EventListenerOrEventListenerObject;\n};\n\ntype IScreenViewConfig = {\n  callbacks: IScreenViewCallbacks;\n  playbackViewNode: HTMLElement;\n  nativeControls: boolean;\n};\n\ninterface IScreenConfig {\n  disableClickProcessing?: boolean;\n  nativeControls?: boolean;\n}\n\nenum VideoViewMode {\n  REGULAR = 'REGULAR',\n  BLUR = 'BLUR',\n  FILL = 'FILL',\n}\n\ninterface IScreen {\n  node: HTMLElement;\n  showCursor(): void;\n  hideCursor(): void;\n\n  show(): void;\n  hide(): void;\n\n  setVideoViewMode(viewMode: VideoViewMode): void;\n\n  destroy(): void;\n}\n\nexport {\n  IScreen,\n  VideoViewMode,\n  IScreenConfig,\n  IScreenViewStyles,\n  IScreenViewCallbacks,\n  IScreenViewConfig,\n};\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { screenTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  VideoViewMode,\n  IScreenViewStyles,\n  IScreenViewCallbacks,\n  IScreenViewConfig,\n} from './types';\n\nimport styles from './screen.scss';\n\nclass ScreenView extends View<IScreenViewStyles>\n  implements IView<IScreenViewStyles> {\n  private _callbacks: IScreenViewCallbacks;\n\n  private _$node: HTMLElement;\n  private _$canvas: HTMLCanvasElement;\n  private _$playbackNode: HTMLVideoElement;\n  private _ctx: CanvasRenderingContext2D;\n\n  private _widthHeightRatio: number;\n  private _requestAnimationFrameID: number;\n  private _currentMode: string;\n  private _styleNamesByViewMode: any;\n\n  constructor(config: IScreenViewConfig) {\n    super();\n    const { callbacks, nativeControls, playbackViewNode } = config;\n\n    this._callbacks = callbacks;\n\n    this._styleNamesByViewMode = {\n      [VideoViewMode.REGULAR]: this.styleNames.regularMode,\n      [VideoViewMode.BLUR]: this.styleNames.blurMode,\n      [VideoViewMode.FILL]: this.styleNames.fillMode,\n    };\n\n    this._bindCallbacks();\n\n    if (nativeControls) {\n      playbackViewNode.setAttribute('controls', 'true');\n    }\n\n    this._initDOM(playbackViewNode);\n    this._bindEvents();\n    this.setViewMode(VideoViewMode.REGULAR);\n  }\n\n  private _bindCallbacks() {\n    this._updateBackground = this._updateBackground.bind(this);\n  }\n\n  private _initDOM(playbackViewNode: HTMLElement) {\n    this._$node = htmlToElement(\n      screenTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._$playbackNode = playbackViewNode as HTMLVideoElement;\n    this._$node.appendChild(playbackViewNode);\n\n    this._$canvas = getElementByHook(\n      this._$node,\n      'background-canvas',\n    ) as HTMLCanvasElement;\n    this._ctx = this._$canvas.getContext('2d');\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._callbacks.onWrapperMouseClick);\n    this._$node.addEventListener(\n      'dblclick',\n      this._callbacks.onWrapperMouseDblClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener(\n      'click',\n      this._callbacks.onWrapperMouseClick,\n    );\n    this._$node.removeEventListener(\n      'dblclick',\n      this._callbacks.onWrapperMouseDblClick,\n    );\n  }\n\n  updateVideoAspectRatio(widthHeightRatio: number) {\n    this._widthHeightRatio = widthHeightRatio;\n    const isHorizontal = this._widthHeightRatio > 1;\n    toggleNodeClass(this._$node, this.styleNames.horizontalVideo, isHorizontal);\n    toggleNodeClass(this._$node, this.styleNames.verticalVideo, !isHorizontal);\n  }\n\n  focusOnNode() {\n    this._$node.focus();\n  }\n\n  show() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, false);\n  }\n\n  hide() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, true);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  appendComponentNode(node: HTMLElement) {\n    this._$node.appendChild(node);\n  }\n\n  hideCursor() {\n    toggleNodeClass(this._$node, this.styleNames.hiddenCursor, true);\n  }\n\n  showCursor() {\n    toggleNodeClass(this._$node, this.styleNames.hiddenCursor, false);\n  }\n\n  setViewMode(viewMode: VideoViewMode) {\n    if (this._styleNamesByViewMode[viewMode]) {\n      this.resetBackground();\n\n      Object.keys(this._styleNamesByViewMode).forEach(mode => {\n        toggleNodeClass(this._$node, this._styleNamesByViewMode[mode], false);\n      });\n\n      toggleNodeClass(this._$node, this._styleNamesByViewMode[viewMode], true);\n\n      if (viewMode === VideoViewMode.BLUR) {\n        this._startUpdatingBackground();\n      } else {\n        this._stopUpdatingBackground();\n      }\n\n      this._currentMode = viewMode;\n    }\n  }\n\n  setBackgroundSize(width: number, height: number) {\n    this.setBackgroundWidth(width);\n    this.setBackgroundHeight(height);\n  }\n\n  setBackgroundWidth(width: number) {\n    this._$canvas.width = width;\n  }\n\n  setBackgroundHeight(height: number) {\n    this._$canvas.height = height;\n  }\n\n  private _startUpdatingBackground() {\n    if (!this._requestAnimationFrameID) {\n      this._updateBackground();\n    }\n  }\n\n  private _stopUpdatingBackground() {\n    if (this._requestAnimationFrameID) {\n      cancelAnimationFrame(this._requestAnimationFrameID);\n      this._requestAnimationFrameID = null;\n    }\n  }\n\n  resetAspectRatio() {\n    const { videoWidth, videoHeight } = this._$playbackNode;\n    this._widthHeightRatio = videoHeight ? videoWidth / videoHeight : 0;\n    const isHorizontal = this._widthHeightRatio > 1;\n    toggleNodeClass(this._$node, this.styleNames.horizontalVideo, isHorizontal);\n    toggleNodeClass(this._$node, this.styleNames.verticalVideo, !isHorizontal);\n  }\n\n  resetBackground() {\n    if (this._currentMode === VideoViewMode.BLUR) {\n      this._clearBackground();\n    }\n  }\n\n  private _getSourceAreas(width: number, height: number): number[][] {\n    if (this._widthHeightRatio > 1) {\n      return [[0, 0, width, 1], [0, height - 1, width, 1]];\n    }\n\n    return [[0, 0, 1, height], [width - 1, 0, 1, height]];\n  }\n\n  private _getCanvasAreas(width: number, height: number): number[][] {\n    if (this._widthHeightRatio > 1) {\n      return [[0, 0, width, height / 2], [0, height / 2, width, height / 2]];\n    }\n\n    return [[0, 0, width / 2, height], [width / 2, 0, width / 2, height]];\n  }\n\n  private _drawAreaFromSource(source: number[], area: number[]) {\n    const [sourceX, sourceY, sourceWidth, sourceHeight] = source;\n    const [areaX, areaY, areaWidth, areaHeight] = area;\n\n    this._ctx.drawImage(\n      this._$playbackNode,\n\n      sourceX,\n      sourceY,\n      sourceWidth,\n      sourceHeight,\n\n      areaX,\n      areaY,\n      areaWidth,\n      areaHeight,\n    );\n  }\n  private _drawBackground() {\n    const { videoWidth, videoHeight } = this._$playbackNode;\n    const canvasWidth: number = this._$canvas.width;\n    const canvasHeight: number = this._$canvas.height;\n    const sourceAreas: number[][] = this._getSourceAreas(\n      videoWidth,\n      videoHeight,\n    );\n    const canvasAreas: number[][] = this._getCanvasAreas(\n      canvasWidth,\n      canvasHeight,\n    );\n\n    this._drawAreaFromSource(sourceAreas[0], canvasAreas[0]);\n    this._drawAreaFromSource(sourceAreas[1], canvasAreas[1]);\n  }\n\n  private _updateBackground() {\n    this._drawBackground();\n\n    this._requestAnimationFrameID = requestAnimationFrame(\n      this._updateBackground,\n    );\n  }\n\n  private _clearBackground() {\n    this._ctx.clearRect(0, 0, this._$canvas.width, this._$canvas.height);\n  }\n\n  destroy() {\n    this._stopUpdatingBackground();\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$playbackNode = null;\n    this._$canvas = null;\n    this._ctx = null;\n\n    this._callbacks = null;\n  }\n}\n\nScreenView.extendStyleNames(styles);\n\nexport default ScreenView;\n","import { UI_EVENTS, EngineState } from '../../../constants';\n\nimport View from './screen.view';\n\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IFullScreenManager } from '../../full-screen-manager/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IInteractionIndicator } from '../interaction-indicator/types';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\nimport {\n  IScreen,\n  VideoViewMode,\n  IScreenConfig,\n  IScreenViewConfig,\n} from './types';\n\nconst PLAYBACK_CHANGE_TIMEOUT = 300;\n\nconst DEFAULT_CONFIG: IScreenConfig = {\n  disableClickProcessing: false,\n  nativeControls: false,\n};\n\nexport default class Screen implements IScreen {\n  static moduleName = 'screen';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'config',\n    'fullScreenManager',\n    'interactionIndicator',\n    'rootContainer',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _fullScreenManager: IFullScreenManager;\n  private _interactionIndicator: IInteractionIndicator;\n\n  private _delayedToggleVideoPlaybackTimeout: number;\n\n  private _isClickProcessingDisabled: boolean;\n  private _isInFullScreen: boolean;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    fullScreenManager,\n    interactionIndicator,\n    rootContainer,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    fullScreenManager: IFullScreenManager;\n    interactionIndicator: IInteractionIndicator;\n    rootContainer: IRootContainer;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._fullScreenManager = fullScreenManager;\n    this._interactionIndicator = interactionIndicator;\n\n    this._isInFullScreen = false;\n    this.isHidden = false;\n\n    this._delayedToggleVideoPlaybackTimeout = null;\n\n    const screenConfig = {\n      ...DEFAULT_CONFIG,\n      ...config.screen,\n    };\n\n    this._isClickProcessingDisabled = screenConfig.disableClickProcessing;\n\n    this._bindCallbacks();\n    this._initUI(screenConfig.nativeControls);\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.node);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._processNodeClick = this._processNodeClick.bind(this);\n    this._processNodeDblClick = this._processNodeDblClick.bind(this);\n    this._toggleVideoPlayback = this._toggleVideoPlayback.bind(this);\n  }\n\n  private _initUI(isNativeControls: boolean) {\n    const config: IScreenViewConfig = {\n      nativeControls: isNativeControls,\n      callbacks: {\n        onWrapperMouseClick: this._processNodeClick,\n        onWrapperMouseDblClick: this._processNodeDblClick,\n      },\n      playbackViewNode: this._engine.getNode(),\n    };\n\n    this.view = new View(config);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this._setFullScreenStatus],\n        [UI_EVENTS.PLAY_OVERLAY_TRIGGERED, this.view.focusOnNode, this.view],\n        [UI_EVENTS.RESIZE, this._updateBackgroundSize],\n        [EngineState.SRC_SET, this.view.resetBackground, this.view],\n        [EngineState.METADATA_LOADED, this.view.resetAspectRatio, this.view],\n      ],\n      this,\n    );\n  }\n\n  private _updateBackgroundSize({\n    width,\n    height,\n  }: {\n    width: number;\n    height: number;\n  }) {\n    this.view.setBackgroundSize(width, height);\n  }\n\n  showCursor() {\n    this.view.showCursor();\n  }\n\n  hideCursor() {\n    this.view.hideCursor();\n  }\n\n  private _setFullScreenStatus(isInFullScreen: boolean) {\n    this._isInFullScreen = isInFullScreen;\n  }\n\n  private _processNodeClick() {\n    if (this._isClickProcessingDisabled) {\n      return;\n    }\n\n    this._showPlaybackChangeIndicator();\n\n    if (!this._fullScreenManager.isEnabled) {\n      this._toggleVideoPlayback();\n    } else {\n      this._setDelayedPlaybackToggle();\n    }\n  }\n\n  private _processNodeDblClick() {\n    if (this._isClickProcessingDisabled) {\n      return;\n    }\n\n    if (this._fullScreenManager.isEnabled) {\n      if (this._isDelayedPlaybackToggleExist) {\n        this._clearDelayedPlaybackToggle();\n        this._hideDelayedPlaybackChangeIndicator();\n      }\n\n      this._toggleFullScreen();\n    }\n  }\n\n  private _showPlaybackChangeIndicator() {\n    const state = this._engine.getCurrentState();\n\n    if (state === EngineState.PLAY_REQUESTED || state === EngineState.PLAYING) {\n      this._interactionIndicator.showPause();\n    } else {\n      this._interactionIndicator.showPlay();\n    }\n  }\n\n  private _hideDelayedPlaybackChangeIndicator() {\n    this._interactionIndicator.hideIcons();\n  }\n\n  private _setDelayedPlaybackToggle() {\n    this._clearDelayedPlaybackToggle();\n\n    this._delayedToggleVideoPlaybackTimeout = window.setTimeout(\n      this._toggleVideoPlayback,\n      PLAYBACK_CHANGE_TIMEOUT,\n    );\n  }\n\n  private _clearDelayedPlaybackToggle() {\n    window.clearTimeout(this._delayedToggleVideoPlaybackTimeout);\n    this._delayedToggleVideoPlaybackTimeout = null;\n  }\n\n  private get _isDelayedPlaybackToggleExist() {\n    return Boolean(this._delayedToggleVideoPlaybackTimeout);\n  }\n\n  private _toggleVideoPlayback() {\n    this._clearDelayedPlaybackToggle();\n\n    const state = this._engine.getCurrentState();\n\n    if (state === EngineState.PLAY_REQUESTED || state === EngineState.PLAYING) {\n      this._eventEmitter.emit(UI_EVENTS.PAUSE_WITH_SCREEN_CLICK_TRIGGERED);\n      this._engine.pause();\n    } else {\n      this._eventEmitter.emit(UI_EVENTS.PLAY_WITH_SCREEN_CLICK_TRIGGERED);\n      this._engine.play();\n    }\n  }\n\n  private _toggleFullScreen() {\n    if (this._isInFullScreen) {\n      this._exitFullScreen();\n    } else {\n      this._enterFullScreen();\n    }\n  }\n\n  hide() {\n    if (!this.isHidden) {\n      this.view.hide();\n      this.isHidden = true;\n    }\n  }\n\n  show() {\n    if (this.isHidden) {\n      this.view.show();\n      this.isHidden = false;\n    }\n  }\n\n  @playerAPI()\n  setVideoViewMode(viewMode: VideoViewMode) {\n    this.view.setViewMode(viewMode);\n  }\n\n  private _enterFullScreen() {\n    this._fullScreenManager.enterFullScreen();\n  }\n\n  private _exitFullScreen() {\n    this._fullScreenManager.exitFullScreen();\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._clearDelayedPlaybackToggle();\n    this.view.destroy();\n    this.view = null;\n\n    this._interactionIndicator = null;\n    this._eventEmitter = null;\n    this._engine = null;\n    this._fullScreenManager = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport {\n  containerTemplate,\n  playIconTemplate,\n  pauseIconTemplate,\n  forwardIconTemplate,\n  rewindIconTemplate,\n  increaseVolumeIconTemplate,\n  decreaseVolumeIconTemplate,\n  muteIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\n\nimport { IInteractionIndicatorViewStyles } from './types';\n\nimport styles from './interaction-indicator.scss';\n\nconst SECONDS_COUNT = 5;\n\nclass InteractionIndicatorView extends View<IInteractionIndicatorViewStyles>\n  implements IView<IInteractionIndicatorViewStyles> {\n  private _$node: HTMLElement;\n\n  private _playIcon: string;\n  private _pauseIcon: string;\n  private _forwardIcon: string;\n  private _rewindIcon: string;\n  private _increaseVolumeIcon: string;\n  private _decreaseVolumeIcon: string;\n  private _muteIcon: string;\n\n  constructor() {\n    super();\n\n    this._$node = htmlToElement(\n      containerTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._playIcon = playIconTemplate({\n      styles: this.styleNames,\n    });\n    this._pauseIcon = pauseIconTemplate({\n      styles: this.styleNames,\n    });\n    this._forwardIcon = forwardIconTemplate({\n      texts: {\n        SECONDS_COUNT,\n      },\n      styles: this.styleNames,\n    });\n    this._rewindIcon = rewindIconTemplate({\n      texts: {\n        SECONDS_COUNT,\n      },\n      styles: this.styleNames,\n    });\n    this._increaseVolumeIcon = increaseVolumeIconTemplate({\n      styles: this.styleNames,\n    });\n    this._decreaseVolumeIcon = decreaseVolumeIconTemplate({\n      styles: this.styleNames,\n    });\n    this._muteIcon = muteIconTemplate({\n      styles: this.styleNames,\n    });\n  }\n\n  activatePlayIcon() {\n    this._$node.innerHTML = this._playIcon;\n  }\n\n  activatePauseIcon() {\n    this._$node.innerHTML = this._pauseIcon;\n  }\n\n  activateForwardIcon() {\n    this._$node.innerHTML = this._forwardIcon;\n  }\n\n  activateRewindIcon() {\n    this._$node.innerHTML = this._rewindIcon;\n  }\n\n  activateIncreaseVolumeIcon() {\n    this._$node.innerHTML = this._increaseVolumeIcon;\n  }\n\n  activateDecreaseVolumeIcon() {\n    this._$node.innerHTML = this._decreaseVolumeIcon;\n  }\n\n  activateMuteVolumeIcon() {\n    this._$node.innerHTML = this._muteIcon;\n  }\n\n  deactivateIcon() {\n    this._$node.innerHTML = '';\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nInteractionIndicatorView.extendStyleNames(styles);\n\nexport default InteractionIndicatorView;\n","import { UI_EVENTS, EngineState } from '../../../constants';\n\nimport View from './interaction-indicator.view';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IInteractionIndicator } from './types';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\n\nexport default class InteractionIndicator implements IInteractionIndicator {\n  static moduleName = 'interactionIndicator';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'config', 'rootContainer'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n\n  private _unbindEvents: Function;\n\n  view: View;\n\n  constructor({\n    eventEmitter,\n    engine,\n    config,\n    rootContainer,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    config: IPlayerConfig;\n    rootContainer: IRootContainer;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n\n    this._initUI();\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.showInteractionIndicator === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    this.view = new View();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n          this._showPlaybackChangeIndicator,\n        ],\n        [UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED, this.showRewind],\n        [UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED, this.showForward],\n        [\n          UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n          this.showIncreaseVolume,\n        ],\n        [\n          UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n          this.showDecreaseVolume,\n        ],\n        [UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED, this.showMute],\n        [\n          UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          this.showIncreaseVolume,\n        ],\n      ],\n      this,\n    );\n  }\n\n  showPause() {\n    this.view.activatePauseIcon();\n  }\n\n  showPlay() {\n    this.view.activatePlayIcon();\n  }\n\n  showRewind() {\n    this.view.activateRewindIcon();\n  }\n\n  showForward() {\n    this.view.activateForwardIcon();\n  }\n\n  showMute() {\n    this.view.activateMuteVolumeIcon();\n  }\n\n  showIncreaseVolume() {\n    this.view.activateIncreaseVolumeIcon();\n  }\n\n  showDecreaseVolume() {\n    this.view.activateDecreaseVolumeIcon();\n  }\n\n  hideIcons() {\n    this.view.deactivateIcon();\n    this._eventEmitter.emit(UI_EVENTS.HIDE_INTERACTION_INDICATOR_TRIGGERED);\n  }\n\n  show() {\n    this.view.hide();\n  }\n\n  hide() {\n    this.view.show();\n  }\n\n  private _showPlaybackChangeIndicator() {\n    const state = this._engine.getCurrentState();\n\n    if (state === EngineState.PLAY_REQUESTED || state === EngineState.PLAYING) {\n      this.view.activatePauseIcon();\n    } else {\n      this.view.activatePlayIcon();\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { overlayTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport {\n  IOverlayViewConfig,\n  IOverlayViewCallbacks,\n  IOverlayViewStyles,\n} from './types';\n\nimport overlayViewTheme from './overlay.theme';\nimport styles from './overlay.scss';\n\nclass OverlayView extends View<IOverlayViewStyles>\n  implements IView<IOverlayViewStyles> {\n  private _callbacks: IOverlayViewCallbacks;\n\n  private _$node: HTMLElement;\n  private _$content: HTMLElement;\n  private _$playButton: HTMLElement;\n\n  constructor(config: IOverlayViewConfig) {\n    super(config.theme);\n\n    const { callbacks, src } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n\n    this.setPoster(src);\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      overlayTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      }),\n    );\n\n    this._$content = getElementByHook(this._$node, 'overlay-content');\n    this._$playButton = getElementByHook(this._$node, 'overlay-play-button');\n  }\n\n  private _bindEvents() {\n    this._$playButton.addEventListener('click', this._callbacks.onPlayClick);\n  }\n\n  private _unbindEvents() {\n    this._$playButton.removeEventListener('click', this._callbacks.onPlayClick);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.active);\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.active);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  setPoster(src: string) {\n    this._$content.style.backgroundImage = src ? `url('${src}')` : 'none';\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$content = null;\n    this._$playButton = null;\n  }\n}\n\nOverlayView.setTheme(overlayViewTheme);\nOverlayView.extendStyleNames(styles);\n\nexport default OverlayView;\n","export default {\n  overlayPlaySvgFill: {\n    fill: (data: any) => data.color,\n  },\n  overlayPlaySvgStroke: {\n    stroke: (data: any) => data.color,\n  },\n};\n","import { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../constants';\n\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport View from './overlay.view';\nimport { IOverlay, IOverlayConfig, IOverlayViewConfig } from './types';\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IThemeService } from '../core/theme';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\n\nexport default class Overlay implements IOverlay {\n  static moduleName = 'overlay';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'config',\n    'rootContainer',\n    'theme',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _theme: IThemeService;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean = false;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    rootContainer,\n    theme,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    rootContainer: IRootContainer;\n    theme: IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._theme = theme;\n\n    this._bindEvents();\n    this._initUI(config.overlay);\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.overlay === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(overlayConfig: IOverlayConfig | boolean) {\n    const poster: string =\n      typeof overlayConfig === 'object' ? overlayConfig.poster : null;\n    const viewConfig: IOverlayViewConfig = {\n      callbacks: {\n        onPlayClick: this._playVideo.bind(this),\n      },\n      src: poster,\n      theme: this._theme,\n    };\n\n    this.view = new Overlay.View(viewConfig);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._updatePlayingStatus],\n        [VIDEO_EVENTS.RESET, this._tryShowContent],\n      ],\n      this,\n    );\n  }\n\n  private _updatePlayingStatus({ nextState }: { nextState: EngineState }) {\n    if (nextState === EngineState.PLAY_REQUESTED) {\n      this._hideContent();\n    } else if (\n      nextState === EngineState.ENDED ||\n      nextState === EngineState.SRC_SET\n    ) {\n      this._tryShowContent();\n    }\n  }\n\n  private _playVideo() {\n    this._engine.play();\n\n    this._eventEmitter.emit(UI_EVENTS.PLAY_OVERLAY_TRIGGERED);\n  }\n\n  private _tryShowContent() {\n    if (this._engine.isVideoPaused) {\n      this._showContent();\n    }\n  }\n\n  private _hideContent() {\n    this.view.hideContent();\n  }\n\n  private _showContent() {\n    this.view.showContent();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  /**\n   * Method for setting overlay poster\n   * @param src - Source of image\n   * @example\n   * player.setPoster('https://example.com/poster.png');\n   *\n   */\n  @playerAPI()\n  setPoster(src: string) {\n    this.view.setPoster(src);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import { IView } from '../core/types';\nimport View from '../core/view';\n\nimport { loaderTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\n\nimport { ILoaderViewStyles } from './types';\n\nimport styles from './loader.scss';\n\nclass LoaderView extends View<ILoaderViewStyles>\n  implements IView<ILoaderViewStyles> {\n  private _$node: HTMLElement;\n\n  constructor() {\n    super();\n\n    this._$node = htmlToElement(\n      loaderTemplate({\n        styles: this.styleNames,\n      }),\n    );\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.active);\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.active);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nLoaderView.extendStyleNames(styles);\n\nexport default LoaderView;\n","import { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../constants';\n\nimport View from './loader.view';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\n\nexport const DELAYED_SHOW_TIMEOUT = 100;\n\nexport default class Loader {\n  static moduleName = 'loader';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'config', 'rootContainer'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n\n  private _delayedShowTimeout: number;\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    rootContainer,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    rootContainer: IRootContainer;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this.isHidden = false;\n    this._engine = engine;\n\n    this._bindCallbacks();\n\n    this._initUI();\n    this._bindEvents();\n    this._hideContent();\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.loader === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._showContent = this._showContent.bind(this);\n    this._hideContent = this._hideContent.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._checkForWaitingState],\n        [VIDEO_EVENTS.UPLOAD_SUSPEND, this.hide],\n      ],\n      this,\n    );\n  }\n\n  private _checkForWaitingState({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.SEEK_IN_PROGRESS:\n        this.startDelayedShow();\n        break;\n      case EngineState.WAITING:\n        this.startDelayedShow();\n        break;\n      case EngineState.LOAD_STARTED:\n        if (this._engine.isPreloadAvailable) {\n          this._showContent();\n        }\n        break;\n      case EngineState.READY_TO_PLAY:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n      case EngineState.PLAYING:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n      case EngineState.PAUSED:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n\n      /* ignore coverage */\n      default:\n        break;\n    }\n  }\n\n  private _initUI() {\n    this.view = new Loader.View();\n  }\n\n  private _showContent() {\n    if (this.isHidden) {\n      this._eventEmitter.emit(UI_EVENTS.LOADER_SHOW_TRIGGERED);\n      this.view.showContent();\n      this.isHidden = false;\n    }\n  }\n\n  private _hideContent() {\n    if (!this.isHidden) {\n      this._eventEmitter.emit(UI_EVENTS.LOADER_HIDE_TRIGGERED);\n      this.view.hideContent();\n      this.isHidden = true;\n    }\n  }\n\n  hide() {\n    this.view.hide();\n  }\n\n  show() {\n    this.view.show();\n  }\n\n  startDelayedShow() {\n    if (this.isDelayedShowScheduled) {\n      this.stopDelayedShow();\n    }\n    this._delayedShowTimeout = window.setTimeout(\n      this._showContent,\n      DELAYED_SHOW_TIMEOUT,\n    );\n  }\n\n  stopDelayedShow() {\n    window.clearTimeout(this._delayedShowTimeout);\n    this._delayedShowTimeout = null;\n  }\n\n  get isDelayedShowScheduled() {\n    return Boolean(this._delayedShowTimeout);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.stopDelayedShow();\n\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { mainUIBlockTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport styles from './main-ui-block.scss';\n\nimport {\n  IMainUIBlockViewStyles,\n  IMainUIBlockViewConfig,\n  IMainUIBlockViewElements,\n} from './types';\n\nclass MainUIBlockView extends View<IMainUIBlockViewStyles>\n  implements IView<IMainUIBlockViewStyles> {\n  private _$node: HTMLElement;\n\n  constructor(config: IMainUIBlockViewConfig) {\n    super();\n\n    this._initDOM(config.elements);\n  }\n\n  private _initDOM(elements: IMainUIBlockViewElements) {\n    this._$node = htmlToElement(\n      mainUIBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $tooltipContainerWrapper = document.createElement('div');\n    $tooltipContainerWrapper.classList.add(\n      this.styleNames.tooltipContainerWrapper,\n    );\n    $tooltipContainerWrapper.appendChild(elements.tooltipContainer);\n\n    this._$node.appendChild(elements.topBlock);\n    this._$node.appendChild($tooltipContainerWrapper);\n    this._$node.appendChild(elements.bottomBlock);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nMainUIBlockView.extendStyleNames(styles);\n\nexport { IMainUIBlockViewConfig };\n\nexport default MainUIBlockView;\n","import { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../constants';\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport MainUIBlockView from './main-ui-block.view';\n\nimport {\n  IMainUIBlock,\n  IMainUIBlockConfig,\n  IMainUIBlockViewElements,\n} from './types';\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IBottomBlock } from '../bottom-block/types';\nimport { ITopBlock } from '../top-block/types';\nimport { IScreen } from '../screen/types';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\nimport { ITooltipService } from '../core/tooltip/tooltip-service';\n\nconst HIDE_BLOCK_TIMEOUT = 2000;\n\nconst DEFAULT_CONFIG: IMainUIBlockConfig = {\n  shouldAlwaysShow: false,\n};\n\nexport default class MainUIBlock implements IMainUIBlock {\n  static moduleName = 'mainUIBlock';\n  static View = MainUIBlockView;\n  static dependencies = [\n    'config',\n    'screen',\n    'rootContainer',\n    'tooltipService',\n    'eventEmitter',\n    'topBlock',\n    'bottomBlock',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _bottomBlock: IBottomBlock;\n  private _topBlock: ITopBlock;\n  private _screen: IScreen;\n\n  private _hideTimeout: number = null;\n\n  private _isContentShowingEnabled: boolean = true;\n  private _isContentShown: boolean = false;\n  private _shouldShowContent: boolean = true;\n  private _shouldAlwaysShow: boolean = false;\n  private _isDragging: boolean = false;\n\n  private _unbindEvents: Function;\n\n  view: MainUIBlockView;\n  isHidden: boolean;\n\n  constructor(dependencies: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    rootContainer: IRootContainer;\n    tooltipService: ITooltipService;\n    topBlock: ITopBlock;\n    bottomBlock: IBottomBlock;\n    screen: IScreen;\n  }) {\n    const {\n      config,\n      eventEmitter,\n      rootContainer,\n      tooltipService,\n      topBlock,\n      bottomBlock,\n      screen,\n    } = dependencies;\n\n    this._eventEmitter = eventEmitter;\n    this._topBlock = topBlock;\n    this._bottomBlock = bottomBlock;\n    this._screen = screen;\n\n    this.isHidden = false;\n    const mainBlockConfig = {\n      ...DEFAULT_CONFIG,\n      ...(typeof config.controls === 'object' ? config.controls : null),\n    };\n\n    this._shouldAlwaysShow = mainBlockConfig.shouldAlwaysShow;\n\n    this._initUI({\n      tooltipContainer: tooltipService.tooltipContainerNode,\n      topBlock: topBlock.node,\n      bottomBlock: bottomBlock.node,\n    });\n    this._bindViewCallbacks();\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.view.getNode());\n\n    if (config.controls === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(elements: IMainUIBlockViewElements) {\n    this.view = new MainUIBlock.View({ elements });\n  }\n\n  private _bindViewCallbacks() {\n    this._startHideBlockTimeout = this._startHideBlockTimeout.bind(this);\n    this._tryShowContent = this._tryShowContent.bind(this);\n    this._tryHideContent = this._tryHideContent.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED, this._startHideBlockTimeout],\n        [UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED, this._tryHideContent],\n        [UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED, this._startHideBlockTimeout],\n        [UI_EVENTS.LOADER_HIDE_TRIGGERED, this._startHideBlockTimeout],\n        [VIDEO_EVENTS.STATE_CHANGED, this._updatePlayingStatus],\n        [UI_EVENTS.CONTROL_DRAG_START, this._onControlDragStart],\n        [UI_EVENTS.CONTROL_DRAG_END, this._onControlDragEnd],\n      ],\n      this,\n    );\n  }\n\n  private _updatePlayingStatus({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.PLAY_REQUESTED: {\n        this._shouldShowContent = false;\n        this._startHideBlockTimeout();\n        break;\n      }\n      case EngineState.ENDED: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      case EngineState.PAUSED: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      case EngineState.SRC_SET: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  private get _isBlockFocused() {\n    return this._bottomBlock.isFocused;\n  }\n\n  private _startHideBlockTimeout() {\n    this._stopHideBlockTimeout();\n\n    this._tryShowContent();\n\n    this._hideTimeout = window.setTimeout(\n      this._tryHideContent,\n      HIDE_BLOCK_TIMEOUT,\n    );\n  }\n\n  private _stopHideBlockTimeout() {\n    if (this._hideTimeout) {\n      window.clearTimeout(this._hideTimeout);\n    }\n  }\n\n  private _tryShowContent() {\n    if (this._isContentShowingEnabled) {\n      this._showContent();\n    }\n  }\n\n  private _onControlDragStart() {\n    this._isDragging = true;\n  }\n\n  private _onControlDragEnd() {\n    this._isDragging = false;\n    this._tryHideContent();\n  }\n\n  private _showContent() {\n    if (this.isHidden || this._isContentShown) {\n      return;\n    }\n\n    this._screen.showCursor();\n\n    this._eventEmitter.emit((UI_EVENTS as any).MAIN_BLOCK_SHOW_TRIGGERED);\n    this._bottomBlock.showContent();\n    this._topBlock.showContent();\n    this._isContentShown = true;\n  }\n\n  private _tryHideContent() {\n    if (\n      !this._isBlockFocused &&\n      !this._isDragging &&\n      !this._shouldShowContent &&\n      !this._shouldAlwaysShow\n    ) {\n      this._hideContent();\n    }\n  }\n\n  private _hideContent() {\n    if (this.isHidden || !this._isContentShown) {\n      return;\n    }\n\n    if (this._isContentShowingEnabled) {\n      this._screen.hideCursor();\n    }\n\n    this._eventEmitter.emit((UI_EVENTS as any).MAIN_BLOCK_HIDE_TRIGGERED);\n    this._bottomBlock.hideContent();\n    this._topBlock.hideContent();\n    this._isContentShown = false;\n  }\n\n  disableShowingContent() {\n    this._isContentShowingEnabled = false;\n    this._hideContent();\n  }\n\n  enableShowingContent() {\n    this._isContentShowingEnabled = true;\n    if (this._shouldShowContent) {\n      this._showContent();\n    }\n  }\n\n  hide() {\n    this.isHidden = true;\n    this._topBlock.hide();\n    this._bottomBlock.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this._topBlock.show();\n    this._bottomBlock.show();\n  }\n\n  /**\n   * Method for allowing bottom block to be always shown.\n   * @param flag - `true` for showing always\n   * @example\n   * player.setControlsShouldAlwaysShow(true);\n   *\n   */\n  @playerAPI('setControlsShouldAlwaysShow')\n  setShouldAlwaysShow(flag: boolean) {\n    this._shouldAlwaysShow = flag;\n\n    if (this._shouldAlwaysShow) {\n      this._tryShowContent();\n    } else {\n      this._startHideBlockTimeout();\n    }\n  }\n\n  destroy() {\n    this._stopHideBlockTimeout();\n    this._unbindEvents();\n    this.view.destroy();\n\n    this.view = null;\n    this._eventEmitter = null;\n    this._topBlock = null;\n    this._bottomBlock = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport { topBlockTemplate } from './templates';\n\nimport {\n  ITopBlockViewStyles,\n  ITopBlockViewConfig,\n  ITopBlockViewElements,\n} from './types';\n\nimport styles from './top-block.scss';\n\nclass TopBlockView extends View<ITopBlockViewStyles>\n  implements IView<ITopBlockViewStyles> {\n  private _$node: HTMLElement;\n\n  constructor(config: ITopBlockViewConfig) {\n    super();\n    const { elements } = config;\n\n    this._initDOM(elements);\n    this._bindEvents();\n  }\n\n  private _initDOM(elements: ITopBlockViewElements) {\n    this._$node = htmlToElement(\n      topBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $titleContainer = getElementByHook(this._$node, 'title-container');\n    const $liveIndicatorContainer = getElementByHook(\n      this._$node,\n      'live-indicator-container',\n    );\n\n    $titleContainer.appendChild(elements.title);\n    $liveIndicatorContainer.appendChild(elements.liveIndicator);\n  }\n\n  private _preventClickPropagation(e: MouseEvent) {\n    e.stopPropagation();\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._preventClickPropagation);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._preventClickPropagation);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.activated);\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.activated);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nTopBlockView.extendStyleNames(styles);\n\nexport default TopBlockView;\n","import View from './top-block.view';\n\nimport { ILiveIndicator } from '../live-indicator/types';\nimport { ITitle } from '../title/types';\nimport { ITopBlock, ITopBlockViewConfig, ITopBlockViewElements } from './types';\n\ninterface IDependencies {\n  title: ITitle;\n  liveIndicator: ILiveIndicator;\n}\n\nexport default class TopBlock implements ITopBlock {\n  static moduleName = 'topBlock';\n  static View = View;\n  static dependencies = ['title', 'liveIndicator'];\n\n  isHidden: boolean;\n  view: View;\n\n  constructor(dependencies: IDependencies) {\n    this.isHidden = false;\n\n    this._initUI(this._getElementsNodes(dependencies));\n  }\n\n  private _initUI(elementNodes: ITopBlockViewElements) {\n    const config: ITopBlockViewConfig = {\n      elements: elementNodes,\n    };\n\n    this.view = new TopBlock.View(config);\n  }\n\n  private _getElementsNodes(\n    dependencies: IDependencies,\n  ): ITopBlockViewElements {\n    const { title, liveIndicator } = dependencies;\n\n    return {\n      title: title.node,\n      liveIndicator: liveIndicator.node,\n    };\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  showContent() {\n    this.view.showContent();\n  }\n\n  hideContent() {\n    this.view.hideContent();\n  }\n\n  destroy() {\n    this.view.destroy();\n    this.view = null;\n  }\n}\n","import View from '../core/view';\n\nimport { titleTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  ITitleViewStyles,\n  ITitleViewCallbacks,\n  ITitleViewConfig,\n} from './types';\nimport { IView } from '../core/types';\n\nimport titleViewTheme from './title.theme';\nimport styles from './title.scss';\n\nclass TitleView extends View<ITitleViewStyles>\n  implements IView<ITitleViewStyles> {\n  private _callbacks: ITitleViewCallbacks;\n\n  private _$node: HTMLElement;\n  _$title: HTMLElement;\n\n  constructor(config: ITitleViewConfig) {\n    const { callbacks, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      titleTemplate({ styles: this.styleNames, themeStyles: this.themeStyles }),\n    );\n    this._$title = getElementByHook(this._$node, 'video-title');\n  }\n\n  private _bindEvents() {\n    this._$title.addEventListener('click', this._callbacks.onClick);\n  }\n\n  private _unbindEvents() {\n    this._$title.removeEventListener('click', this._callbacks.onClick);\n  }\n\n  setDisplayAsLink(flag: boolean) {\n    toggleNodeClass(this._$title, this.styleNames.link, flag);\n  }\n\n  setTitle(title?: string) {\n    // TODO: mb move this logic to controller? title.isHidden is out of control of this method\n    // TODO: what if we call with empty value `.setTitle('')` and then call `.show()` method? Mb clear value anyway?\n    if (title) {\n      this.show();\n      this._$title.innerHTML = title;\n    } else {\n      this.hide();\n    }\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$title = null;\n  }\n}\n\nTitleView.setTheme(titleViewTheme);\nTitleView.extendStyleNames(styles);\n\nexport default TitleView;\n","export default {\n  titleText: {\n    color: (data: any) => data.color,\n  },\n};\n","import View from './title.view';\n\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport { IThemeService } from '../core/theme';\nimport { ITitle, ITitleViewConfig } from './types';\nimport { IPlayerConfig } from '../../../core/config';\n\nexport default class TitleControl implements ITitle {\n  static moduleName = 'title';\n  static View = View;\n  static dependencies = ['config', 'theme'];\n\n  private _callback: Function;\n  private _theme: IThemeService;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    theme,\n  }: {\n    config: IPlayerConfig;\n    theme: IThemeService;\n  }) {\n    this._theme = theme;\n\n    this._bindCallbacks();\n    this._initUI();\n    if (typeof config.title === 'object') {\n      this.setTitleClickCallback(config.title.callback || null);\n      this.setTitle(config.title.text);\n    } else if (config.title === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._triggerCallback = this._triggerCallback.bind(this);\n  }\n\n  private _initUI() {\n    const config: ITitleViewConfig = {\n      theme: this._theme,\n      callbacks: {\n        onClick: this._triggerCallback,\n      },\n    };\n\n    this.view = new TitleControl.View(config);\n\n    this.view.setTitle();\n  }\n\n  /**\n   * Display title text over the video. If you want to have clickable title, use `setTitleClickCallback`\n   *\n   * @param title - Text for the video title\n   *\n   * @example\n   * player.setTitle('Your awesome video title here');\n   *\n   * @note\n   * [Live Demo](https://jsfiddle.net/bodia/243k6m0u/)\n   */\n  @playerAPI()\n  setTitle(title?: string) {\n    this.view.setTitle(title);\n  }\n\n  /**\n   * Method for attaching callback for click on title\n   *\n   * @param callback - Your function\n   *\n   * @example\n   * const callback = () => {\n   *   console.log('Click on title);\n   * }\n   * player.setTitleClickCallback(callback);\n   *\n   */\n  @playerAPI()\n  setTitleClickCallback(callback?: Function) {\n    this._callback = callback;\n    this.view.setDisplayAsLink(Boolean(this._callback));\n  }\n\n  private _triggerCallback() {\n    if (this._callback) {\n      this._callback();\n    }\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this.view.destroy();\n    this.view = null;\n  }\n}\n","import { ITooltipReference, ITooltipService } from '../core/tooltip/types';\nimport { IView } from '../core/types';\nimport View from '../core/view';\n\nimport { liveIndicatorTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  ILiveIndicatorViewStyles,\n  ILiveIndicatorViewCallbacks,\n  ILiveIndicatorViewConfig,\n} from './types';\nimport { ITextMap } from '../../text-map/types';\n\nimport styles from './live-indicator.scss';\n\nimport { TEXT_LABELS } from '../../../constants';\n\nclass LiveIndicatorView extends View<ILiveIndicatorViewStyles>\n  implements IView<ILiveIndicatorViewStyles> {\n  private _callbacks: ILiveIndicatorViewCallbacks;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _tooltipReference: ITooltipReference;\n\n  private _$node: HTMLElement;\n  private _$liveIndicatorText: HTMLElement;\n\n  constructor(config: ILiveIndicatorViewConfig) {\n    super();\n\n    this._callbacks = config.callbacks;\n    this._textMap = config.textMap;\n    this._tooltipService = config.tooltipService;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      liveIndicatorTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n        texts: {},\n      }),\n    );\n\n    this._$liveIndicatorText = getElementByHook(\n      this._$node,\n      'live-indicator-text',\n    );\n\n    this._tooltipReference = this._tooltipService.createReference(this._$node, {\n      text: this._textMap.get(TEXT_LABELS.LIVE_SYNC_TOOLTIP),\n    });\n\n    // NOTE: LIVE indicator is hidden and inactive by default\n    this.toggle(false);\n    this.toggleActive(false);\n    this.toggleEnded(false);\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._callbacks.onClick);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._callbacks.onClick);\n  }\n\n  toggleActive(shouldActivate: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.active, shouldActivate);\n\n    // NOTE: disable tooltip while video is sync with live\n    if (shouldActivate) {\n      this._tooltipReference.disable();\n    } else {\n      this._tooltipReference.enable();\n    }\n  }\n\n  toggleEnded(isEnded: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.ended, isEnded);\n\n    this._$liveIndicatorText.innerText = this._textMap.get(\n      TEXT_LABELS.LIVE_INDICATOR_TEXT,\n      { isEnded },\n    );\n    this._$liveIndicatorText.setAttribute(\n      'aria-label',\n      !isEnded ? this._textMap.get(TEXT_LABELS.LIVE_SYNC_LABEL) : '',\n    );\n\n    if (isEnded) {\n      this._tooltipReference.disable();\n    } else {\n      this._tooltipReference.enable();\n    }\n  }\n\n  show() {\n    this.toggle(true);\n  }\n\n  hide() {\n    this.toggle(false);\n  }\n\n  toggle(shouldShow: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.hidden, !shouldShow);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$liveIndicatorText = null;\n    this._callbacks = null;\n    this._textMap = null;\n  }\n}\n\nLiveIndicatorView.extendStyleNames(styles);\n\nexport default LiveIndicatorView;\n","import { ITooltipService } from '../core/tooltip/types';\nimport LiveIndicatorView from './live-indicator.view';\nimport { VIDEO_EVENTS, UI_EVENTS, LiveState } from '../../../constants';\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { ITextMap } from '../../text-map/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { ILiveIndicator } from './types';\n\nexport default class LiveIndicator implements ILiveIndicator {\n  static moduleName = 'liveIndicator';\n  static View = LiveIndicatorView;\n  static dependencies = ['engine', 'eventEmitter', 'textMap', 'tooltipService'];\n\n  private _engine: IPlaybackEngine;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _isHidden: boolean = true;\n  private _isActive: boolean = false;\n  private _isEnded: boolean = false;\n\n  private _unbindEvents: Function;\n\n  view: LiveIndicatorView;\n\n  constructor({\n    engine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n  }: {\n    engine: IPlaybackEngine;\n    eventEmitter: IEventEmitter;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n  }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  get isHidden(): boolean {\n    return this._isHidden;\n  }\n\n  get isActive(): boolean {\n    return this._isActive;\n  }\n\n  show() {\n    this._toggle(true);\n  }\n\n  hide() {\n    this._toggle(false);\n  }\n\n  private _initUI() {\n    this.view = new LiveIndicator.View({\n      callbacks: {\n        onClick: this._syncWithLive,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    });\n  }\n\n  private _bindCallbacks() {\n    this._syncWithLive = this._syncWithLive.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processStateChange],\n        [\n          UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED,\n          () => {\n            this.view.toggleActive(true);\n          },\n        ],\n        [\n          UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED,\n          () => {\n            // NOTE: restore state before mouse enter\n            this.view.toggleActive(this._isActive);\n          },\n        ],\n      ],\n      this,\n    );\n  }\n\n  private _processStateChange({ nextState }: { nextState: LiveState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this._toggle(false);\n        this._toggleActive(false);\n        this._toggleEnded(false);\n        break;\n\n      case LiveState.INITIAL:\n        this._toggle(true);\n        break;\n\n      case LiveState.SYNC:\n        this._toggleActive(true);\n        break;\n\n      case LiveState.NOT_SYNC:\n        this._toggleActive(false);\n        break;\n\n      case LiveState.ENDED:\n        this._toggleActive(false);\n        this._toggleEnded(true);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _syncWithLive() {\n    if (!this._isEnded) {\n      this._engine.syncWithLive();\n    }\n  }\n\n  private _toggle(shouldShow: boolean) {\n    this._isHidden = !shouldShow;\n    this.view.toggle(shouldShow);\n  }\n\n  private _toggleActive(shouldActivate: boolean) {\n    this._isActive = shouldActivate;\n    this.view.toggleActive(shouldActivate);\n  }\n\n  private _toggleEnded(isEnded: boolean) {\n    this._isEnded = isEnded;\n    this.view.toggleEnded(isEnded);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n\n    this.view = null;\n\n    this._engine = null;\n    this._eventEmitter = null;\n    this._textMap = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport { bottomBlockTemplate } from './templates';\n\nimport {\n  IBottomBlockViewStyles,\n  IBottomBlockViewCallbacks,\n  IBottomBlockViewElements,\n  IBottomBlockViewConfig,\n} from './types';\n\nimport styles from './bottom-block.scss';\n\nclass BottomBlockView extends View<IBottomBlockViewStyles>\n  implements IView<IBottomBlockViewStyles> {\n  private _callbacks: IBottomBlockViewCallbacks;\n  private _$node: HTMLElement;\n\n  constructor(config: IBottomBlockViewConfig) {\n    super();\n    const { callbacks, elements } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM(elements);\n    this._bindEvents();\n  }\n\n  private _initDOM(elements: IBottomBlockViewElements) {\n    this._$node = htmlToElement(\n      bottomBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $playContainer = getElementByHook(this._$node, 'play-container');\n    const $volumeContainer = getElementByHook(this._$node, 'volume-container');\n    const $timeContainer = getElementByHook(this._$node, 'time-container');\n    const $fullScreenContainer = getElementByHook(\n      this._$node,\n      'full-screen-container',\n    );\n    const $logoContainer = getElementByHook(this._$node, 'logo-container');\n    const $progressBarContainer = getElementByHook(\n      this._$node,\n      'progress-bar-container',\n    );\n\n    $playContainer.appendChild(elements.play);\n    $volumeContainer.appendChild(elements.volume);\n    $timeContainer.appendChild(elements.time);\n    $fullScreenContainer.appendChild(elements.fullScreen);\n    $logoContainer.appendChild(elements.logo);\n    $progressBarContainer.appendChild(elements.progress);\n  }\n\n  private _preventClickPropagation(e: MouseEvent) {\n    e.stopPropagation();\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._preventClickPropagation);\n    this._$node.addEventListener('mousemove', this._callbacks.onBlockMouseMove);\n    this._$node.addEventListener('mouseleave', this._callbacks.onBlockMouseOut);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._preventClickPropagation);\n    this._$node.removeEventListener(\n      'mousemove',\n      this._callbacks.onBlockMouseMove,\n    );\n    this._$node.removeEventListener(\n      'mouseleave',\n      this._callbacks.onBlockMouseOut,\n    );\n  }\n\n  setShouldLogoShowAlwaysFlag(isShowAlways: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.showLogoAlways, isShowAlways);\n    this.showLogo();\n  }\n\n  showPlayControl() {\n    this._$node.classList.remove(this.styleNames.playControlHidden);\n  }\n\n  hidePlayControl() {\n    this._$node.classList.add(this.styleNames.playControlHidden);\n  }\n\n  showTimeControl() {\n    this._$node.classList.remove(this.styleNames.timeControlHidden);\n  }\n\n  hideTimeControl() {\n    this._$node.classList.add(this.styleNames.timeControlHidden);\n  }\n\n  showVolumeControl() {\n    this._$node.classList.remove(this.styleNames.volumeControlHidden);\n  }\n\n  hideVolumeControl() {\n    this._$node.classList.add(this.styleNames.volumeControlHidden);\n  }\n\n  showFullScreenControl() {\n    this._$node.classList.remove(this.styleNames.fullScreenControlHidden);\n  }\n\n  hideFullScreenControl() {\n    this._$node.classList.add(this.styleNames.fullScreenControlHidden);\n  }\n\n  showLogo() {\n    this._$node.classList.remove(this.styleNames.logoHidden);\n  }\n\n  hideLogo() {\n    this._$node.classList.add(this.styleNames.logoHidden);\n  }\n\n  showProgressControl() {\n    this._$node.classList.remove(this.styleNames.progressControlHidden);\n  }\n\n  hideProgressControl() {\n    this._$node.classList.add(this.styleNames.progressControlHidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.activated);\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.activated);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n    this._$node = null;\n  }\n}\n\nBottomBlockView.extendStyleNames(styles);\n\nexport default BottomBlockView;\n","import playerAPI from '../../../core/player-api-decorator';\n\nimport View from './bottom-block.view';\nimport { UI_EVENTS } from '../../../constants';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlayControl } from '../controls/play/types';\nimport { ITimeControl } from '../controls/time/types';\nimport { IProgressControl } from '../controls/progress/types';\nimport { IVolumeControl } from '../controls/volume/types';\nimport { IFullScreenControl } from '../controls/full-screen/types';\nimport { ILogoControl, ILogoConfig } from '../controls/logo/types';\n\nimport {\n  IBottomBlock,\n  IBottomBlockViewConfig,\n  IBottomBlockViewElements,\n} from './types';\nimport { IPlayerConfig } from '../../../core/config';\n\ninterface IDependencies {\n  config: IPlayerConfig;\n  eventEmitter: IEventEmitter;\n  playControl: IPlayControl;\n  progressControl: IProgressControl;\n  timeControl: ITimeControl;\n  volumeControl: IVolumeControl;\n  fullScreenControl: IFullScreenControl;\n  logo: ILogoControl;\n}\n\nexport default class BottomBlock implements IBottomBlock {\n  static moduleName = 'bottomBlock';\n  static View = View;\n  static dependencies = [\n    'config',\n    'playControl',\n    'progressControl',\n    'timeControl',\n    'volumeControl',\n    'fullScreenControl',\n    'logo',\n    'eventEmitter',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n\n  private _isBlockFocused: boolean = false;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean = false;\n\n  constructor(dependencies: IDependencies) {\n    const { config, eventEmitter } = dependencies;\n    this._eventEmitter = eventEmitter;\n\n    this._bindViewCallbacks();\n    this._initUI(this._getElementsNodes(dependencies));\n    this._initLogo(config.logo);\n    this._bindEvents();\n  }\n\n  private _getElementsNodes(\n    dependencies: IDependencies,\n  ): IBottomBlockViewElements {\n    const {\n      playControl,\n      progressControl,\n      timeControl,\n      volumeControl,\n      fullScreenControl,\n      logo,\n    } = dependencies;\n\n    return {\n      play: playControl.node,\n      progress: progressControl.node,\n      time: timeControl.node,\n      volume: volumeControl.node,\n      fullScreen: fullScreenControl.node,\n      logo: logo.node,\n    };\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(elementNodes: IBottomBlockViewElements) {\n    const config: IBottomBlockViewConfig = {\n      elements: elementNodes,\n      callbacks: {\n        onBlockMouseMove: this._setFocusState,\n        onBlockMouseOut: this._removeFocusState,\n      },\n    };\n\n    this.view = new BottomBlock.View(config);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this._removeFocusState]],\n      this,\n    );\n  }\n\n  private _initLogo(logoConfig: ILogoConfig | boolean) {\n    if (logoConfig) {\n      if (typeof logoConfig === 'object') {\n        this.setLogoAlwaysShowFlag(logoConfig.showAlways);\n      }\n    } else {\n      this.hideLogo();\n    }\n  }\n\n  private _bindViewCallbacks() {\n    this._setFocusState = this._setFocusState.bind(this);\n    this._removeFocusState = this._removeFocusState.bind(this);\n  }\n\n  private _setFocusState() {\n    this._isBlockFocused = true;\n  }\n\n  private _removeFocusState() {\n    this._isBlockFocused = false;\n  }\n\n  get isFocused() {\n    return this._isBlockFocused;\n  }\n\n  showContent() {\n    this.view.showContent();\n  }\n\n  hideContent() {\n    this.view.hideContent();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  /**\n   * Method for allowing logo to be always shown in bottom block\n   * @param flag - `true` for showing always\n   * @example\n   * player.setLogoAlwaysShowFlag(true);\n   *\n   */\n  @playerAPI()\n  setLogoAlwaysShowFlag(flag: boolean) {\n    this.view.setShouldLogoShowAlwaysFlag(flag);\n  }\n\n  /**\n   * Method for hidding logo. If you use `setLogoAlwaysShowFlag` or `setControlsShouldAlwaysShow`, logo would automaticaly appear.\n   * @example\n   * player.hideLogo();\n   */\n  @playerAPI()\n  hideLogo() {\n    this.view.hideLogo();\n  }\n\n  /**\n   * Method for showing logo.\n   * @example\n   * player.showLogo();\n   */\n  @playerAPI()\n  showLogo() {\n    this.view.showLogo();\n  }\n\n  /**\n   * Method for showing play control.\n   * @example\n   * player.showPlayControl();\n   */\n  @playerAPI()\n  showPlayControl() {\n    this.view.showPlayControl();\n  }\n\n  /**\n   * Method for showing volume control.\n   * @example\n   * player.showVolumeControl();\n   */\n  @playerAPI()\n  showVolumeControl() {\n    this.view.showVolumeControl();\n  }\n\n  /**\n   * Method for showing time control.\n   * @example\n   * player.showTimeControl();\n   */\n  @playerAPI()\n  showTimeControl() {\n    this.view.showTimeControl();\n  }\n\n  /**\n   * Method for showing full screen control.\n   * @example\n   * player.showFullScreenControl();\n   */\n  @playerAPI()\n  showFullScreenControl() {\n    this.view.showFullScreenControl();\n  }\n\n  /**\n   * Method for showing progress control.\n   * @example\n   * player.showProgressControl();\n   */\n  @playerAPI()\n  showProgressControl() {\n    this.view.showProgressControl();\n  }\n\n  /**\n   * Method for hidding play control.\n   * @example\n   * player.hidePlayControl();\n   */\n  @playerAPI()\n  hidePlayControl() {\n    this.view.hidePlayControl();\n  }\n\n  /**\n   * Method for hidding voluem control.\n   * @example\n   * player.hideVolumeControl();\n   */\n  @playerAPI()\n  hideVolumeControl() {\n    this.view.hideVolumeControl();\n  }\n\n  /**\n   * Method for hidding time control.\n   * @example\n   * player.hideTimeControl();\n   */\n  @playerAPI()\n  hideTimeControl() {\n    this.view.hideTimeControl();\n  }\n\n  /**\n   * Method for hidding full screen control.\n   * @example\n   * player.hideFullScreenControl();\n   */\n  @playerAPI()\n  hideFullScreenControl() {\n    this.view.hideFullScreenControl();\n  }\n\n  /**\n   * Method for hidding progress control.\n   * @example\n   * player.hideProgressControl();\n   */\n  @playerAPI()\n  hideProgressControl() {\n    this.view.hideProgressControl();\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n\n    this.view = null;\n    this._eventEmitter = null;\n  }\n}\n","function formatTime(seconds: number): string {\n  const isValid = !isNaN(seconds) && isFinite(seconds);\n  const isNegative = isValid && seconds < 0;\n  const date = new Date(null);\n\n  date.setSeconds(isValid ? Math.abs(Math.floor(seconds)) : 0);\n\n  // get HH:mm:ss part, remove hours if they are \"00:\"\n  const time = date\n    .toISOString()\n    .substr(11, 8)\n    .replace(/^00:/, '');\n\n  return isNegative ? `-${time}` : time;\n}\n\nexport default formatTime;\n","enum ITooltipPositionPlacement {\n  TOP = 'top',\n  BOTTOM = 'bottom',\n}\n\ntype ITooltipPosition = {\n  placement: ITooltipPositionPlacement;\n  x: number;\n};\n\ntype ITooltipPositionFunction = (\n  tooltipContainerNode: HTMLElement,\n) => ITooltipPosition;\n\ntype ITooltipShowOptions = {\n  text: string;\n  position: ITooltipPosition | ITooltipPositionFunction;\n};\n\ntype ITooltipStyles = {\n  tooltip: string;\n  tooltipVisible: string;\n  tooltipInner: string;\n};\n\ninterface ITooltip {\n  node: HTMLElement;\n  isHidden: boolean;\n  show(): void;\n  hide(): void;\n  setText(text: string): void;\n  setStyle(style: { [key: string]: string | number }): void;\n  destroy(): void;\n}\n\ntype ITooltipReferenceOptions = {\n  text: string;\n};\n\ninterface ITooltipReference {\n  isHidden: boolean;\n  isDisabled: boolean;\n  show(): void;\n  hide(): void;\n  setText(text: string): void;\n  disable(): void;\n  enable(): void;\n  destroy(): void;\n}\n\ninterface ITooltipService {\n  isHidden: boolean;\n  tooltipContainerNode: HTMLElement;\n  setText(text: string): void;\n  show(options: ITooltipShowOptions): void;\n  hide(): void;\n  createReference(\n    reference: HTMLElement,\n    options: ITooltipReferenceOptions,\n  ): ITooltipReference;\n  destroy(): void;\n}\n\nexport {\n  ITooltipPositionPlacement,\n  ITooltipPosition,\n  ITooltipPositionFunction,\n  ITooltipShowOptions,\n  ITooltipStyles,\n  ITooltip,\n  ITooltipReference,\n  ITooltipReferenceOptions,\n  ITooltipService,\n};\n","import { tooltipTemplate } from './templates';\nimport htmlToElement from '../htmlToElement';\nimport getElementByHook from '../getElementByHook';\nimport Stylable from '../stylable';\n\nimport { ITooltip, ITooltipStyles } from './types';\n\nimport styles from './tooltip.scss';\n\nclass Tooltip extends Stylable<ITooltipStyles> implements ITooltip {\n  private _$node: HTMLElement;\n  private _$tooltipInner: HTMLElement;\n  private _isHidden: boolean;\n\n  constructor() {\n    super();\n\n    this._isHidden = true;\n    this._initDOM();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      tooltipTemplate({\n        styles: this.styleNames,\n      }),\n    );\n    this._$tooltipInner = getElementByHook(this._$node, 'tooltipInner');\n  }\n\n  get node(): HTMLElement {\n    return this._$node;\n  }\n\n  get isHidden(): boolean {\n    return this._isHidden;\n  }\n\n  show() {\n    if (!this._isHidden) {\n      return;\n    }\n    this._isHidden = false;\n    this._$node.classList.add(this.styleNames.tooltipVisible);\n  }\n\n  hide() {\n    if (this._isHidden) {\n      return;\n    }\n    this._isHidden = true;\n    this._$node.classList.remove(this.styleNames.tooltipVisible);\n  }\n\n  setText(text: string) {\n    this._$tooltipInner.innerText = text;\n  }\n\n  setStyle(style: any) {\n    Object.keys(style).forEach(styleKey => {\n      (this._$node.style as any)[styleKey] = style[styleKey];\n    });\n  }\n\n  destroy() {\n    this._$node = null;\n    this._$tooltipInner = null;\n  }\n}\n\nTooltip.extendStyleNames(styles);\n\nexport { ITooltip, ITooltipStyles };\n\nexport default Tooltip;\n","import { ITooltipPosition, ITooltipPositionPlacement } from '../types';\n\ntype ITooltipCenterXfn = (\n  tooltipReferenceOffsetX: number,\n  tooltipReferenceWidth: number,\n) => number;\n\nfunction calcTooltipCenterX(\n  tooltipReferenceOffsetX: number,\n  tooltipReferenceWidth: number,\n) {\n  return tooltipReferenceOffsetX + tooltipReferenceWidth / 2;\n}\n\nfunction getTooltipPositionByReferenceNode(\n  tooltipReferenceNode: HTMLElement,\n  tooltipContainerNode: HTMLElement,\n  tooltipCenterXfn: ITooltipCenterXfn = calcTooltipCenterX,\n): ITooltipPosition {\n  const tooltipReferenceRect = tooltipReferenceNode.getBoundingClientRect();\n  const tooltipContainerRect = tooltipContainerNode.getBoundingClientRect();\n\n  const tooltipPlacement =\n    tooltipReferenceRect.top > tooltipContainerRect.top\n      ? ITooltipPositionPlacement.BOTTOM\n      : ITooltipPositionPlacement.TOP;\n  const tooltipReferenceOffsetX =\n    tooltipReferenceRect.left - tooltipContainerRect.left;\n  const tooltipCenterX = tooltipCenterXfn(\n    tooltipReferenceOffsetX,\n    tooltipReferenceRect.width,\n  );\n\n  return { placement: tooltipPlacement, x: tooltipCenterX };\n}\n\nexport default getTooltipPositionByReferenceNode;\n","import {\n  ITooltipService,\n  ITooltipReference,\n  ITooltipReferenceOptions,\n} from './types';\nimport getTooltipPositionByReferenceNode from './utils/getTooltipPositionByReferenceNode';\n\nconst SHOW_EVENTS = ['mouseenter', 'focus'];\nconst HIDE_EVENTS = ['mouseleave', 'blur'];\n\nclass TooltipReference implements ITooltipReference {\n  private _$reference: HTMLElement;\n  private _tooltipService: ITooltipService;\n\n  private _options: ITooltipReferenceOptions;\n  private _eventListeners: any[];\n\n  private _isDisabled: boolean;\n\n  constructor(\n    reference: HTMLElement,\n    tooltipService: ITooltipService,\n    options: ITooltipReferenceOptions,\n  ) {\n    this._$reference = reference;\n    this._options = options;\n    this._tooltipService = tooltipService;\n\n    this._eventListeners = [];\n\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    SHOW_EVENTS.forEach(event => {\n      const fn = () => {\n        this.show();\n      };\n      this._eventListeners.push({ event, fn });\n      this._$reference.addEventListener(event, fn);\n    });\n\n    HIDE_EVENTS.forEach(event => {\n      const fn = () => {\n        this.hide();\n      };\n      this._eventListeners.push({ event, fn });\n      this._$reference.addEventListener(event, fn);\n    });\n  }\n\n  get isHidden(): boolean {\n    return this._tooltipService.isHidden;\n  }\n\n  get isDisabled(): boolean {\n    return this._isDisabled;\n  }\n\n  show() {\n    if (this._isDisabled) {\n      return;\n    }\n\n    this._tooltipService.show({\n      text: this._options.text,\n      position: getTooltipPositionByReferenceNode(\n        this._$reference,\n        this._tooltipService.tooltipContainerNode,\n      ),\n    });\n  }\n\n  hide() {\n    this._tooltipService.hide();\n  }\n\n  setText(text: string) {\n    this._options.text = text;\n    this._tooltipService.setText(text);\n  }\n\n  disable() {\n    this._isDisabled = true;\n  }\n\n  enable() {\n    this._isDisabled = false;\n  }\n\n  destroy() {\n    this._eventListeners.forEach(({ event, fn }) => {\n      this._$reference.removeEventListener(event, fn);\n    });\n    this._eventListeners = null;\n    this._$reference = null;\n    this._tooltipService = null;\n    this._options = null;\n  }\n}\n\nexport default TooltipReference;\n","import { tooltipContainerTemplate } from './templates';\nimport htmlToElement from '../htmlToElement';\nimport Tooltip from './tooltip';\nimport Stylable from '../stylable';\n\nimport {\n  ITooltipPosition,\n  ITooltipPositionFunction,\n  ITooltipPositionPlacement,\n} from './types';\n\nimport styles from './tooltip-container.scss';\n\ninterface ITooltipContainer {\n  node: HTMLElement;\n  getTooltipPositionStyles(\n    position: ITooltipPosition,\n  ): { [ket: string]: string | number };\n  destroy(): void;\n}\n\nclass TooltipContainer extends Stylable implements ITooltipContainer {\n  private _tooltip: Tooltip;\n  private _$node: HTMLElement;\n\n  constructor(tooltip: Tooltip) {\n    super();\n\n    this._tooltip = tooltip;\n    this._initDOM();\n  }\n\n  get node(): HTMLElement {\n    return this._$node;\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      tooltipContainerTemplate({\n        styles: this.styleNames,\n      }),\n    );\n    this._$node.appendChild(this._tooltip.node);\n  }\n\n  getTooltipPositionStyles(\n    position: ITooltipPosition | ITooltipPositionFunction,\n  ) {\n    if (typeof position === 'function') {\n      position = position(this._$node);\n    }\n\n    if (position.placement === ITooltipPositionPlacement.TOP) {\n      return {\n        left: `${this._getTooltipLeftX(position.x)}px`,\n        top: 0,\n        bottom: 'initial',\n      };\n    }\n\n    return {\n      left: `${this._getTooltipLeftX(position.x)}px`,\n      top: 'initial',\n      bottom: 0,\n    };\n  }\n\n  destroy() {\n    this._tooltip = null;\n    this._$node = null;\n  }\n\n  private _getTooltipLeftX(tooltipCenterX: number) {\n    const tooltipRect = this._tooltip.node.getBoundingClientRect();\n    const tooltipContainerRect = this._$node.getBoundingClientRect();\n\n    let tooltipLeftX = tooltipCenterX - tooltipRect.width / 2;\n\n    // ensure `x` is in range of placeholder rect\n    tooltipLeftX = Math.max(tooltipLeftX, 0);\n    tooltipLeftX = Math.min(\n      tooltipLeftX,\n      tooltipContainerRect.width - tooltipRect.width,\n    );\n\n    return tooltipLeftX;\n  }\n}\n\nTooltipContainer.extendStyleNames(styles);\n\nexport { ITooltipContainer };\nexport default TooltipContainer;\n","import TooltipReference from './tooltip-reference';\nimport TooltipContainer from './tooltip-container';\nimport Tooltip from './tooltip';\n\nimport { UI_EVENTS } from '../../../../constants';\n\nimport {\n  ITooltipShowOptions,\n  ITooltipService,\n  ITooltipReferenceOptions,\n} from './types';\nimport { IEventEmitter } from '../../../event-emitter/types';\n\nclass TooltipService implements ITooltipService {\n  static moduleName = 'tooltipService';\n  static dependencies = ['eventEmitter'];\n  private _tooltip: Tooltip;\n  private _tooltipContainer: TooltipContainer;\n  private _eventEmitter: IEventEmitter;\n\n  private _unbindEvents: Function;\n\n  constructor({ eventEmitter }: { eventEmitter: IEventEmitter }) {\n    this._eventEmitter = eventEmitter;\n    this._tooltip = new Tooltip();\n    this._tooltipContainer = new TooltipContainer(this._tooltip);\n    this._bindEvents();\n  }\n\n  get isHidden(): boolean {\n    return this._tooltip.isHidden;\n  }\n\n  get tooltipContainerNode(): HTMLElement {\n    return this._tooltipContainer.node;\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this.hide]],\n      this,\n    );\n  }\n\n  /**\n   * Set new tooltip title\n   */\n  setText(text: string) {\n    this._tooltip.setText(text);\n  }\n\n  /**\n   * Show tooltip with title\n   */\n  show(options: ITooltipShowOptions) {\n    // NOTE: its important to set tooltip text before update tooltip position styles\n    this._tooltip.setText(options.text);\n    this._tooltip.setStyle(\n      this._tooltipContainer.getTooltipPositionStyles(options.position),\n    );\n    this._tooltip.show();\n  }\n\n  /**\n   * Hide tooltip\n   */\n  hide() {\n    this._tooltip.hide();\n  }\n\n  /**\n   * Create tooltip reference which show/hide tooltip on hover and focus events\n   * @param reference - reference node\n   * @param options - tooltip title and other options\n   * @returns tooltip reference instance\n   */\n  createReference(\n    reference: HTMLElement,\n    options: ITooltipReferenceOptions,\n  ): TooltipReference {\n    return new TooltipReference(reference, this, options);\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._tooltip.destroy();\n    this._tooltipContainer.destroy();\n    this._tooltip = null;\n    this._tooltipContainer = null;\n\n    this._eventEmitter = null;\n  }\n}\n\nexport { ITooltipService };\n\nexport default TooltipService;\n","import { transperentizeColor } from '../../core/theme';\n\nexport default {\n  progressPlayed: {\n    backgroundColor: (data: any) => data.progressColor,\n  },\n  progressSeekTo: {\n    backgroundColor: (data: any) =>\n      transperentizeColor(data.progressColor, 0.5),\n  },\n  progressBackground: {\n    backgroundColor: (data: any) =>\n      transperentizeColor(data.progressColor, 0.25),\n  },\n  progressSeekBtn: {\n    backgroundColor: (data: any) => data.progressColor,\n  },\n  progressSyncBtn: {\n    borderColor: (data: any) => data.progressColor,\n  },\n};\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\n\nimport { IView } from '../../core/types';\nimport { ITooltipReference, ITooltipService } from '../../core/tooltip/types';\nimport formatTime from '../../core/utils/formatTime';\nimport getProgressTimeTooltipPosition from './utils/getProgressTimeTooltipPosition';\nimport { progressTemplate, progressTimeIndicatorTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\nimport toggleNodeClass from '../../core/toggleNodeClass';\n\nimport {\n  IProgressViewStyles,\n  IProgressViewCallbacks,\n  IProgressViewConfig,\n} from './types';\nimport { ITextMap } from '../../../text-map/types';\n\nimport progressViewTheme from './progress.theme';\nimport styles from './progress.scss';\n\nconst DATA_PLAYED = 'data-played-percent';\n\nconst getPercentBasedOnXPosition = (\n  event: MouseEvent,\n  element: HTMLElement,\n) => {\n  const boundingRect = element.getBoundingClientRect();\n  const positionX = event.clientX;\n\n  if (positionX < boundingRect.left) {\n    return 0;\n  }\n\n  if (positionX > boundingRect.left + boundingRect.width) {\n    return 100;\n  }\n\n  return (event.clientX - boundingRect.left) / boundingRect.width * 100;\n};\n\nclass ProgressView extends View<IProgressViewStyles>\n  implements IView<IProgressViewStyles> {\n  private _callbacks: IProgressViewCallbacks;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _syncButtonTooltipReference: ITooltipReference;\n\n  private _isDragging: boolean;\n\n  private _$node: HTMLElement;\n  private _$hitbox: HTMLElement;\n  private _$played: HTMLElement;\n  private _$buffered: HTMLElement;\n  private _$seekTo: HTMLElement;\n  private _$timeIndicators: HTMLElement;\n  private _$seekButton: HTMLElement;\n  private _$syncButton: HTMLElement;\n\n  constructor(config: IProgressViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._initDOM();\n    this._bindCallbacks();\n    this._bindEvents();\n\n    this._setPlayedDOMAttributes(0);\n    this._setBufferedDOMAttributes(0);\n    this.setUsualMode();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      progressTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      }),\n    );\n\n    this._$played = getElementByHook(this._$node, 'progress-played');\n    this._$buffered = getElementByHook(this._$node, 'progress-buffered');\n    this._$seekTo = getElementByHook(this._$node, 'progress-seek-to');\n    this._$timeIndicators = getElementByHook(\n      this._$node,\n      'progress-time-indicators',\n    );\n    this._$seekButton = getElementByHook(this._$node, 'progress-seek-button');\n    this._$syncButton = getElementByHook(this._$node, 'progress-sync-button');\n    this._syncButtonTooltipReference = this._tooltipService.createReference(\n      this._$syncButton,\n      {\n        text: this._textMap.get(TEXT_LABELS.LIVE_SYNC_TOOLTIP),\n      },\n    );\n    this._$hitbox = getElementByHook(this._$node, 'progress-hitbox');\n  }\n\n  private _bindCallbacks() {\n    this._setPlayedByDrag = this._setPlayedByDrag.bind(this);\n    this._startDragOnMouseDown = this._startDragOnMouseDown.bind(this);\n    this._stopDragOnMouseUp = this._stopDragOnMouseUp.bind(this);\n    this._startSeekToByMouse = this._startSeekToByMouse.bind(this);\n    this._stopSeekToByMouse = this._stopSeekToByMouse.bind(this);\n    this._syncWithLive = this._syncWithLive.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$seekButton.addEventListener('mousedown', this._startDragOnMouseDown);\n    this._$seekButton.addEventListener('mousemove', this._startSeekToByMouse);\n    this._$seekButton.addEventListener('mouseout', this._stopSeekToByMouse);\n\n    this._$hitbox.addEventListener('mousedown', this._startDragOnMouseDown);\n    this._$hitbox.addEventListener('mousemove', this._startSeekToByMouse);\n    this._$hitbox.addEventListener('mouseout', this._stopSeekToByMouse);\n\n    window.addEventListener('mousemove', this._setPlayedByDrag);\n    window.addEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$syncButton.addEventListener('click', this._syncWithLive);\n    this._$syncButton.addEventListener(\n      'mouseenter',\n      this._callbacks.onSyncWithLiveMouseEnter,\n    );\n    this._$syncButton.addEventListener(\n      'mouseleave',\n      this._callbacks.onSyncWithLiveMouseLeave,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$seekButton.removeEventListener(\n      'mousedown',\n      this._startDragOnMouseDown,\n    );\n    this._$seekButton.removeEventListener(\n      'mousemove',\n      this._startSeekToByMouse,\n    );\n    this._$seekButton.removeEventListener('mouseout', this._stopSeekToByMouse);\n\n    this._$hitbox.removeEventListener('mousedown', this._startDragOnMouseDown);\n    this._$hitbox.removeEventListener('mousemove', this._startSeekToByMouse);\n    this._$hitbox.removeEventListener('mouseout', this._stopSeekToByMouse);\n\n    window.removeEventListener('mousemove', this._setPlayedByDrag);\n    window.removeEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$syncButton.removeEventListener('click', this._syncWithLive);\n    this._$syncButton.removeEventListener(\n      'mouseenter',\n      this._callbacks.onSyncWithLiveMouseEnter,\n    );\n    this._$syncButton.removeEventListener(\n      'mouseleave',\n      this._callbacks.onSyncWithLiveMouseLeave,\n    );\n  }\n\n  private _startDragOnMouseDown(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    this._setPlayedDOMAttributes(percent);\n    this._callbacks.onChangePlayedProgress(percent);\n\n    this._startDrag();\n  }\n\n  private _stopDragOnMouseUp(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    this._stopDrag();\n  }\n\n  private _startSeekToByMouse(event: MouseEvent) {\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n\n    this._setSeekToDOMAttributes(percent);\n    this._callbacks.onSeekToByMouseStart(percent);\n  }\n\n  private _stopSeekToByMouse() {\n    this._setSeekToDOMAttributes(0);\n    this._callbacks.onSeekToByMouseEnd();\n  }\n\n  private _setPlayedByDrag(event: MouseEvent) {\n    if (this._isDragging) {\n      const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n      this._setPlayedDOMAttributes(percent);\n      this._callbacks.onChangePlayedProgress(percent);\n    }\n  }\n\n  private _startDrag() {\n    this._isDragging = true;\n    this._callbacks.onDragStart();\n    this._$node.classList.add(this.styleNames.isDragging);\n  }\n\n  private _stopDrag() {\n    if (this._isDragging) {\n      this._isDragging = false;\n      this._callbacks.onDragEnd();\n      this._$node.classList.remove(this.styleNames.isDragging);\n    }\n  }\n\n  private _setSeekToDOMAttributes(percent: number) {\n    this._$seekTo.setAttribute('style', `width:${percent}%;`);\n  }\n\n  private _setPlayedDOMAttributes(percent: number) {\n    this._$node.setAttribute(\n      'aria-valuetext',\n      this._textMap.get(TEXT_LABELS.PROGRESS_CONTROL_VALUE, { percent }),\n    );\n    this._$node.setAttribute('aria-valuenow', String(percent));\n    this._$node.setAttribute(DATA_PLAYED, String(percent));\n    this._$played.setAttribute('style', `width:${percent}%;`);\n    this._$seekButton.setAttribute('style', `left:${percent}%;`);\n  }\n\n  private _setBufferedDOMAttributes(percent: number) {\n    this._$buffered.setAttribute('style', `width:${percent}%;`);\n  }\n\n  private _syncWithLive() {\n    this._callbacks.onSyncWithLiveClick();\n  }\n\n  showSyncWithLive() {\n    this._$syncButton.classList.remove(this.styleNames.hidden);\n  }\n\n  hideSyncWithLive() {\n    this._$syncButton.classList.add(this.styleNames.hidden);\n  }\n\n  setLiveSyncStatus(isSync: boolean) {\n    toggleNodeClass(this._$syncButton, this.styleNames.liveSync, isSync);\n\n    if (isSync) {\n      this._syncButtonTooltipReference.disable();\n      this._$played.setAttribute('style', `width:100%;`);\n      this._$seekButton.setAttribute('style', `left:100%;`);\n    } else {\n      this._syncButtonTooltipReference.enable();\n    }\n  }\n\n  showProgressTimeTooltip({\n    time,\n    percent,\n  }: {\n    time: number;\n    percent: number;\n  }) {\n    this._tooltipService.show({\n      text: formatTime(time),\n      position: tooltipContainerNode =>\n        getProgressTimeTooltipPosition(\n          percent,\n          this._$hitbox,\n          tooltipContainerNode,\n        ),\n    });\n  }\n\n  hideProgressTimeTooltip() {\n    this._tooltipService.hide();\n  }\n\n  setLiveMode() {\n    this._$node.classList.add(this.styleNames.inLive);\n\n    this.showSyncWithLive();\n  }\n\n  setUsualMode() {\n    this._$node.classList.remove(this.styleNames.inLive);\n\n    this.hideSyncWithLive();\n  }\n\n  setPlayed(percent: number) {\n    this._setPlayedDOMAttributes(percent);\n  }\n\n  setBuffered(percent: number) {\n    this._setBufferedDOMAttributes(percent);\n  }\n\n  addTimeIndicator(percent: number) {\n    this._$timeIndicators.appendChild(\n      htmlToElement(\n        progressTimeIndicatorTemplate({\n          percent,\n          styles: this.styleNames,\n        }),\n      ),\n    );\n  }\n\n  clearTimeIndicators() {\n    this._$timeIndicators.innerHTML = '';\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._syncButtonTooltipReference.destroy();\n    this._syncButtonTooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$buffered = null;\n    this._$hitbox = null;\n    this._$played = null;\n    this._$seekTo = null;\n    this._$seekButton = null;\n    this._$syncButton = null;\n    this._$timeIndicators = null;\n\n    this._textMap = null;\n  }\n}\n\nProgressView.setTheme(progressViewTheme);\nProgressView.extendStyleNames(styles);\n\nexport default ProgressView;\n","import { getTooltipPositionByReferenceNode } from '../../../core/tooltip';\n\nimport { ITooltipPosition } from '../../../core/tooltip/types';\n\nfunction calcProgressTimeTooltipCenterX(\n  progressPercent: number,\n  progressNodeOffsetX: number,\n  progressNodeWidth: number,\n) {\n  return progressNodeOffsetX + progressPercent * progressNodeWidth / 100;\n}\n\nfunction getProgressTimeTooltipPosition(\n  progressPercent: number,\n  progressNode: HTMLElement,\n  tooltipContainerNode: HTMLElement,\n): ITooltipPosition {\n  return getTooltipPositionByReferenceNode(\n    progressNode,\n    tooltipContainerNode,\n    (progressNodeOffsetX, progressNodeWidth) =>\n      calcProgressTimeTooltipCenterX(\n        progressPercent,\n        progressNodeOffsetX,\n        progressNodeWidth,\n      ),\n  );\n}\n\nexport default getProgressTimeTooltipPosition;\n","export function getTimePercent(time: number, durationTime: number): number {\n  if (!durationTime) {\n    return 0;\n  }\n\n  return parseFloat((time / durationTime * 100).toFixed(1));\n}\n\nexport function getOverallBufferedPercent(\n  buffered: TimeRanges,\n  currentTime: number = 0,\n  duration: number = 0,\n) {\n  if (!buffered || !buffered.length || !duration) {\n    return 0;\n  }\n\n  const info = getNearestBufferSegmentInfo(buffered, currentTime);\n\n  return getTimePercent(info.end, duration);\n}\n\nexport function getOverallPlayedPercent(currentTime = 0, duration = 0) {\n  return getTimePercent(currentTime, duration);\n}\n\nexport function geOverallBufferLength(buffered: TimeRanges) {\n  let size = 0;\n\n  if (!buffered || !buffered.length) {\n    return size;\n  }\n\n  for (let i = 0; i < buffered.length; i += 1) {\n    size += buffered.end(i) - buffered.start(i);\n  }\n\n  return size;\n}\n\nexport function getNearestBufferSegmentInfo(\n  buffered: TimeRanges,\n  currentTime?: number,\n) {\n  let i = 0;\n\n  if (!buffered || !buffered.length) {\n    return null;\n  }\n\n  while (\n    i < buffered.length - 1 &&\n    !(buffered.start(i) <= currentTime && currentTime <= buffered.end(i))\n  ) {\n    i += 1;\n  }\n\n  return {\n    start: buffered.start(i),\n    end: buffered.end(i),\n  };\n}\n","import View from './progress.view';\n\nimport {\n  getTimePercent,\n  getOverallBufferedPercent,\n  getOverallPlayedPercent,\n} from '../../../../utils/video-data';\n\nimport {\n  VIDEO_EVENTS,\n  UI_EVENTS,\n  EngineState,\n  LiveState,\n} from '../../../../constants';\nimport { AMOUNT_TO_SKIP_SECONDS } from '../../../keyboard-control/keyboard-control';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\nimport playerAPI from '../../../../core/player-api-decorator';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport { IProgressControl, IProgressViewConfig } from './types';\nimport { ITextMap } from '../../../text-map/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\nimport { IThemeService } from '../../core/theme';\n\nconst UPDATE_INTERVAL_DELAY = 1000 / 60;\n\nexport default class ProgressControl implements IProgressControl {\n  static moduleName = 'progressControl';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'liveStateEngine',\n    'eventEmitter',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _engine: IPlaybackEngine;\n  private _liveStateEngine: any;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _theme: IThemeService;\n\n  private _isUserInteracting: boolean;\n  private _shouldPlayAfterManipulationEnd: boolean;\n  private _currentProgress: number;\n  private _interceptor: KeyboardInterceptor;\n  private _updateControlInterval: number;\n  private _timeIndicatorsToAdd: number[];\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    liveStateEngine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    liveStateEngine: any;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n    theme: IThemeService;\n  }) {\n    this._engine = engine;\n    this._liveStateEngine = liveStateEngine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n    this._isUserInteracting = false;\n    this._currentProgress = 0;\n    this._theme = theme;\n\n    this._timeIndicatorsToAdd = [];\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.view.setPlayed(0);\n    this.view.setBuffered(0);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._processStateChange],\n        [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processLiveStateChange],\n        [VIDEO_EVENTS.CHUNK_LOADED, this._updateBufferIndicator],\n        [VIDEO_EVENTS.DURATION_UPDATED, this._updateAllIndicators],\n      ],\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: IProgressViewConfig = {\n      callbacks: {\n        onSyncWithLiveClick: this._syncWithLive,\n        onSyncWithLiveMouseEnter: this._onSyncWithLiveMouseEnter,\n        onSyncWithLiveMouseLeave: this._onSyncWithLiveMouseLeave,\n        onChangePlayedProgress: this._changePlayedProgress,\n        onSeekToByMouseStart: this._onSeekToByMouseStart,\n        onSeekToByMouseEnd: this._onSeekToByMouseEnd,\n        onDragStart: this._onUserInteractionStarts,\n        onDragEnd: this._onUserInteractionEnds,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new ProgressControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.view.getNode(), {\n      [KEYCODES.UP_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n      },\n      [KEYCODES.DOWN_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n      },\n      [KEYCODES.RIGHT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n      },\n      [KEYCODES.LEFT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _bindCallbacks() {\n    this._syncWithLive = this._syncWithLive.bind(this);\n    this._onSyncWithLiveMouseEnter = this._onSyncWithLiveMouseEnter.bind(this);\n    this._onSyncWithLiveMouseLeave = this._onSyncWithLiveMouseLeave.bind(this);\n    this._updateControlOnInterval = this._updateControlOnInterval.bind(this);\n    this._changePlayedProgress = this._changePlayedProgress.bind(this);\n    this._onSeekToByMouseStart = this._onSeekToByMouseStart.bind(this);\n    this._onSeekToByMouseEnd = this._onSeekToByMouseEnd.bind(this);\n    this._onUserInteractionStarts = this._onUserInteractionStarts.bind(this);\n    this._onUserInteractionEnds = this._onUserInteractionEnds.bind(this);\n    this._processStateChange = this._processStateChange.bind(this);\n    this._playVideoOnProgressManipulationEnd = this._playVideoOnProgressManipulationEnd.bind(\n      this,\n    );\n  }\n\n  private _changePlayedProgress(value: number) {\n    if (this._currentProgress === value) {\n      return;\n    }\n\n    this._currentProgress = value;\n    this._changeCurrentTimeOfVideo(value / 100);\n  }\n\n  private _startIntervalUpdates() {\n    if (this._updateControlInterval) {\n      this._stopIntervalUpdates();\n    }\n\n    this._updateControlOnInterval();\n\n    this._updateControlInterval = window.setInterval(\n      this._updateControlOnInterval,\n      UPDATE_INTERVAL_DELAY,\n    );\n  }\n\n  private _onSeekToByMouseStart(percent: number) {\n    const durationTime = this._engine.getDurationTime();\n    const seekTime = durationTime * percent / 100;\n    const time = this._engine.isDynamicContent\n      ? seekTime - durationTime\n      : seekTime;\n\n    this.view.showProgressTimeTooltip({ time, percent });\n  }\n\n  private _onSeekToByMouseEnd() {\n    this.view.hideProgressTimeTooltip();\n  }\n\n  private _stopIntervalUpdates() {\n    window.clearInterval(this._updateControlInterval);\n    this._updateControlInterval = null;\n  }\n\n  private _onUserInteractionStarts() {\n    if (!this._isUserInteracting) {\n      this._isUserInteracting = true;\n      this._pauseVideoOnProgressManipulationStart();\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_START);\n  }\n\n  private _onUserInteractionEnds() {\n    if (this._isUserInteracting) {\n      this._isUserInteracting = false;\n      this._playVideoOnProgressManipulationEnd();\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_END);\n  }\n\n  private _updateControlOnInterval() {\n    this._updatePlayedIndicator();\n    this._updateBufferIndicator();\n  }\n\n  private _processStateChange({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.SRC_SET:\n        this.reset();\n        break;\n      case EngineState.METADATA_LOADED:\n        this._initTimeIndicators();\n\n        if (this._engine.isSeekAvailable) {\n          this.show();\n        } else {\n          this.hide();\n        }\n\n        break;\n      case EngineState.PLAYING:\n        if (this._liveStateEngine.state === LiveState.SYNC) {\n          this.view.setPlayed(100);\n        } else {\n          this._startIntervalUpdates();\n        }\n        break;\n      case EngineState.SEEK_IN_PROGRESS:\n        this._updatePlayedIndicator();\n        this._updateBufferIndicator();\n        break;\n      default:\n        this._stopIntervalUpdates();\n        break;\n    }\n  }\n\n  private _processLiveStateChange({ nextState }: { nextState: LiveState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this.view.setLiveSyncStatus(false);\n        this.view.setUsualMode();\n        break;\n\n      case LiveState.INITIAL:\n        this.view.setLiveMode();\n        break;\n\n      case LiveState.SYNC:\n        this.view.setLiveSyncStatus(true);\n        break;\n\n      case LiveState.NOT_SYNC:\n        this.view.setLiveSyncStatus(false);\n        break;\n\n      case LiveState.ENDED:\n        this.view.setLiveSyncStatus(false);\n        this.view.hideSyncWithLive();\n\n        // ensure progress indicators show latest info\n        if (this._engine.getCurrentState() === EngineState.PLAYING) {\n          this._startIntervalUpdates();\n        } else {\n          this._updatePlayedIndicator();\n          this._updateBufferIndicator();\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _changeCurrentTimeOfVideo(percent: number) {\n    const duration = this._engine.getDurationTime();\n\n    if (this._engine.isDynamicContent && percent === 1) {\n      this._engine.syncWithLive();\n    } else {\n      this._engine.setCurrentTime(duration * percent);\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_CHANGE_TRIGGERED, percent);\n  }\n\n  private _pauseVideoOnProgressManipulationStart() {\n    const currentState = this._engine.getCurrentState();\n\n    if (\n      currentState === EngineState.PLAYING ||\n      currentState === EngineState.PLAY_REQUESTED\n    ) {\n      this._shouldPlayAfterManipulationEnd = true;\n      this._engine.pause();\n    }\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_MANIPULATION_STARTED);\n  }\n\n  private _playVideoOnProgressManipulationEnd() {\n    if (this._shouldPlayAfterManipulationEnd) {\n      this._engine.play();\n\n      this._shouldPlayAfterManipulationEnd = false;\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_MANIPULATION_ENDED);\n  }\n\n  private _updateBufferIndicator() {\n    const currentTime = this._engine.getCurrentTime();\n    const buffered = this._engine.getBuffered();\n    const duration = this._engine.getDurationTime();\n\n    this.updateBuffered(\n      getOverallBufferedPercent(buffered, currentTime, duration),\n    );\n  }\n\n  private _updatePlayedIndicator() {\n    if (this._liveStateEngine.state === LiveState.SYNC) {\n      // TODO: mb use this.updatePlayed(100) here?\n      return;\n    }\n\n    const currentTime = this._engine.getCurrentTime();\n    const duration = this._engine.getDurationTime();\n\n    this.updatePlayed(getOverallPlayedPercent(currentTime, duration));\n  }\n\n  private _updateAllIndicators() {\n    this._updatePlayedIndicator();\n    this._updateBufferIndicator();\n  }\n\n  private _initTimeIndicators() {\n    this._timeIndicatorsToAdd.forEach(time => {\n      this._addTimeIndicator(time);\n    });\n    this._timeIndicatorsToAdd = [];\n  }\n\n  private _addTimeIndicator(time: number) {\n    const durationTime = this._engine.getDurationTime();\n\n    if (time > durationTime) {\n      // TODO: log error for developers\n      return;\n    }\n\n    this.view.addTimeIndicator(getTimePercent(time, durationTime));\n  }\n\n  private _syncWithLive() {\n    this._engine.syncWithLive();\n  }\n\n  private _onSyncWithLiveMouseEnter() {\n    this._eventEmitter.emit(\n      UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED,\n    );\n  }\n\n  private _onSyncWithLiveMouseLeave() {\n    this._eventEmitter.emit(\n      UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED,\n    );\n  }\n\n  /**\n   * Add time indicator to progress bar\n   */\n  @playerAPI()\n  addTimeIndicator(time: number) {\n    this.addTimeIndicators([time]);\n  }\n\n  /**\n   * Add time indicators to progress bar\n   */\n  @playerAPI()\n  addTimeIndicators(times: number[]) {\n    if (!this._engine.isMetadataLoaded) {\n      // NOTE: Add indicator after metadata loaded\n      this._timeIndicatorsToAdd.push(...times);\n      return;\n    }\n\n    times.forEach(time => {\n      this._addTimeIndicator(time);\n    });\n  }\n\n  /**\n   * Delete all time indicators from progress bar\n   */\n  @playerAPI()\n  clearTimeIndicators() {\n    this.view.clearTimeIndicators();\n  }\n\n  updatePlayed(percent: number) {\n    this._currentProgress = percent;\n    this.view.setPlayed(this._currentProgress);\n  }\n\n  updateBuffered(percent: number) {\n    this.view.setBuffered(percent);\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  reset() {\n    this.updatePlayed(0);\n    this.updateBuffered(0);\n    this.clearTimeIndicators();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._stopIntervalUpdates();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n    this._liveStateEngine = null;\n    this._timeIndicatorsToAdd = null;\n    this._textMap = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport {\n  controlTemplate,\n  playIconTemplate,\n  pauseIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { IPlayViewStyles, IPlayViewCallbacks, IPlayViewConfig } from './types';\nimport { ITextMap } from '../../../text-map/types';\n\nimport playViewTheme from './play.theme';\nimport styles from './play.scss';\n\nconst DATA_IS_PLAYING = 'data-is-playing';\n\nclass PlayView extends View<IPlayViewStyles> implements IView<IPlayViewStyles> {\n  private _callbacks: IPlayViewCallbacks;\n  private _textMap: ITextMap;\n\n  private _$node: HTMLElement;\n  private _$playbackControl: HTMLElement;\n\n  constructor(config: IPlayViewConfig) {\n    const { callbacks, textMap, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$node = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.PLAY_CONTROL_LABEL),\n        },\n      }),\n    );\n\n    this._$playbackControl = getElementByHook(this._$node, 'playback-control');\n\n    this.setState({ isPlaying: false });\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._$playbackControl.addEventListener('click', this._onButtonClick);\n  }\n\n  private _unbindEvents() {\n    this._$playbackControl.removeEventListener('click', this._onButtonClick);\n  }\n\n  private _onButtonClick() {\n    this._$playbackControl.focus();\n    this._callbacks.onButtonClick();\n  }\n\n  setState({ isPlaying }: { isPlaying: boolean }) {\n    if (isPlaying) {\n      this._$playbackControl.classList.remove(this.styleNames.paused);\n      this._$playbackControl.innerHTML = pauseIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$playbackControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.PAUSE_CONTROL_LABEL),\n      );\n    } else {\n      this._$playbackControl.classList.add(this.styleNames.paused);\n      this._$playbackControl.innerHTML = playIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$playbackControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.PLAY_CONTROL_LABEL),\n      );\n    }\n\n    this._$node.setAttribute(DATA_IS_PLAYING, String(isPlaying));\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$playbackControl = null;\n    this._$node = null;\n    this._textMap = null;\n  }\n}\n\nPlayView.setTheme(playViewTheme);\nPlayView.extendStyleNames(styles);\n\nexport default PlayView;\n","export default {\n  playSvgFill: {\n    fill: (data: any) => data.color,\n  },\n};\n","import { IPlayControl, IPlayViewConfig } from './types';\n\nimport View from './play.view';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\nimport { IThemeService } from '../../core/theme';\n\nimport { ITextMap } from '../../../text-map/types';\n\nexport default class PlayControl implements IPlayControl {\n  static moduleName = 'playControl';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'textMap', 'theme'];\n\n  private _engine: IPlaybackEngine;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _theme: IThemeService;\n\n  private _interceptor: KeyboardInterceptor;\n  private _isPlaying: boolean;\n\n  private _unbindEvents: Function;\n\n  view: View;\n\n  constructor({\n    engine,\n    eventEmitter,\n    textMap,\n    theme,\n  }: {\n    engine: IPlaybackEngine;\n    eventEmitter: IEventEmitter;\n    textMap: ITextMap;\n    theme: IThemeService;\n  }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._theme = theme;\n\n    this._isPlaying = null;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.setControlStatus(false);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n        );\n      },\n      [KEYCODES.ENTER]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n        );\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _bindCallbacks() {\n    this._togglePlayback = this._togglePlayback.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[VIDEO_EVENTS.STATE_CHANGED, this._updatePlayingStatus]],\n      this,\n    );\n  }\n\n  private _togglePlayback() {\n    if (this._isPlaying) {\n      this._pauseVideo();\n    } else {\n      this._playVideo();\n    }\n  }\n\n  private _playVideo() {\n    this._engine.play();\n\n    this._eventEmitter.emit(UI_EVENTS.PLAY_TRIGGERED);\n  }\n\n  private _pauseVideo() {\n    this._engine.pause();\n\n    this._eventEmitter.emit(UI_EVENTS.PAUSE_TRIGGERED);\n  }\n\n  private _updatePlayingStatus({ nextState }: { nextState: EngineState }) {\n    if (nextState === EngineState.SRC_SET) {\n      this.reset();\n    } else if (nextState === EngineState.PLAYING) {\n      this.setControlStatus(true);\n    } else if (\n      nextState === EngineState.PAUSED ||\n      nextState === EngineState.ENDED ||\n      nextState === EngineState.SEEK_IN_PROGRESS\n    ) {\n      this.setControlStatus(false);\n    }\n  }\n\n  private _initUI() {\n    const config: IPlayViewConfig = {\n      callbacks: {\n        onButtonClick: this._togglePlayback,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n    };\n\n    this.view = new PlayControl.View(config);\n  }\n\n  setControlStatus(isPlaying: boolean) {\n    this._isPlaying = isPlaying;\n    this.view.setState({ isPlaying: this._isPlaying });\n  }\n\n  reset() {\n    this.setControlStatus(false);\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n    this._textMap = null;\n  }\n}\n","import View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport formatTime from '../../core/utils/formatTime';\n\nimport { timeTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { ITimeViewStyles, ITimeViewConfig } from './types';\nimport timeViewTheme from './time.theme';\nimport styles from './time.scss';\n\nclass TimeView extends View<ITimeViewStyles> implements IView<ITimeViewStyles> {\n  private _$node: HTMLElement;\n  private _$currentTime: HTMLElement;\n  private _$durationTime: HTMLElement;\n  private _duration: number;\n  private _current: number;\n  private _isBackward: boolean;\n  constructor(config: ITimeViewConfig) {\n    const { theme } = config;\n    super(theme);\n\n    this._initDOM();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      timeTemplate({ styles: this.styleNames, themeStyles: this.themeStyles }),\n    );\n\n    this._$currentTime = getElementByHook(\n      this._$node,\n      'current-time-indicator',\n    );\n    this._$durationTime = getElementByHook(\n      this._$node,\n      'duration-time-indicator',\n    );\n  }\n\n  setDurationTime(duration: number) {\n    if (duration !== this._duration) {\n      this._duration = duration;\n      this._updateDurationTime();\n    }\n  }\n\n  setCurrentTime(current: number) {\n    if (current !== this._current) {\n      this._current = current;\n      this._updateCurrentTime();\n    }\n  }\n\n  setCurrentTimeBackward(_isBackward: boolean) {\n    this._isBackward = _isBackward;\n    this._updateCurrentTime();\n  }\n\n  private _updateDurationTime() {\n    this._$durationTime.innerHTML = formatTime(this._duration);\n  }\n\n  private _updateCurrentTime() {\n    if (this._isBackward) {\n      this._$currentTime.innerHTML = formatTime(this._current - this._duration);\n    } else {\n      this._$currentTime.innerHTML = formatTime(this._current);\n    }\n  }\n\n  showDuration() {\n    this._$durationTime.classList.remove(this.styleNames.hidden);\n  }\n\n  hideDuration() {\n    this._$durationTime.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$currentTime = null;\n    this._$durationTime = null;\n    this._$node = null;\n  }\n}\n\nTimeView.setTheme(timeViewTheme);\nTimeView.extendStyleNames(styles);\n\nexport default TimeView;\n","export default {\n  timeText: {\n    color: (data: any) => data.color,\n  },\n};\n","import View from './time.view';\n\nimport { VIDEO_EVENTS, EngineState, LiveState } from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\nimport { ITimeControl, ITimeViewConfig } from './types';\nimport { IThemeService } from '../../core/theme';\n\nconst UPDATE_INTERVAL_DELAY = 1000 / 60;\n\nexport default class TimeControl implements ITimeControl {\n  static moduleName = 'timeControl';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'theme'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _theme: IThemeService;\n\n  private _updateControlInterval: number;\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    engine,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    theme: IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._theme = theme;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.setCurrentTime(0);\n    this.setDurationTime(0);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._updateCurrentTime = this._updateCurrentTime.bind(this);\n    this._updateDurationTime = this._updateDurationTime.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._toggleIntervalUpdates],\n        [VIDEO_EVENTS.DURATION_UPDATED, this._updateDurationTime],\n        [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processLiveStateChange],\n      ],\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: ITimeViewConfig = {\n      theme: this._theme,\n    };\n    this.view = new TimeControl.View(config);\n  }\n\n  private _startIntervalUpdates() {\n    if (this._updateControlInterval) {\n      this._stopIntervalUpdates();\n    }\n    this._updateControlInterval = window.setInterval(\n      this._updateCurrentTime,\n      UPDATE_INTERVAL_DELAY,\n    );\n  }\n\n  private _stopIntervalUpdates() {\n    window.clearInterval(this._updateControlInterval);\n    this._updateControlInterval = null;\n  }\n\n  private _processLiveStateChange({ nextState }: { nextState: LiveState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this.show();\n        break;\n\n      case LiveState.INITIAL:\n        this.hide();\n        break;\n\n      case LiveState.ENDED:\n        this.show();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _toggleIntervalUpdates({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.SRC_SET:\n        this.reset();\n        break;\n      case EngineState.PLAYING:\n        this._startIntervalUpdates();\n        break;\n      case EngineState.SEEK_IN_PROGRESS:\n        this._updateCurrentTime();\n        break;\n      default:\n        this._stopIntervalUpdates();\n        break;\n    }\n  }\n\n  private _updateDurationTime() {\n    this.setDurationTime(this._engine.getDurationTime());\n  }\n\n  private _updateCurrentTime() {\n    this.setCurrentTime(this._engine.getCurrentTime());\n  }\n\n  setDurationTime(time: number) {\n    this.view.setDurationTime(time);\n  }\n\n  setCurrentTime(time: number) {\n    this.view.setCurrentTime(time);\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  reset() {\n    this.setDurationTime(0);\n    this.setCurrentTime(0);\n    this.view.showDuration();\n    this.view.setCurrentTimeBackward(false);\n    this.show();\n  }\n\n  destroy() {\n    this._stopIntervalUpdates();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import { transperentizeColor } from '../../core/theme';\n\nexport default {\n  volumeSvgFill: {\n    fill: (data: any) => data.color,\n  },\n  volumeSvgStroke: {\n    stroke: (data: any) => data.color,\n  },\n  volumeProgress: {\n    backgroundColor: (data: any) => data.color,\n    '&:after': {\n      backgroundColor: (data: any) => data.color,\n    },\n  },\n  volumeProgressBackground: {\n    backgroundColor: (data: any) => transperentizeColor(data.color, 0.25),\n  },\n};\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport { ITooltipReference, ITooltipService } from '../../core/tooltip/types';\nimport {\n  controlTemplate,\n  volume0IconTemplate,\n  volume50IconTemplate,\n  volume100IconTemplate,\n} from './templates';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport {\n  IVolumeViewStyles,\n  IVolumeViewCallbacks,\n  IVolumeViewConfig,\n} from './types';\nimport { ITextMap } from '../../../text-map/types';\n\nimport volumeViewTheme from './volume.theme';\nimport styles from './volume.scss';\n\nconst DATA_IS_MUTED = 'data-is-muted';\nconst DATA_VOLUME = 'data-volume-percent';\n\nconst MAX_VOLUME_ICON_RANGE = 50;\n\nconst getPercentBasedOnXPosition = (\n  event: MouseEvent,\n  element: HTMLElement,\n) => {\n  const boundingRect = element.getBoundingClientRect();\n  const positionX = event.clientX;\n\n  if (positionX < boundingRect.left) {\n    return 0;\n  }\n\n  if (positionX > boundingRect.left + boundingRect.width) {\n    return 100;\n  }\n\n  return (event.clientX - boundingRect.left) / boundingRect.width * 100;\n};\n\nclass VolumeView extends View<IVolumeViewStyles>\n  implements IView<IVolumeViewStyles> {\n  private _callbacks: IVolumeViewCallbacks;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _muteButtonTooltipReference: ITooltipReference;\n\n  private _$node: HTMLElement;\n  private _$muteButton: HTMLElement;\n  private _$volumeNode: HTMLElement;\n  private _$volume: HTMLElement;\n  private _$hitbox: HTMLElement;\n\n  private _isDragging: boolean;\n\n  constructor(config: IVolumeViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n        texts: {\n          muteLabel: this._textMap.get(TEXT_LABELS.MUTE_CONTROL_LABEL),\n          volumeLabel: this._textMap.get(TEXT_LABELS.VOLUME_CONTROL_LABEL),\n        },\n      }),\n    );\n\n    this._$muteButton = getElementByHook(this._$node, 'mute-button');\n    this._$volumeNode = getElementByHook(this._$node, 'volume-input-block');\n    this._$hitbox = getElementByHook(this._$node, 'volume-hitbox');\n    this._$volume = getElementByHook(this._$node, 'volume-input');\n\n    this._muteButtonTooltipReference = this._tooltipService.createReference(\n      this._$muteButton,\n      {\n        text: this._textMap.get(TEXT_LABELS.MUTE_CONTROL_TOOLTIP),\n      },\n    );\n  }\n\n  private _bindCallbacks() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._startDragOnMouseDown = this._startDragOnMouseDown.bind(this);\n    this._stopDragOnMouseUp = this._stopDragOnMouseUp.bind(this);\n    this._setVolumeByWheel = this._setVolumeByWheel.bind(this);\n    this._setVolumeByClick = this._setVolumeByClick.bind(this);\n    this._setVolumeByDrag = this._setVolumeByDrag.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$hitbox.addEventListener('wheel', this._setVolumeByWheel);\n    this._$hitbox.addEventListener('mousedown', this._startDragOnMouseDown);\n    window.addEventListener('mousemove', this._setVolumeByDrag);\n    window.addEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$muteButton.addEventListener('click', this._onButtonClick);\n  }\n\n  private _unbindEvents() {\n    this._$hitbox.removeEventListener('wheel', this._setVolumeByWheel);\n    this._$hitbox.removeEventListener('mousedown', this._startDragOnMouseDown);\n    window.removeEventListener('mousemove', this._setVolumeByDrag);\n    window.removeEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$muteButton.removeEventListener('click', this._onButtonClick);\n  }\n\n  private _startDragOnMouseDown(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n    this._setVolumeByClick(event);\n    this._startDrag();\n  }\n\n  private _stopDragOnMouseUp(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    this._stopDrag();\n  }\n\n  private _setVolumeByClick(event: MouseEvent) {\n    this._$volumeNode.focus();\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    this._callbacks.onVolumeLevelChangeFromInput(percent);\n  }\n\n  private _setVolumeByDrag(event: MouseEvent) {\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    if (this._isDragging) {\n      this._callbacks.onVolumeLevelChangeFromInput(percent);\n    }\n  }\n\n  private _setVolumeByWheel(e: WheelEvent) {\n    e.preventDefault();\n    const value = e.deltaX || e.deltaY * -1;\n\n    if (!value) {\n      return;\n    }\n\n    this._callbacks.onVolumeLevelChangeFromWheel(value);\n  }\n\n  private _startDrag() {\n    this._isDragging = true;\n    this._$node.classList.add(this.styleNames.isDragging);\n    this._callbacks.onDragStart();\n  }\n\n  private _stopDrag() {\n    if (this._isDragging) {\n      this._isDragging = false;\n      this._$node.classList.remove(this.styleNames.isDragging);\n      this._callbacks.onDragEnd();\n    }\n  }\n\n  private _setVolumeDOMAttributes(percent: number) {\n    this._$volumeNode.setAttribute('value', String(percent));\n    this._$volumeNode.setAttribute(\n      'aria-valuetext',\n      this._textMap.get(TEXT_LABELS.VOLUME_CONTROL_VALUE, { percent }),\n    );\n    this._$volumeNode.setAttribute('aria-valuenow', String(percent));\n    this._$volumeNode.setAttribute(DATA_VOLUME, String(percent));\n\n    this._$volume.setAttribute('style', `width:${percent}%;`);\n\n    this._$node.setAttribute(DATA_VOLUME, String(percent));\n\n    const iconTemplateProps = {\n      styles: this.styleNames,\n      themeStyles: this.themeStyles,\n    };\n\n    if (percent >= MAX_VOLUME_ICON_RANGE) {\n      this._$muteButton.innerHTML = volume100IconTemplate(iconTemplateProps);\n    } else if (percent > 0) {\n      this._$muteButton.innerHTML = volume50IconTemplate(iconTemplateProps);\n    } else {\n      this._$muteButton.innerHTML = volume0IconTemplate(iconTemplateProps);\n    }\n  }\n\n  private _onButtonClick() {\n    this._$muteButton.focus();\n    this._callbacks.onToggleMuteClick();\n  }\n\n  setVolume(volume: number) {\n    this._setVolumeDOMAttributes(volume);\n  }\n\n  setMute(isMuted: boolean) {\n    this._setMuteDOMAttributes(isMuted);\n  }\n\n  private _setMuteDOMAttributes(isMuted: boolean) {\n    if (isMuted) {\n      this._$muteButton.innerHTML = volume0IconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n    }\n\n    this._$node.setAttribute(DATA_IS_MUTED, String(isMuted));\n    this._$muteButton.setAttribute(\n      'aria-label',\n      isMuted\n        ? this._textMap.get(TEXT_LABELS.UNMUTE_CONTROL_LABEL)\n        : this._textMap.get(TEXT_LABELS.MUTE_CONTROL_LABEL),\n    );\n    this._muteButtonTooltipReference.setText(\n      isMuted\n        ? this._textMap.get(TEXT_LABELS.UNMUTE_CONTROL_TOOLTIP)\n        : this._textMap.get(TEXT_LABELS.MUTE_CONTROL_TOOLTIP),\n    );\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  getButtonNode() {\n    return this._$muteButton;\n  }\n\n  getInputNode() {\n    return this._$volumeNode;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._muteButtonTooltipReference.destroy();\n    this._muteButtonTooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$muteButton = null;\n    this._$node = null;\n\n    this._textMap = null;\n  }\n}\n\nVolumeView.setTheme(volumeViewTheme);\nVolumeView.extendStyleNames(styles);\n\nexport default VolumeView;\n","import View from './volume.view';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { AMOUNT_TO_CHANGE_VOLUME } from '../../../keyboard-control/keyboard-control';\nimport { VIDEO_EVENTS, UI_EVENTS } from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport { IVolumeControl, IVolumeViewConfig } from './types';\nimport { ITextMap } from '../../../text-map/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\nimport { IThemeService } from '../../core/theme';\n\nexport default class VolumeControl implements IVolumeControl {\n  static moduleName = 'volumeControl';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _engine: IPlaybackEngine;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _theme: IThemeService;\n\n  private _isMuted: boolean;\n  private _volume: number;\n\n  private _buttonInterceptor: KeyboardInterceptor;\n  private _inputInterceptor: KeyboardInterceptor;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n    theme: IThemeService;\n  }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n    this._theme = theme;\n\n    this._isMuted = this._engine.getMute();\n    this._volume = this._engine.getVolume();\n\n    this._bindCallbacks();\n\n    this._initUI();\n\n    this._bindEvents();\n\n    this.view.setVolume(this._volume);\n    this.view.setMute(this._isMuted);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    const config: IVolumeViewConfig = {\n      callbacks: {\n        onDragStart: this._broadcastDragStart,\n        onDragEnd: this._broadcastDragEnd,\n        onVolumeLevelChangeFromInput: this._getVolumeLevelFromInput,\n        onVolumeLevelChangeFromWheel: this._getVolumeLevelFromWheel,\n        onToggleMuteClick: this._toggleMuteStatus,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new VolumeControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._buttonInterceptor = new KeyboardInterceptor(\n      this.view.getButtonNode(),\n      {\n        [KEYCODES.SPACE_BAR]: e => {\n          e.stopPropagation();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            this._isMuted\n              ? UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED\n              : UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n        [KEYCODES.ENTER]: e => {\n          e.stopPropagation();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            this._isMuted\n              ? UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED\n              : UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n      },\n    );\n\n    this._inputInterceptor = new KeyboardInterceptor(this.view.getInputNode(), {\n      [KEYCODES.RIGHT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.increaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n      [KEYCODES.LEFT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.decreaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._buttonInterceptor.destroy();\n    this._inputInterceptor.destroy();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[VIDEO_EVENTS.VOLUME_STATUS_CHANGED, this._updateVolumeStatus]],\n      this,\n    );\n  }\n\n  private _bindCallbacks() {\n    this._getVolumeLevelFromInput = this._getVolumeLevelFromInput.bind(this);\n    this._toggleMuteStatus = this._toggleMuteStatus.bind(this);\n    this._getVolumeLevelFromWheel = this._getVolumeLevelFromWheel.bind(this);\n    this._broadcastDragStart = this._broadcastDragStart.bind(this);\n    this._broadcastDragEnd = this._broadcastDragEnd.bind(this);\n  }\n\n  private _broadcastDragStart() {\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_START);\n  }\n\n  private _broadcastDragEnd() {\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_END);\n  }\n\n  private _changeVolumeLevel(level: number) {\n    this._engine.setVolume(level);\n    this._eventEmitter.emit(UI_EVENTS.VOLUME_CHANGE_TRIGGERED, level);\n  }\n\n  private _toggleMuteStatus() {\n    this._engine.setMute(!this._isMuted);\n    this._eventEmitter.emit(UI_EVENTS.MUTE_STATUS_TRIGGERED, !this._isMuted);\n  }\n\n  private _getVolumeLevelFromWheel(delta: number) {\n    const adjustedVolume = this._volume + delta / 10;\n    const validatedVolume = Math.min(100, Math.max(0, adjustedVolume));\n\n    this._changeVolumeStatus(validatedVolume);\n  }\n\n  private _getVolumeLevelFromInput(level: number) {\n    this._changeVolumeStatus(level);\n  }\n\n  private _changeVolumeStatus(level: number) {\n    this._changeVolumeLevel(level);\n    if (this._isMuted) {\n      this._toggleMuteStatus();\n    }\n  }\n\n  private _updateVolumeStatus() {\n    this.setVolumeLevel(this._engine.getVolume());\n    this.setMuteStatus(this._engine.getMute());\n  }\n\n  setVolumeLevel(level: number) {\n    if (level === this._volume) {\n      return;\n    }\n\n    this._volume = level;\n\n    this.view.setVolume(this._volume);\n    this.view.setMute(Boolean(!this._volume));\n  }\n\n  setMuteStatus(isMuted: boolean) {\n    if (isMuted === this._isMuted) {\n      return;\n    }\n\n    this._isMuted = isMuted;\n\n    this.view.setVolume(this._isMuted ? 0 : this._volume);\n    this.view.setMute(this._isMuted || Boolean(!this._volume));\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n    this._textMap = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport { ITooltipReference } from '../../core/tooltip/types';\nimport {\n  controlTemplate,\n  enterFullScreenIconTemplate,\n  exitFullScreenIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { ITextMap } from '../../../text-map/types';\n\nimport {\n  IFullScreenViewStyles,\n  IFullScreenViewCallbacks,\n  IFullScreenViewConfig,\n} from './types';\n\nimport fullScreenViewTheme from './full-screen.theme';\nimport styles from './full-screen.scss';\n\nconst DATA_IS_IN_FULL_SCREEN = 'data-is-in-full-screen';\n\nclass FullScreenView extends View<IFullScreenViewStyles>\n  implements IView<IFullScreenViewStyles> {\n  private _callbacks: IFullScreenViewCallbacks;\n  private _textMap: ITextMap;\n  private _tooltipReference: ITooltipReference;\n\n  private _$node: HTMLElement;\n  private _$toggleFullScreenControl: HTMLElement;\n\n  constructor(config: IFullScreenViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$node = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_LABEL),\n        },\n      }),\n    );\n\n    this._$toggleFullScreenControl = getElementByHook(\n      this._$node,\n      'full-screen-button',\n    );\n\n    this._tooltipReference = tooltipService.createReference(\n      this._$toggleFullScreenControl,\n      {\n        text: this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP),\n      },\n    );\n\n    this.setState({ isInFullScreen: false });\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._$toggleFullScreenControl.addEventListener(\n      'click',\n      this._onButtonClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$toggleFullScreenControl.removeEventListener(\n      'click',\n      this._onButtonClick,\n    );\n  }\n\n  private _onButtonClick() {\n    this._$toggleFullScreenControl.focus();\n    this._callbacks.onButtonClick();\n  }\n\n  setState({ isInFullScreen }: { isInFullScreen: boolean }) {\n    if (isInFullScreen) {\n      this._$toggleFullScreenControl.classList.add(\n        this.styleNames.inFullScreen,\n      );\n      this._$toggleFullScreenControl.innerHTML = exitFullScreenIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$toggleFullScreenControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.EXIT_FULL_SCREEN_LABEL),\n      );\n\n      this._tooltipReference.setText(\n        this._textMap.get(TEXT_LABELS.EXIT_FULL_SCREEN_TOOLTIP),\n      );\n    } else {\n      this._$toggleFullScreenControl.classList.remove(\n        this.styleNames.inFullScreen,\n      );\n      this._$toggleFullScreenControl.innerHTML = enterFullScreenIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$toggleFullScreenControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_LABEL),\n      );\n\n      this._tooltipReference.setText(\n        this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP),\n      );\n    }\n\n    this._$node.setAttribute(DATA_IS_IN_FULL_SCREEN, String(isInFullScreen));\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$toggleFullScreenControl = null;\n    this._$node = null;\n\n    this._textMap = null;\n  }\n}\n\nFullScreenView.setTheme(fullScreenViewTheme);\nFullScreenView.extendStyleNames(styles);\n\nexport default FullScreenView;\n","export default {\n  fullScreenSvgFill: {\n    fill: (data: any) => data.color,\n  },\n};\n","import { UI_EVENTS } from '../../../../constants';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport View from './full-screen.view';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport { IFullScreenControl, IFullScreenViewConfig } from './types';\nimport { IFullScreenManager } from '../../../full-screen-manager/types';\nimport { ITextMap } from '../../../text-map/types';\nimport { IThemeService } from '../../core/theme';\n\nexport default class FullScreenControl implements IFullScreenControl {\n  static moduleName = 'fullScreenControl';\n  static View = View;\n  static dependencies = [\n    'eventEmitter',\n    'fullScreenManager',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _fullScreenManager: IFullScreenManager;\n  private _textMap: ITextMap;\n  private _interceptor: KeyboardInterceptor;\n  private _tooltipService: ITooltipService;\n  private _theme: IThemeService;\n\n  private _isInFullScreen: boolean;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    fullScreenManager,\n    textMap,\n    tooltipService,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    fullScreenManager: IFullScreenManager;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n    theme: IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._fullScreenManager = fullScreenManager;\n    this._textMap = textMap;\n    this._theme = theme;\n    this._tooltipService = tooltipService;\n\n    this._isInFullScreen = null;\n\n    this._bindCallbacks();\n\n    this._initUI();\n\n    this._bindEvents();\n\n    this.setControlStatus(false);\n\n    if (!this._fullScreenManager.isEnabled) {\n      this.hide();\n    }\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._toggleFullScreen = this._toggleFullScreen.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this.setControlStatus]],\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: IFullScreenViewConfig = {\n      callbacks: {\n        onButtonClick: this._toggleFullScreen,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n      theme: this._theme,\n    };\n\n    this.view = new FullScreenControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: (e: Event) => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n      },\n      [KEYCODES.ENTER]: (e: Event) => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _toggleFullScreen() {\n    if (this._isInFullScreen) {\n      this._exitFullScreen();\n    } else {\n      this._enterFullScreen();\n    }\n  }\n\n  private _enterFullScreen() {\n    this._fullScreenManager.enterFullScreen();\n  }\n\n  private _exitFullScreen() {\n    this._fullScreenManager.exitFullScreen();\n  }\n\n  setControlStatus(isInFullScreen: boolean) {\n    this._isInFullScreen = isInFullScreen;\n    this.view.setState({ isInFullScreen: this._isInFullScreen });\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._fullScreenManager = null;\n    this._textMap = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport { ITooltipReference } from '../../core/tooltip/types';\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\nimport { ILogoViewStyles, ILogoViewCallbacks, ILogoViewConfig } from './types';\nimport { logoTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { ITextMap } from '../../../text-map/types';\n\nimport styles from './logo.scss';\n\nclass LogoView extends View<ILogoViewStyles> implements IView<ILogoViewStyles> {\n  private _tooltipReference: ITooltipReference;\n  private _callbacks: ILogoViewCallbacks;\n  private _textMap: ITextMap;\n\n  private _$node: HTMLElement;\n  private _$logo: HTMLElement;\n  private _$placeholder: HTMLElement;\n\n  constructor(config: ILogoViewConfig) {\n    super();\n    const { callbacks, textMap, tooltipService } = config;\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$node = htmlToElement(\n      logoTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.LOGO_LABEL),\n        },\n      }),\n    );\n\n    this._$logo = getElementByHook(this._$node, 'company-logo');\n    this._$placeholder = getElementByHook(this._$node, 'logo-placeholder');\n\n    this._tooltipReference = tooltipService.createReference(this._$node, {\n      text: this._textMap.get(TEXT_LABELS.LOGO_TOOLTIP),\n    });\n\n    this.setLogo(config.logo);\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  setLogo(url: string) {\n    if (url) {\n      this._$logo.classList.remove(this.styleNames.hidden);\n      this._$placeholder.classList.add(this.styleNames.hidden);\n      this._$logo.setAttribute('src', url);\n    } else {\n      this._$logo.classList.add(this.styleNames.hidden);\n      this._$placeholder.classList.remove(this.styleNames.hidden);\n      this._$logo.removeAttribute('src');\n    }\n  }\n\n  setDisplayAsLink(flag: boolean) {\n    if (flag) {\n      this._$node.classList.add(this.styleNames.link);\n      this._tooltipReference.enable();\n    } else {\n      this._$node.classList.remove(this.styleNames.link);\n      this._tooltipReference.disable();\n    }\n  }\n\n  private _bindCallbacks() {\n    this._onNodeClick = this._onNodeClick.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._onNodeClick);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._onNodeClick);\n  }\n\n  private _onNodeClick() {\n    this._$node.focus();\n    this._callbacks.onLogoClick();\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$logo = null;\n    this._$placeholder = null;\n\n    this._tooltipReference = null;\n    this._textMap = null;\n  }\n}\n\nLogoView.extendStyleNames(styles);\n\nexport default LogoView;\n","import playerAPI from '../../../../core/player-api-decorator';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { UI_EVENTS } from '../../../../constants';\nimport View from './logo.view';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport { ILogoControl, ILogoViewConfig } from './types';\nimport { ITextMap } from '../../../text-map/types';\nimport { IPlayerConfig } from '../../../../core/config';\n\nexport default class Logo implements ILogoControl {\n  static moduleName = 'logo';\n  static View = View;\n  static dependencies = ['config', 'eventEmitter', 'textMap', 'tooltipService'];\n\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n\n  private _interceptor: KeyboardInterceptor;\n  private _callback: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    config,\n    textMap,\n    tooltipService,\n  }: {\n    eventEmitter: IEventEmitter;\n    config: IPlayerConfig;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n\n    this._initUI();\n    this._initInterceptor();\n\n    const logoConfig = {\n      ...(typeof config.logo === 'object' ? config.logo : {}),\n    };\n\n    this.setLogo(logoConfig.src);\n    this.setLogoClickCallback(logoConfig.callback);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._triggerCallback = this._triggerCallback.bind(this);\n  }\n\n  private _initUI() {\n    const config: ILogoViewConfig = {\n      callbacks: {\n        onLogoClick: this._triggerCallback,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new Logo.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._triggerCallback();\n      },\n      [KEYCODES.ENTER]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._triggerCallback();\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _triggerCallback() {\n    if (this._callback) {\n      this._callback();\n    }\n  }\n\n  /**\n   * Method for setting source of image, that would be used as logo\n   * @param src - Source of logo\n   * @example\n   * player.setLogo('https://example.com/logo.png');\n   *\n   */\n  @playerAPI()\n  setLogo(src: string) {\n    this.view.setLogo(src);\n  }\n\n  /**\n   * Method for attaching callback for click on logo\n   *\n   * @param callback - Your function\n   *\n   * @example\n   * const callback = () => {\n   *   console.log('Click on title);\n   * }\n   * player.setLogoClickCallback(callback);\n   *\n   */\n  @playerAPI()\n  setLogoClickCallback(callback?: Function) {\n    this._callback = callback;\n    this.view.setDisplayAsLink(Boolean(this._callback));\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._textMap = null;\n  }\n}\n","import DependencyContainer from './dependency-container';\n\nimport RootContainer from '../modules/root-container/root-container';\nimport EventEmitter from '../modules/event-emitter/event-emitter';\nimport Engine from '../modules/playback-engine/playback-engine';\nimport ThemeService from '../modules/ui/core/theme';\nimport TextMap from '../modules/text-map/text-map';\n\nimport FullScreenManager from '../modules/full-screen-manager/full-screen-manager';\n\nimport LiveStateEngine from '../modules/playback-engine/live-state-engine';\nimport KeyboardControls from '../modules/keyboard-control/keyboard-control';\nimport DebugPanel from '../modules/ui/debug-panel/debug-panel';\n\nimport Screen from '../modules/ui/screen/screen';\nimport InteractionIndicator from '../modules/ui/interaction-indicator/interaction-indicator';\n\nimport Overlay from '../modules/ui/overlay/overlay';\nimport Loader from '../modules/ui/loader/loader';\n\nimport MainUIBlock from '../modules/ui/main-ui-block/main-ui-block';\nimport TopBlock from '../modules/ui/top-block/top-block';\nimport Title from '../modules/ui/title/title';\nimport LiveIndicator from '../modules/ui/live-indicator/live-indicator';\n\nimport BottomBlock from '../modules/ui/bottom-block/bottom-block';\nimport ProgressControl from '../modules/ui/controls/progress/progress';\nimport PlayControl from '../modules/ui/controls/play/play';\nimport TimeControl from '../modules/ui/controls/time/time';\nimport VolumeControl from '../modules/ui/controls/volume/volume';\nimport FullScreenControl from '../modules/ui/controls/full-screen/full-screen';\nimport Logo from '../modules/ui/controls/logo/logo';\n\nimport { TooltipService } from '../modules/ui/core/tooltip';\n\nconst { asClass } = DependencyContainer;\n\nexport const modules: { [id: string]: any } = {\n  RootContainer,\n  EventEmitter,\n  Engine,\n  ThemeService,\n  TextMap,\n\n  FullScreenManager,\n\n  LiveStateEngine,\n  KeyboardControls,\n  DebugPanel,\n\n  Screen,\n  InteractionIndicator,\n\n  Overlay,\n  Loader,\n\n  MainUIBlock,\n\n  TopBlock,\n  LiveIndicator,\n  Title,\n\n  BottomBlock,\n  ProgressControl,\n  PlayControl,\n  TimeControl,\n  VolumeControl,\n  FullScreenControl,\n  Logo,\n\n  TooltipService,\n};\n\nconst DIModules: { [id: string]: any } = Object.keys(modules).reduce(\n  (DIModules: { [id: string]: any }, key: string) => {\n    const module = modules[key] as any;\n    if (!module.moduleName) {\n      throw new Error(`No moduleName in module: ${key}`);\n    }\n\n    DIModules[module.moduleName] = asClass(module).scoped();\n    return DIModules;\n  },\n  {},\n);\n\nexport default DIModules;\n","/**\n * `true` if we are running inside a web browser, `false` otherwise (e.g. running inside Node.js).\n */\nexport const isBrowser = typeof window !== 'undefined';\n\n/**\n * This is a map which lists native support of formats and APIs.\n * It gets filled during runtime with the relevant values to the current environment.\n */\nexport const NativeEnvironmentSupport: { [format: string]: boolean } = {\n  MSE: false,\n  HLS: false,\n  DASH: false,\n  MP4: false,\n  WEBM: false,\n  OGG: false,\n  MOV: false,\n  MKV: false,\n};\n\n/* ignore coverage */\nfunction detectEnvironment() {\n  if (!isBrowser) {\n    return; // Not in a browser\n  }\n  NativeEnvironmentSupport.MSE =\n    'WebKitMediaSource' in window || 'MediaSource' in window;\n  const video = document.createElement('video');\n  if (typeof video.canPlayType !== 'function') {\n    return; // env doesn't support HTMLMediaElement (e.g PhantomJS)\n  }\n  if (\n    video.canPlayType('application/x-mpegURL') ||\n    video.canPlayType('application/vnd.apple.mpegURL')\n  ) {\n    NativeEnvironmentSupport.HLS = true;\n  }\n  if (video.canPlayType('application/dash+xml')) {\n    NativeEnvironmentSupport.DASH = true;\n  }\n  if (video.canPlayType('video/mp4')) {\n    NativeEnvironmentSupport.MP4 = true;\n  }\n  if (video.canPlayType('video/webm')) {\n    NativeEnvironmentSupport.WEBM = true;\n  }\n  if (video.canPlayType('video/ogg')) {\n    NativeEnvironmentSupport.OGG = true;\n  }\n  if (video.canPlayType('video/quicktime')) {\n    NativeEnvironmentSupport.MOV = true;\n  }\n  if (video.canPlayType('video/x-matroska')) {\n    NativeEnvironmentSupport.MKV = true;\n  }\n}\n\ndetectEnvironment(); // Run once\n","import { VIDEO_EVENTS, ERRORS } from '../../../constants';\n\nimport {\n  geOverallBufferLength,\n  getNearestBufferSegmentInfo,\n} from '../../../utils/video-data';\nimport { NativeEnvironmentSupport } from '../../../utils/environment-detection';\nimport { IPlaybackAdapter } from './types';\nimport { IEventEmitter } from '../../event-emitter/types';\n\nconst NATIVE_ERROR_CODES = {\n  ABORTED: 1,\n  NETWORK: 2,\n  DECODE: 3,\n  SRC_NOT_SUPPORTED: 4,\n};\n\nimport {\n  MediaStreamTypes,\n  MediaStreamDeliveryPriority,\n} from '../../../constants';\n\nexport default function getNativeAdapterCreator(\n  streamType: MediaStreamTypes,\n  deliveryPriority: MediaStreamDeliveryPriority,\n) {\n  class NativeAdapter implements IPlaybackAdapter {\n    static isSupported(): boolean {\n      return NativeEnvironmentSupport[streamType];\n    }\n\n    private mediaStreams: any;\n    private eventEmitter: IEventEmitter;\n    private currentLevel: number;\n    private videoElement: HTMLVideoElement;\n\n    constructor(eventEmitter: IEventEmitter) {\n      this.mediaStreams = null;\n      this.eventEmitter = eventEmitter;\n      this.currentLevel = 0;\n\n      this._bindCallbacks();\n    }\n\n    get currentUrl() {\n      return this.mediaStreams[this.currentLevel].url;\n    }\n    //@ts-ignore\n    get syncWithLiveTime() {\n      // TODO: implement syncWithLiveTime for `native`\n      return undefined;\n    }\n\n    get isDynamicContent() {\n      return !isFinite(this.videoElement.duration);\n    }\n\n    get isDynamicContentEnded() {\n      // TODO: implement isDynamicContentEnded\n      return false;\n    }\n\n    get isSyncWithLive() {\n      // TODO: implement isSyncWithLive for `native`\n      return false;\n    }\n\n    get isSeekAvailable() {\n      return true;\n      //Need to find better solution\n      /*\n      if (this.isDynamicContent) {\n        return false;\n      }\n\n      return Boolean(this.videoElement.seekable.length);\n      */\n    }\n\n    get mediaStreamDeliveryPriority() {\n      return deliveryPriority;\n    }\n\n    get mediaStreamType() {\n      return streamType;\n    }\n\n    get debugInfo() {\n      if (this.videoElement) {\n        const { buffered, currentTime } = this.videoElement;\n\n        const overallBufferLength = geOverallBufferLength(buffered);\n        const nearestBufferSegInfo = getNearestBufferSegmentInfo(\n          buffered,\n          currentTime,\n        );\n\n        return {\n          ...this.mediaStreams[0],\n          deliveryPriority: this.mediaStreamDeliveryPriority,\n          overallBufferLength,\n          nearestBufferSegInfo,\n        };\n      }\n\n      return {};\n    }\n\n    private _bindCallbacks() {\n      this._broadcastError = this._broadcastError.bind(this);\n    }\n\n    canPlay(mediaType: MediaStreamTypes) {\n      return mediaType === streamType;\n    }\n\n    setMediaStreams(mediaStreams: any) {\n      this.mediaStreams = mediaStreams;\n    }\n\n    private _logError(error: string, errorEvent: MediaError) {\n      this.eventEmitter.emit(VIDEO_EVENTS.ERROR, {\n        errorType: error,\n        streamType,\n        streamProvider: 'native',\n        errorInstance: errorEvent,\n      });\n    }\n\n    private _broadcastError() {\n      const error = this.videoElement.error;\n      if (!error) {\n        this._logError(ERRORS.UNKNOWN, null);\n        return;\n      }\n\n      switch (error.code) {\n        case NATIVE_ERROR_CODES.ABORTED:\n          //No need for broadcasting\n\n          break;\n        case NATIVE_ERROR_CODES.NETWORK:\n          this._logError(ERRORS.CONTENT_LOAD, error);\n          break;\n        case NATIVE_ERROR_CODES.DECODE:\n          this._logError(ERRORS.MEDIA, error);\n          break;\n        case NATIVE_ERROR_CODES.SRC_NOT_SUPPORTED:\n          /*\n            Our url checks would not allow not supported formats, so only case would be\n             when video tag couldn't retriev any info from endpoit\n          */\n\n          this._logError(ERRORS.CONTENT_LOAD, error);\n\n          break;\n        default:\n          this._logError(ERRORS.UNKNOWN, error);\n          break;\n      }\n    }\n\n    attach(videoElement: HTMLVideoElement) {\n      this.videoElement = videoElement;\n      this.videoElement.addEventListener('error', this._broadcastError);\n      this.videoElement.src = this.mediaStreams[this.currentLevel].url;\n    }\n\n    detach() {\n      this.videoElement.removeEventListener('error', this._broadcastError);\n      this.videoElement.removeAttribute('src');\n      this.videoElement = null;\n    }\n  }\n\n  return NativeAdapter;\n}\n","import getNativeAdapterCreator from './native';\n\nimport {\n  MediaStreamTypes,\n  MediaStreamDeliveryPriority,\n} from '../../../constants';\n\nconst defaultPlaybackAdapters = [\n  getNativeAdapterCreator(\n    MediaStreamTypes.DASH,\n    MediaStreamDeliveryPriority.NATIVE_ADAPTIVE,\n  ),\n  getNativeAdapterCreator(\n    MediaStreamTypes.HLS,\n    MediaStreamDeliveryPriority.NATIVE_ADAPTIVE,\n  ),\n  getNativeAdapterCreator(\n    MediaStreamTypes.MP4,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ),\n  getNativeAdapterCreator(\n    MediaStreamTypes.WEBM,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ), // Native WebM (Chrome, Firefox)\n  getNativeAdapterCreator(\n    MediaStreamTypes.OGG,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ), // Native WebM (Chrome, Firefox)\n  getNativeAdapterCreator(\n    MediaStreamTypes.MOV,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ), // Native QuickTime .mov (Safari)\n  getNativeAdapterCreator(\n    MediaStreamTypes.MKV,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ),\n];\n\nexport default defaultPlaybackAdapters;\n","import DependencyContainer from './dependency-container';\nimport PlayerFacade from './player-facade';\n\nimport defaultModules from './default-modules';\nimport defaultPlaybackAdapters from '../modules/playback-engine/adapters/default-set';\n\nimport { IThemeConfig } from '../modules/ui/core/theme';\n\nimport { IPlayerConfig } from './config';\n\nlet additionalModules: { [id: string]: any } = {};\nlet playbackAdapters: any[] = [...defaultPlaybackAdapters];\n\nexport const container = DependencyContainer.createContainer();\ncontainer.register(defaultModules);\nconst defaultModulesNames = Object.keys(defaultModules);\n\nexport function registerModule(id: string, module: any) {\n  additionalModules[id] = module;\n}\n\nexport function registerPlaybackAdapter(adapter: any) {\n  playbackAdapters.push(adapter);\n}\n\nexport function clearAdditionalModules() {\n  additionalModules = {};\n}\n\nexport function clearPlaybackAdapters() {\n  playbackAdapters = [...defaultPlaybackAdapters];\n}\n\nexport function create(params: IPlayerConfig = {}, themeConfig?: IThemeConfig) {\n  const scope = container.createScope();\n\n  const additionalModuleNames = Object.keys(additionalModules);\n\n  if (additionalModuleNames.length) {\n    additionalModuleNames.forEach(moduleName =>\n      scope.registerClass(moduleName, additionalModules[moduleName], {\n        lifetime: DependencyContainer.Lifetime.Scoped,\n      }),\n    );\n  }\n\n  scope.registerValue('availablePlaybackAdapters', playbackAdapters);\n\n  return new PlayerFacade(\n    params,\n    scope,\n    defaultModulesNames,\n    additionalModuleNames,\n    themeConfig,\n  );\n}\n","import * as playerFactoryMethods from './core/player-factory';\nimport { modules as DefaultModules } from './core/default-modules';\nimport playerAPIDecorator from './core/player-api-decorator';\nimport {\n  ERRORS,\n  UI_EVENTS,\n  VIDEO_EVENTS,\n  TEXT_LABELS,\n  MediaStreamTypes as MEDIA_STREAM_TYPES,\n  MediaStreamDeliveryPriority as MEDIA_STREAM_DELIVERY_PRIORITY,\n  EngineState as ENGINE_STATES,\n  LiveState as LIVE_STATES,\n} from './constants';\nimport { Tooltip } from './modules/ui/core/tooltip';\nimport { IPlaybackAdapter } from './modules/playback-engine/adapters/types';\nimport { VideoViewMode as VIDEO_VIEW_MODES } from './modules/ui/screen/types';\n\nexport {\n  ERRORS,\n  UI_EVENTS,\n  VIDEO_EVENTS,\n  TEXT_LABELS,\n  MEDIA_STREAM_TYPES,\n  MEDIA_STREAM_DELIVERY_PRIORITY,\n  ENGINE_STATES,\n  LIVE_STATES,\n  VIDEO_VIEW_MODES,\n  Tooltip,\n  playerAPIDecorator,\n  DefaultModules,\n  IPlaybackAdapter,\n};\n\nexport * from './core/player-factory';\n\nexport default {\n  ...playerFactoryMethods,\n  UI_EVENTS,\n  VIDEO_EVENTS,\n  TEXT_LABELS,\n  MEDIA_STREAM_TYPES,\n  MEDIA_STREAM_DELIVERY_PRIORITY,\n  ENGINE_STATES,\n  LIVE_STATES,\n  VIDEO_VIEW_MODES,\n  Tooltip,\n  playerAPIDecorator,\n  DefaultModules,\n};\n"],"names":["extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","Lifetime","message","_super","_this","enumerable","value","name","Error","captureStackTrace","tslib_1.__extends","functionName","expectedType","givenType","ExtendableError","PROPERTY_FOR_DEPENDENCIES","makeFluidInterface","obj","setLifetime","lifetime","transient","Transient","scoped","Scoped","singleton","Singelton","asValue","resolve","asFunction","fn","options","NotAFunctionError","defaults","generateResolve","result","bind","asClass","Type","_i","args","dependencyParseTarget","dependencies","container","wrapper","reduce","dependency","createErrorMessage","resolutionStack","slice","push","resolutionPathString","join","msg","FAMILY_TREE","_parentContainer","concat","cache","Container","registrations","_registrations","verbatimValue","nameValueToObject","keys","forEach","valueToRegister","isArray","register","registration","_registerAs","root","_resolutionStack","indexOf","ResolutionError","cached","resolved","undefined","_a","pop","err","createContainer","__parentContainer","IPHONE_PATTERN","IPOD_PATTERN","IPAD_PATTERN","ANDROID_PATTERN","SAFARI_PATTERN","isIE","window","MSStream","getUserAgent","navigator","userAgent","isIPhone","test","isIPod","isIPad","isIOS","isAndroid","isSafari","convertToDeviceRelatedConfig","params","showInteractionIndicator","screen","disableClickProcessing","nativeControls","title","loader","controls","convertUIConfigForIOS","convertUIConfigForAndroid","playerAPI","property","descriptor","desc1","desc2","methodName","get","set","scope","defaultModulesNames","additionalModuleNames","themeConfig","registerValue","config","_config","_resolveAdditionalModules","_resolveDefaultModules","Player","modulesNames","_defaultModules","modules","moduleName","_additionalModules","resolvedModule","_addPlayerAPIFromModule","module","_destroyed","apply","playerMethodDescriptor","configurable","_getWrappedCallToModuleFunction","apiKey","_getPlayerAPIMethodDescriptor","_clearPlayerAPIForModule","destroy","MapShim","Map","getIndex","arr","some","entry","index","anonymous","__entries__","prototypeAccessors","size","delete","entries","splice","has","clear","callback","ctx","list","defineProperties","isBrowser","document","global$1","global","Math","self","Function","requestAnimationFrame$1","requestAnimationFrame","setTimeout","Date","now","trailingTimeout","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","throttle","addObserver","observer","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","filter","gatherActive","hasActive","broadcastActive","addEventListener","observe","attributes","childList","characterData","subtree","removeEventListener","disconnect","ref","propertyName","getInstance","instance_","defineConfigurable","props","writable","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","styles","positions","len","position","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","paddings","getPaddings","horizPad","left","right","vertPad","top","bottom","width","height","boxSizing","round","documentElement","isDocumentElement","vertScrollbar","horizScrollbar","abs","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","getBBox","getContentRect","bbox","getSVGContentRect","x","y","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","rect","broadcastRect","ResizeObserverEntry","rectInit","Constr","contentRect","DOMRectReadOnly","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","this$1","observation","map","WeakMap","ResizeObserver","method","_activePointers","_activeKeys","pointerStartEvents","pointerEndEvents","event","isPrimary","touches","setImmediate","max","keyCode","which","pointer","Boolean","interactionTypeHandler","engage","handleWindowBlurEvent","handleKeyStartEvent","handleKeyEndEvent","handlePointerStartEvent","handlePointerEndEvent","getInteractionType","disengage","supportsFocusIn","focusEventName","blurEventName","current","lock","used","script","initial","source","type","interactionType","setAttribute","MediaStreamTypes","MediaStreamDeliveryPriority","handleFocusEvent","engageInteractionTypeObserver","getUsedFocusSource","getCurrentFocusSource","lockFocusSource","unlock","unlockFocusSource","removeAttribute","EngineState","UI_EVENTS","PLAY_TRIGGERED","PLAY_OVERLAY_TRIGGERED","PAUSE_TRIGGERED","PROGRESS_CHANGE_TRIGGERED","VOLUME_CHANGE_TRIGGERED","MUTE_STATUS_TRIGGERED","FULLSCREEN_STATUS_CHANGED","MOUSE_ENTER_ON_PLAYER_TRIGGERED","MOUSE_MOVE_ON_PLAYER_TRIGGERED","MOUSE_LEAVE_ON_PLAYER_TRIGGERED","CONTROL_BLOCK_HIDE_TRIGGERED","CONTROL_BLOCK_SHOW_TRIGGERED","PROGRESS_MANIPULATION_STARTED","PROGRESS_MANIPULATION_ENDED","KEYBOARD_KEYDOWN_INTERCEPTED","LOADER_SHOW_TRIGGERED","LOADER_HIDE_TRIGGERED","LOADING_COVER_SHOW_TRIGGERED","LOADING_COVER_HIDE_TRIGGERED","TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED","GO_BACKWARD_WITH_KEYBOARD_TRIGGERED","GO_FORWARD_WITH_KEYBOARD_TRIGGERED","INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED","DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED","MUTE_SOUND_WITH_KEYBOARD_TRIGGERED","UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED","HIDE_INTERACTION_INDICATOR_TRIGGERED","PLAYER_WIDTH_CHANGE_TRIGGERED","PLAYER_HEIGHT_CHANGE_TRIGGERED","PLAY_WITH_SCREEN_CLICK_TRIGGERED","PAUSE_WITH_SCREEN_CLICK_TRIGGERED","CONTROL_DRAG_START","CONTROL_DRAG_END","MAIN_BLOCK_HIDE_TRIGGERED","MAIN_BLOCK_SHOW_TRIGGERED","PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED","PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED","RESIZE","VIDEO_EVENTS","ERROR","STATE_CHANGED","LIVE_STATE_CHANGED","DYNAMIC_CONTENT_ENDED","CHUNK_LOADED","CURRENT_TIME_UPDATED","DURATION_UPDATED","VOLUME_STATUS_CHANGED","VOLUME_CHANGED","MUTE_CHANGED","SEEK_IN_PROGRESS","UPLOAD_STALLED","UPLOAD_SUSPEND","PLAY_REQUEST_TRIGGERED","PLAY_ABORTED","RESET","Errors","SRC_PARSE","MANIFEST_LOAD","MANIFEST_PARSE","MANIFEST_INCOMPATIBLE","LEVEL_LOAD","CONTENT_LOAD","CONTENT_PARSE","MEDIA","UNKNOWN","LOGO_LABEL","LOGO_TOOLTIP","LIVE_INDICATOR_TEXT","LIVE_SYNC_LABEL","LIVE_SYNC_TOOLTIP","ENTER_FULL_SCREEN_LABEL","ENTER_FULL_SCREEN_TOOLTIP","EXIT_FULL_SCREEN_LABEL","EXIT_FULL_SCREEN_TOOLTIP","PLAY_CONTROL_LABEL","PAUSE_CONTROL_LABEL","PROGRESS_CONTROL_LABEL","PROGRESS_CONTROL_VALUE","UNMUTE_CONTROL_LABEL","UNMUTE_CONTROL_TOOLTIP","MUTE_CONTROL_LABEL","MUTE_CONTROL_TOOLTIP","VOLUME_CONTROL_LABEL","VOLUME_CONTROL_VALUE","LiveState","html","div","createElement","innerHTML","trim","firstChild","classnames","commonjsHelpers.createCommonjsModule","hasOwn","classNames","classes","arg","argType","inner","exports","default","theme","moduleTheme","_moduleTheme","registerModuleTheme","_themeStyles","Stylable","_styles","sourceStyles","partialStyles","styleName","extendStyles","styleInject","css","insertAt","head","getElementsByTagName","style","insertBefore","appendChild","styleSheet","cssText","createTextNode","fillAllSpace","callbacks","_callbacks","_$node","htmlToElement","styleNames","setFillAllSpaceFlag","setWidth","setHeight","_bindEvents","RootContainerView","onMouseEnter","onMouseMove","onMouseLeave","offsetWidth","offsetHeight","classList","add","hidden","remove","node","isFullScreen","fullScreen","isFillAllSpace","_unbindEvents","parentNode","removeChild","View","arrayLike","initialValue","string","pattern","match","exec","extendStyleNames","matchesSelectorFn","ALIASES","HTMLElement","isElementMatchesSelector","element","selector","querySelectorAll","CSS_SELECTOR_PATTERN","QUERY_ATTR_PATTERN","cssSelector","results","forEachMatch","replace","selectorPart1","attribute","_b","prefix","mode","parseInt","styleSheets","rules","cssRules","rule","selectorText","getQueriesFromCssSelector","getQueriesFromRules","e","DEFAULT_QUERY_PREFIX","_element","_queryPrefix","_queries","matchedSelectors","queries","getQueries","query","_query","sort","a","getQueriesForElement","ElementQueries","elementWidth","attributeName","attributeValue","_getQueryAttributeValue","_setQueryAttribute","DEFAULT_CONFIG","eventEmitter","_eventEmitter","isHidden","_bindCallbacks","_initUI","RootContainer","view","getNode","_onResized","_broadcastMouseEnter","_broadcastMouseMove","_broadcastMouseLeave","bindEvents","setFullScreenStatus","sizeConfig","_elementQueries","appendComponentNode","emit","running","last","action","removeClass","update","_disengageFocusWithin","elem","activeElement","getElementsByClassName","_disengageFocusSource","focusSource","getWidth","getHeight","_enableFocusInterceptors","_resizeObserver","flag","hide","show","_disableFocusInterceptors","tslib_1.__decorate","eventemitter3_1","Events","addListener","emitter","context","once","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","eventNames","events","names","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","a1","a2","a3","a4","a5","removeListener","j","on","removeAllListeners","off","prefixed","EventEmitterModule","eventsMap","defaultFnContext","eventName","fnContext","unbindEvent","NATIVE_VIDEO_EVENTS_TO_STATE","video","_video","_currentState","_isMetadataLoaded","_statesTimestamps","StateEngine","_processEventFromVideo","_initialTimeStamp","state","_setInitialTimeStamp","videoEl","setState","LOAD_STARTED","_setStateTimestamp","METADATA_LOADED","READY_TO_PLAY","PLAY_REQUESTED","paused","PLAYING","WAITING","played","PAUSED","ENDED","prevState","nextState","NATIVE_VIDEO_TO_BROADCAST","_currentMute","muted","_currentVolume","volume","NativeEventsBroadcaster","currentTime","duration","mediaStreams","availableAdapters","playableAdapters","groupedStreams","typeMap","mediaStream","groupStreamsByMediaType","groupedStreamKeys","adapter","mediaType","mediaStreams_1","canPlay","setMediaStreams","firstAdapter","secondAdapter","mediaStreamDeliveryPriority","extensionsMap","mp4","MP4","webm","WEBM","m3u8","HLS","mpd","DASH","ogg","OGG","mkv","MKV","mov","MOV","playbackAdapters","_playableAdapters","_availableAdapters","_attachedAdapter","isSupported","AdaptersStrategy","mediaSources","mediaSource","url","anchorElement","href","path","pathname","split","toLowerCase","errorType","ERRORS","streamSrc","src","_autoDetectSourceTypes","resolveAdapters","attach","detach","_detachCurrentAdapter","_resolvePlayableAdapters","_connectAdapterToVideo","availablePlaybackAdapters","_currentSrc","_createVideoTag","videoElement","_stateEngine","_nativeEventsBroadcaster","_adapterStrategy","AdapterStrategy","_applyConfig","Engine","tagName","preload","autoPlay","loop","playInline","crossOrigin","setPreload","setAutoPlay","setLoop","setMute","setVolume","setPlayInline","setCrossOrigin","setSrc","attachedAdapter","isDynamicContent","isDynamicContentEnded","isSeekAvailable","isMetadataLoaded","getPreload","getAutoPlay","isSyncWithLive","clearTimestamps","connectAdapter","SRC_SET","pause","setCurrentTime","_pauseRequested","_playPromise","play","then","catch","isVideoPaused","ended","syncWithLiveTime","sec","getDurationTime","getCurrentTime","min","parsedVolume","Number","isNaN","getVolume","isMuted","isAutoPlay","autoplay","isLoop","rate","playbackRate","time","videoWidth","videoHeight","buffered","isPlayInline","getAttribute","data","debugInfo","viewDimensions","_getViewDimensions","loadingStateTimestamps","stateTimestamps","SHORTHAND_HEX_COLOR_PATTERN","HEX_COLOR_PATTERN","color","alpha","_","g","generatedIds","classImportName","kebabName","camelToKebab","className","newID","getUniquePostfix","acc","getUniqueId","getUniqueClassName","StyleSheet","_styleNode","discoveredStyles","_rulesByModule","_getModuleCSS","_data","_classNamesByModule","generateClassNames","moduleRules","moduleClassNames","_getRuleCSS","ruleClassName","complexRules","ruleName","_getRuleStyles","DEFAULT_THEME_CONFIG","liveColor","progressColor","_styleSheet","ThemeService","getModuleClassNames","TEXT_LABELS","_textMap","DEFAULT_TEXTS","texts","TextMap","id","text","fnMap","_elem","_callback","_fullscreenFn","ret","getFullScreenFn","DesktopFullScreen","fullscreenElement","isAPIExist","fullscreenEnabled","fullscreenchange","isEnabled","request","requestFullscreen","ALLOW_KEYBOARD_INPUT","exitFullscreen","isFullScreenRequested","_enterWhenHasMetaData","IOSFullScreen","webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","isInFullScreen","readyState","webkitExitFullscreen","exitFullScreenOnEnd","enterFullScreenOnPlay","exitFullScreenOnPause","pauseVideoOnFullScreenExit","engine","rootContainer","_engine","_isEnabled","_exitFullScreenOnEnd","_enterFullScreenOnPlay","_exitFullScreenOnPause","_pauseVideoOnFullScreenExit","_onChange","_helper","FullScreenManager","_processNextStateFromEngine","_enterOnPlayRequested","exitFullScreen","enterFullScreen","_exitOnEnd","_exitOnPauseRequested","exit","SEEK_BY_UI_EVENTS","_state","NONE","_isSeekedByUIWhilePlaying","LiveStateEngine","_processStateChange","_processSeekByUI","_onDynamicContentEnded","_setState","INITIAL","syncWithLive","NOT_SYNC","SYNC","getCurrentState","KEYCODES","SPACE_BAR","ENTER","TAB","LEFT_ARROW","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","DEBUG_KEY","_node","_attachCallbacks","KeyboardInterceptorCore","keyCodeCallbacks","_processKeyboardInput","_unattachCallbacks","_rootNode","disableControlWithKeyboard","_initInterceptor","KeyboardControl","_keyboardInterceptor","KeyboardInterceptor","_attachDefaultControls","addCallbacks","preventDefault","togglePlayback","goBackward","goForward","increaseVolume","decreaseVolume","_destroyInterceptor","hook","querySelector","shouldAdd","_initDOM","DebugPanelView","_$closeButton","getElementByHook","_$infoContainer","onCloseButtonClick","toggleNodeClass","info","json","JSON","stringify","cls","number","boolean","null","VideoViewMode","keyboardControl","addKeyControl","_keyControlCallback","DebugPanel","ctrlKey","shiftKey","updateInfo","deliveryPriority","currentBitrate","overallBufferLength","nearestBufferSegInfo","bitrates","bwEstimate","setInfo","getDebugInfo","clearUpdateInterval","_interval","setInterval","clearInterval","setUpdateInterval","playbackViewNode","_styleNamesByViewMode","REGULAR","regularMode","BLUR","blurMode","FILL","fillMode","setViewMode","ScreenView","_updateBackground","_$playbackNode","_$canvas","_ctx","getContext","onWrapperMouseClick","onWrapperMouseDblClick","widthHeightRatio","_widthHeightRatio","isHorizontal","horizontalVideo","verticalVideo","focus","hiddenCursor","viewMode","resetBackground","_startUpdatingBackground","_stopUpdatingBackground","_currentMode","setBackgroundWidth","setBackgroundHeight","_requestAnimationFrameID","cancelAnimationFrame","_clearBackground","area","sourceX","sourceY","sourceWidth","sourceHeight","areaX","areaY","areaWidth","areaHeight","drawImage","canvasWidth","canvasHeight","sourceAreas","_getSourceAreas","canvasAreas","_getCanvasAreas","_drawAreaFromSource","_drawBackground","clearRect","fullScreenManager","interactionIndicator","_fullScreenManager","_interactionIndicator","_isInFullScreen","_delayedToggleVideoPlaybackTimeout","screenConfig","_isClickProcessingDisabled","Screen","_processNodeClick","_processNodeDblClick","_toggleVideoPlayback","isNativeControls","_setFullScreenStatus","focusOnNode","_updateBackgroundSize","resetAspectRatio","setBackgroundSize","showCursor","hideCursor","_showPlaybackChangeIndicator","_setDelayedPlaybackToggle","_isDelayedPlaybackToggleExist","_clearDelayedPlaybackToggle","_hideDelayedPlaybackChangeIndicator","_toggleFullScreen","showPause","showPlay","hideIcons","clearTimeout","_exitFullScreen","_enterFullScreen","_playIcon","playIconTemplate","_pauseIcon","pauseIconTemplate","_forwardIcon","forwardIconTemplate","SECONDS_COUNT","_rewindIcon","rewindIconTemplate","_increaseVolumeIcon","increaseVolumeIconTemplate","_decreaseVolumeIcon","decreaseVolumeIconTemplate","_muteIcon","muteIconTemplate","InteractionIndicatorView","InteractionIndicator","showRewind","showForward","showIncreaseVolume","showDecreaseVolume","showMute","activatePauseIcon","activatePlayIcon","activateRewindIcon","activateForwardIcon","activateMuteVolumeIcon","activateIncreaseVolumeIcon","activateDecreaseVolumeIcon","deactivateIcon","setPoster","OverlayView","themeStyles","_$content","_$playButton","onPlayClick","active","backgroundImage","setTheme","overlayPlaySvgFill","fill","overlayPlaySvgStroke","stroke","_theme","overlay","Overlay","overlayConfig","poster","viewConfig","_playVideo","_updatePlayingStatus","_tryShowContent","_hideContent","_showContent","hideContent","showContent","LoaderView","Loader","_checkForWaitingState","startDelayedShow","isPreloadAvailable","stopDelayedShow","isDelayedShowScheduled","_delayedShowTimeout","elements","MainUIBlockView","$tooltipContainerWrapper","tooltipContainerWrapper","tooltipContainer","topBlock","bottomBlock","shouldAlwaysShow","tooltipService","_topBlock","_bottomBlock","_screen","mainBlockConfig","_shouldAlwaysShow","tooltipContainerNode","_bindViewCallbacks","MainUIBlock","_startHideBlockTimeout","_tryHideContent","_onControlDragStart","_onControlDragEnd","_shouldShowContent","isFocused","_stopHideBlockTimeout","_hideTimeout","_isContentShowingEnabled","_isDragging","_isContentShown","_isBlockFocused","TopBlockView","$titleContainer","$liveIndicatorContainer","liveIndicator","stopPropagation","_preventClickPropagation","activated","_getElementsNodes","TopBlock","elementNodes","TitleView","_$title","onClick","link","titleText","setTitleClickCallback","setTitle","TitleControl","_triggerCallback","setDisplayAsLink","textMap","_tooltipService","LiveIndicatorView","_$liveIndicatorText","_tooltipReference","createReference","toggle","toggleActive","toggleEnded","shouldActivate","disable","enable","isEnded","innerText","shouldShow","LiveIndicator","_isHidden","_isActive","_toggle","_syncWithLive","_toggleActive","_toggleEnded","_isEnded","BottomBlockView","$playContainer","$volumeContainer","$timeContainer","$fullScreenContainer","$logoContainer","$progressBarContainer","logo","progress","onBlockMouseMove","onBlockMouseOut","isShowAlways","showLogoAlways","showLogo","playControlHidden","timeControlHidden","volumeControlHidden","fullScreenControlHidden","logoHidden","progressControlHidden","_initLogo","BottomBlock","playControl","progressControl","timeControl","volumeControl","fullScreenControl","_setFocusState","_removeFocusState","logoConfig","setLogoAlwaysShowFlag","showAlways","hideLogo","setShouldLogoShowAlwaysFlag","showPlayControl","showVolumeControl","showTimeControl","showFullScreenControl","showProgressControl","hidePlayControl","hideVolumeControl","hideTimeControl","hideFullScreenControl","hideProgressControl","seconds","isValid","isFinite","isNegative","date","setSeconds","floor","toISOString","substr","ITooltipPositionPlacement","Tooltip","_$tooltipInner","tooltipVisible","styleKey","tooltipReferenceOffsetX","tooltipReferenceWidth","tooltipReferenceNode","tooltipCenterXfn","tooltipReferenceRect","getBoundingClientRect","tooltipContainerRect","placement","BOTTOM","TOP","SHOW_EVENTS","HIDE_EVENTS","reference","_$reference","_options","_eventListeners","TooltipReference","_isDisabled","getTooltipPositionByReferenceNode","setText","tooltip","_tooltip","TooltipContainer","_getTooltipLeftX","tooltipCenterX","tooltipRect","tooltipLeftX","_tooltipContainer","TooltipService","setStyle","getTooltipPositionStyles","progressPlayed","backgroundColor","progressSeekTo","transperentizeColor","progressBackground","progressSeekBtn","progressSyncBtn","borderColor","getPercentBasedOnXPosition","boundingRect","positionX","clientX","_setPlayedDOMAttributes","_setBufferedDOMAttributes","setUsualMode","ProgressView","_$played","_$buffered","_$seekTo","_$timeIndicators","_$seekButton","_$syncButton","_syncButtonTooltipReference","_$hitbox","_setPlayedByDrag","_startDragOnMouseDown","_stopDragOnMouseUp","_startSeekToByMouse","_stopSeekToByMouse","onSyncWithLiveMouseEnter","onSyncWithLiveMouseLeave","button","percent","onChangePlayedProgress","_startDrag","_stopDrag","_setSeekToDOMAttributes","onSeekToByMouseStart","onSeekToByMouseEnd","onDragStart","isDragging","onDragEnd","String","onSyncWithLiveClick","isSync","liveSync","formatTime","progressPercent","progressNode","progressNodeOffsetX","progressNodeWidth","calcProgressTimeTooltipCenterX","getProgressTimeTooltipPosition","inLive","showSyncWithLive","hideSyncWithLive","durationTime","toFixed","start","end","progressViewTheme","liveStateEngine","_liveStateEngine","_isUserInteracting","_currentProgress","_timeIndicatorsToAdd","setPlayed","setBuffered","ProgressControl","_processLiveStateChange","_updateBufferIndicator","_updateAllIndicators","_onSyncWithLiveMouseEnter","_onSyncWithLiveMouseLeave","_changePlayedProgress","_onSeekToByMouseStart","_onSeekToByMouseEnd","_onUserInteractionStarts","_onUserInteractionEnds","_interceptor","_updateControlOnInterval","_playVideoOnProgressManipulationEnd","_changeCurrentTimeOfVideo","_updateControlInterval","_stopIntervalUpdates","seekTime","showProgressTimeTooltip","hideProgressTimeTooltip","_pauseVideoOnProgressManipulationStart","_updatePlayedIndicator","reset","_initTimeIndicators","_startIntervalUpdates","setLiveSyncStatus","setLiveMode","currentState","_shouldPlayAfterManipulationEnd","getBuffered","updateBuffered","getTimePercent","getNearestBufferSegmentInfo","getOverallBufferedPercent","updatePlayed","getOverallPlayedPercent","_addTimeIndicator","addTimeIndicator","addTimeIndicators","times","clearTimeIndicators","label","_$playbackControl","isPlaying","PlayView","_onButtonClick","onButtonClick","playSvgFill","_isPlaying","setControlStatus","PlayControl","_togglePlayback","_pauseVideo","TimeView","_$currentTime","_$durationTime","_duration","_updateDurationTime","_current","_updateCurrentTime","_isBackward","timeText","setDurationTime","TimeControl","_toggleIntervalUpdates","showDuration","setCurrentTimeBackward","volumeSvgFill","volumeSvgStroke","volumeProgress","&:after","volumeProgressBackground","VolumeView","muteLabel","volumeLabel","_$muteButton","_$volumeNode","_$volume","_muteButtonTooltipReference","_setVolumeByWheel","_setVolumeByClick","_setVolumeByDrag","onVolumeLevelChangeFromInput","deltaX","deltaY","onVolumeLevelChangeFromWheel","iconTemplateProps","volume50IconTemplate","volume0IconTemplate","onToggleMuteClick","_setVolumeDOMAttributes","_setMuteDOMAttributes","volumeViewTheme","_isMuted","getMute","_volume","VolumeControl","_broadcastDragStart","_broadcastDragEnd","_getVolumeLevelFromInput","_getVolumeLevelFromWheel","_toggleMuteStatus","_buttonInterceptor","getButtonNode","_inputInterceptor","getInputNode","_updateVolumeStatus","level","delta","adjustedVolume","validatedVolume","_changeVolumeStatus","_changeVolumeLevel","setVolumeLevel","setMuteStatus","_$toggleFullScreenControl","FullScreenView","inFullScreen","enterFullScreenIconTemplate","fullScreenSvgFill","FullScreenControl","_$logo","_$placeholder","setLogo","LogoView","_onNodeClick","onLogoClick","setLogoClickCallback","Logo","KeyboardControls","Title","DIModules","NativeEnvironmentSupport","MSE","canPlayType","detectEnvironment","NATIVE_ERROR_CODES","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED","streamType","currentLevel","NativeAdapter","geOverallBufferLength","_broadcastError","error","errorEvent","streamProvider","errorInstance","code","_logError","defaultPlaybackAdapters","getNativeAdapterCreator","NATIVE_ADAPTIVE","NATIVE_PROGRESSIVE","additionalModules","DependencyContainer","defaultModules","createScope","registerClass","PlayerFacade","MEDIA_STREAM_TYPES","MEDIA_STREAM_DELIVERY_PRIORITY","ENGINE_STATES","LIVE_STATES","VIDEO_VIEW_MODES","playerAPIDecorator","DefaultModules"],"mappings":"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"}