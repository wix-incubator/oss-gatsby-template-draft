'use strict';

var _PopoverMenuTemplate = require('../../stories/Tooltip/Composite/PopoverMenuTemplate.helpers');

var _protractor = require('../../testkit/protractor');

var _protractor2 = require('wix-ui-test-utils/protractor');

var _storybookHelpers = require('../../test/utils/storybook-helpers');

var EC = protractor.ExpectedConditions;

describe('PopoverMenu', function () {
  var storyUrl = (0, _storybookHelpers.getStoryUrl)('7. Tooltips', '7.3. Popover Menu');
  var driver = void 0;

  beforeEach(function () {
    driver = (0, _protractor.popoverMenuTestkitFactory)({ dataHook: _PopoverMenuTemplate.POPOVER_MENU_DATA_HOOK }).init.menuItemDataHook(_PopoverMenuTemplate.POPOVER_MENU_ITEM_DATA_HOOK);
    browser.get(storyUrl);
  });

  it('should show popover menu', function () {
    (0, _protractor2.waitForVisibilityOf)(driver.element(), 'Can not find PopoverMenu trigger element').then(function () {
      driver.click();

      (0, _protractor2.waitForVisibilityOf)(driver.menu.element(), 'Can not find PopoverMenu menu');
    });
  });

  it('should hide popover menu on item click', function () {
    (0, _protractor2.waitForVisibilityOf)(driver.element()).then(function () {
      driver.click();

      (0, _protractor2.waitForVisibilityOf)(driver.menu.element()).then(function () {
        driver.menu.clickItemAt(0);

        browser.wait(EC.stalenessOf(driver.menu.element()), 5000, 'PopoverMenu has not been hidden after menu item click');
      });
    });
  });
});