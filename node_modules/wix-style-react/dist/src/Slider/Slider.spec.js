'use strict';

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _Slider = require('./Slider');

var _Slider2 = _interopRequireDefault(_Slider);

var _driverFactory = require('wix-ui-test-utils/driver-factory');

var _Slider3 = require('./Slider.driver');

var _Slider4 = _interopRequireDefault(_Slider3);

var _testkit = require('../../testkit');

var _enzyme = require('../../testkit/enzyme');

var _testkitSanity = require('../../test/utils/testkit-sanity');

var _enzyme2 = require('enzyme');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

describe('Slider', function () {

  var createDriver = (0, _driverFactory.createDriverFactory)(_Slider4.default);
  var driver = void 0;

  it('should render slider', function () {
    var onChange = jest.fn(function (value) {
      return undefined.setState({ value: value });
    });
    var props = { value: [3], min: 1, max: 10, onChange: onChange };

    driver = createDriver(_react2.default.createElement(_Slider2.default, props));

    expect(driver.numOfSliderDots()).toBe(10);
    expect(driver.numOfSliderHandles()).toBe(1);
    expect(driver.isDotSelected(3)).toBe(true);
  });

  it('should render slider with multi-range', function () {
    var onChange = jest.fn(function (value) {
      return undefined.setState({ value: value });
    });
    var props = { value: [3, 5, 7], min: 1, max: 10, onChange: onChange };

    driver = createDriver(_react2.default.createElement(_Slider2.default, props));

    expect(driver.numOfSliderDots()).toBe(10);
    expect(driver.numOfSliderHandles()).toBe(3);

    props.value.forEach(function (selectedValue) {
      expect(driver.isDotSelected(selectedValue)).toBe(true);
    });
  });

  it('should show correct value on hover', function () {
    var onChange = jest.fn(function (value) {
      return undefined.setState({ value: value });
    });
    var props = { value: [3, 5, 7], min: 1, max: 10, onChange: onChange };

    driver = createDriver(_react2.default.createElement(_Slider2.default, props));

    driver.hoverHandle({ handleIndex: 0 });

    expect(driver.getToolTipValue()).toBe('' + props.value[0]);

    driver.unHoverHandle({ handleIndex: 0 });
    driver.hoverHandle({ handleIndex: 1 });

    expect(driver.getToolTipValue()).toBe('' + props.value[1]);
  });

  it('should not display tooltip if `displayTooltip` is set to false', function () {
    var onChange = jest.fn(function (value) {
      return undefined.setState({ value: value });
    });
    var props = { value: [4], displayTooltip: false, onChange: onChange };

    driver = createDriver(_react2.default.createElement(_Slider2.default, props));

    driver.hoverHandle({ handleIndex: 0 });

    expect(driver.getToolTipValue()).toBeFalsy();

    driver.unHoverHandle({ handleIndex: 0 });
  });
});

describe('testkit', function () {
  it('should exist', function () {
    expect((0, _testkitSanity.isTestkitExists)(_react2.default.createElement(_Slider2.default, { onChange: function onChange() {} }), _testkit.sliderTestkitFactory)).toBe(true);
  });
});

describe('enzyme testkit', function () {
  it('should exist', function () {
    expect((0, _testkitSanity.isEnzymeTestkitExists)(_react2.default.createElement(_Slider2.default, { onChange: function onChange() {} }), _enzyme.sliderTestkitFactory, _enzyme2.mount)).toBe(true);
  });
});