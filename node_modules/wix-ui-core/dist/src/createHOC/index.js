"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var ReactDOM = require("react-dom");
var prop_types_1 = require("prop-types");
var hoist_non_react_methods_1 = require("hoist-non-react-methods");
var isStatelessComponent = function (Component) { return !(Component.prototype && Component.prototype.render); };
exports.createHOC = function (Component) {
    var WixComponent = /** @class */ (function (_super) {
        __extends(WixComponent, _super);
        function WixComponent() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.wrappedComponentRef = null;
            return _this;
        }
        WixComponent.prototype.componentDidMount = function () {
            var _a = this.props, dataHook = _a.dataHook, dataClass = _a.dataClass;
            if (dataHook || dataClass) {
                var domNode = ReactDOM.findDOMNode(this);
                if (domNode && 'setAttribute' in domNode) {
                    dataHook && domNode.setAttribute('data-hook', dataHook);
                    dataClass && domNode.setAttribute('data-class', dataClass);
                }
            }
        };
        WixComponent.prototype.render = function () {
            var _this = this;
            // Can't pass refs to stateless components (and also there's nothing to hoist)
            return isStatelessComponent(Component)
                ? (React.createElement(Component, __assign({}, this.props)))
                : (React.createElement(Component, __assign({ ref: function (ref) { return _this.wrappedComponentRef = ref; } }, this.props)));
        };
        WixComponent.propTypes = __assign({}, Component.propTypes, { dataHook: prop_types_1.string, dataClass: prop_types_1.string });
        WixComponent.displayName = Component.displayName || Component.name || 'WixComponent';
        return WixComponent;
    }(React.PureComponent));
    return isStatelessComponent(Component)
        ? WixComponent
        : hoist_non_react_methods_1.default(WixComponent, Component, { delegateTo: function (c) { return c.wrappedComponentRef; }, hoistStatics: true });
};
//# sourceMappingURL=index.js.map